(function(g,je){typeof exports=="object"&&typeof module<"u"?je(exports):typeof define=="function"&&define.amd?define(["exports"],je):(g=typeof globalThis<"u"?globalThis:g||self,je(g["@walletconnect/utils"]={}))})(this,function(g){"use strict";const je=":";function Un(e){const[t,n]=e.split(je);return{namespace:t,reference:n}}function vo(e){const{namespace:t,reference:n}=e;return[t,n].join(je)}function Rn(e){const[t,n,r]=e.split(je);return{namespace:t,reference:n,address:r}}function Ao(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(je)}function Fn(e,t){const n=[];return e.forEach(r=>{const o=t(r);n.includes(o)||n.push(o)}),n}function So(e){const{address:t}=Rn(e);return t}function _o(e){const{namespace:t,reference:n}=Rn(e);return vo({namespace:t,reference:n})}function jc(e,t){const{namespace:n,reference:r}=Un(t);return Ao({namespace:n,reference:r,address:e})}function Lc(e){return Fn(e,So)}function xo(e){return Fn(e,_o)}function Mc(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...o.accounts)}),n}function zc(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...xo(o.accounts))}),n}function kc(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...nn(r,o))}),n}function nn(e,t){return e.includes(":")?[e]:t.chains||[]}var Bo=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Vc=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),Hc=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),qc=function(){function e(t,n,r,o){this.name=t,this.version=n,this.os=r,this.bot=o,this.type="bot-device"}return e}(),Kc=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Wc=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),Yc=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Gc=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Oo=3,Zc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Yc]],Co=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Xc(e){return e?No(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Wc:typeof navigator<"u"?No(navigator.userAgent):eu()}function Jc(e){return e!==""&&Zc.reduce(function(t,n){var r=n[0],o=n[1];if(t)return t;var i=o.exec(e);return!!i&&[r,i]},!1)}function No(e){var t=Jc(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new Kc;var o=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);o?o.length<Oo&&(o=Bo(Bo([],o,!0),tu(Oo-o.length),!0)):o=[];var i=o.join("."),s=Qc(e),a=Gc.exec(e);return a&&a[1]?new qc(n,i,s,a[1]):new Vc(n,i,s)}function Qc(e){for(var t=0,n=Co.length;t<n;t++){var r=Co[t],o=r[0],i=r[1],s=i.exec(e);if(s)return o}return null}function eu(){var e=typeof process<"u"&&process.version;return e?new Hc(process.version.slice(1)):null}function tu(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function nu(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Qe={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var $n=function(e,t){return $n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},$n(e,t)};function ru(e,t){$n(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Pn=function(){return Pn=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pn.apply(this,arguments)};function ou(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function iu(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function su(e,t){return function(n,r){t(n,r,e)}}function au(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function cu(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{u(r.next(f))}catch(l){s(l)}}function c(f){try{u(r.throw(f))}catch(l){s(l)}}function u(f){f.done?i(f.value):o(f.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function uu(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function fu(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function lu(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function jn(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Io(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function du(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Io(arguments[t]));return e}function hu(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function Rt(e){return this instanceof Rt?(this.v=e,this):new Rt(e)}function bu(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(d){r[d]&&(o[d]=function(w){return new Promise(function(h,p){i.push([d,w,h,p])>1||a(d,w)})})}function a(d,w){try{c(r[d](w))}catch(h){l(i[0][3],h)}}function c(d){d.value instanceof Rt?Promise.resolve(d.value.v).then(u,f):l(i[0][2],d)}function u(d){a("next",d)}function f(d){a("throw",d)}function l(d,w){d(w),i.shift(),i.length&&a(i[0][0],i[0][1])}}function gu(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(s){return(n=!n)?{value:Rt(e[o](s)),done:o==="return"}:i?i(s):s}:i}}function pu(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof jn=="function"?jn(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}function wu(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function yu(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function mu(e){return e&&e.__esModule?e:{default:e}}function Eu(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Du(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var vu=Object.freeze({__proto__:null,__extends:ru,get __assign(){return Pn},__rest:ou,__decorate:iu,__param:su,__metadata:au,__awaiter:cu,__generator:uu,__createBinding:fu,__exportStar:lu,__values:jn,__read:Io,__spread:du,__spreadArrays:hu,__await:Rt,__asyncGenerator:bu,__asyncDelegator:gu,__asyncValues:pu,__makeTemplateObject:wu,__importStar:yu,__importDefault:mu,__classPrivateFieldGet:Eu,__classPrivateFieldSet:Du}),rn=nu(vu),Ln={},Ft={},To;function Au(){if(To)return Ft;To=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return Ft.delay=e,Ft}var et={},Mn={},tt={},Uo;function Su(){return Uo||(Uo=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.ONE_THOUSAND=tt.ONE_HUNDRED=void 0,tt.ONE_HUNDRED=100,tt.ONE_THOUSAND=1e3),tt}var zn={},Ro;function _u(){return Ro||(Ro=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(zn)),zn}var Fo;function $o(){return Fo||(Fo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=rn;t.__exportStar(Su(),e),t.__exportStar(_u(),e)}(Mn)),Mn}var Po;function xu(){if(Po)return et;Po=1,Object.defineProperty(et,"__esModule",{value:!0}),et.fromMiliseconds=et.toMiliseconds=void 0;const e=$o();function t(r){return r*e.ONE_THOUSAND}et.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return et.fromMiliseconds=n,et}var jo;function Bu(){return jo||(jo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=rn;t.__exportStar(Au(),e),t.__exportStar(xu(),e)}(Ln)),Ln}var ht={},Lo;function Ou(){if(Lo)return ht;Lo=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const o=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:o})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return ht.Watch=e,ht.default=e,ht}var kn={},$t={},Mo;function Cu(){if(Mo)return $t;Mo=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.IWatch=void 0;class e{}return $t.IWatch=e,$t}var zo;function Nu(){return zo||(zo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),rn.__exportStar(Cu(),e)}(kn)),kn}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=rn;t.__exportStar(Bu(),e),t.__exportStar(Ou(),e),t.__exportStar(Nu(),e),t.__exportStar($o(),e)})(Qe);var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.getLocalStorage=W.getLocalStorageOrThrow=W.getCrypto=W.getCryptoOrThrow=Hn=W.getLocation=W.getLocationOrThrow=Vn=W.getNavigator=W.getNavigatorOrThrow=gt=W.getDocument=W.getDocumentOrThrow=W.getFromWindowOrThrow=W.getFromWindow=void 0;function nt(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}W.getFromWindow=nt;function bt(e){const t=nt(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}W.getFromWindowOrThrow=bt;function Iu(){return bt("document")}W.getDocumentOrThrow=Iu;function Tu(){return nt("document")}var gt=W.getDocument=Tu;function Uu(){return bt("navigator")}W.getNavigatorOrThrow=Uu;function Ru(){return nt("navigator")}var Vn=W.getNavigator=Ru;function Fu(){return bt("location")}W.getLocationOrThrow=Fu;function $u(){return nt("location")}var Hn=W.getLocation=$u;function Pu(){return bt("crypto")}W.getCryptoOrThrow=Pu;function ju(){return nt("crypto")}W.getCrypto=ju;function Lu(){return bt("localStorage")}W.getLocalStorageOrThrow=Lu;function Mu(){return nt("localStorage")}W.getLocalStorage=Mu;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});var ko=qn.getWindowMetadata=void 0;const Vo=W;function zu(){let e,t;try{e=Vo.getDocumentOrThrow(),t=Vo.getLocationOrThrow()}catch{return null}function n(){const l=e.getElementsByTagName("link"),d=[];for(let w=0;w<l.length;w++){const h=l[w],p=h.getAttribute("rel");if(p&&p.toLowerCase().indexOf("icon")>-1){const b=h.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let D=t.protocol+"//"+t.host;if(b.indexOf("/")===0)D+=b;else{const E=t.pathname.split("/");E.pop();const y=E.join("/");D+=y+"/"+b}d.push(D)}else if(b.indexOf("//")===0){const D=t.protocol+b;d.push(D)}else d.push(b)}}return d}function r(...l){const d=e.getElementsByTagName("meta");for(let w=0;w<d.length;w++){const h=d[w],p=["itemprop","property","name"].map(b=>h.getAttribute(b)).filter(b=>b?l.includes(b):!1);if(p.length&&p){const b=h.getAttribute("content");if(b)return b}}return""}function o(){let l=r("name","og:site_name","og:title","twitter:title");return l||(l=e.title),l}function i(){return r("description","og:description","twitter:description","keywords")}const s=o(),a=i(),c=t.origin,u=n();return{description:a,url:c,icons:u,name:s}}ko=qn.getWindowMetadata=zu;var ku=Object.defineProperty,Vu=Object.defineProperties,Hu=Object.getOwnPropertyDescriptors,Ho=Object.getOwnPropertySymbols,qu=Object.prototype.hasOwnProperty,Ku=Object.prototype.propertyIsEnumerable,qo=(e,t,n)=>t in e?ku(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ko=(e,t)=>{for(var n in t||(t={}))qu.call(t,n)&&qo(e,n,t[n]);if(Ho)for(var n of Ho(t))Ku.call(t,n)&&qo(e,n,t[n]);return e},Wu=(e,t)=>Vu(e,Hu(t));const Wo="ReactNative",ce={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},on=" ",Yu=":",Yo="/",Kn=2,Gu=1e3,Go="js";function Wn(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Le(){return!gt()&&!!Vn()&&navigator.product===Wo}function Zu(){return Le()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Xu(){return Le()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function pt(){return!Wn()&&!!Vn()&&!!gt()}function rt(){return Le()?ce.reactNative:Wn()?ce.node:pt()?ce.browser:ce.unknown}function Ju(){var e;try{return Le()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Zo(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const o=t[r];o!==void 0&&n.set(r,o)}return n.toString()}function Qu(e){var t,n;const r=Xo();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(o=>o!=="")),Wu(Ko(Ko({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(o){return console.warn("Error populating app metadata",o),e||r}}function Xo(){return ko()||{name:"",description:"",url:"",icons:[""]}}function ef(e,t){var n;const r=rt(),o={protocol:e,version:t,env:r};return r==="browser"&&(o.host=((n=Hn())==null?void 0:n.host)||"unknown"),o}function Jo(){if(rt()===ce.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=Xc();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Qo(){var e;const t=rt();return t===ce.browser?[t,((e=Hn())==null?void 0:e.host)||"unknown"].join(":"):t}function ei(e,t,n){const r=Jo(),o=Qo();return[[e,t].join("-"),[Go,n].join("-"),r,o].join("/")}function tf({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:o,projectId:i,useOnCloseEvent:s,bundleId:a,packageName:c}){const u=n.split("?"),f=ei(e,t,r),l={auth:o,ua:f,projectId:i,useOnCloseEvent:s||void 0,packageName:c||void 0,bundleId:a||void 0},d=Zo(u[1]||"",l);return u[0]+"?"+d}function nf(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function rf(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function ti(e,t=Kn){return ni(e.split(Yo),t)}function of(e){return ti(e).join(on)}function Me(e,t){return e.filter(n=>t.includes(n)).length===e.length}function ni(e,t=Kn){return e.slice(Math.max(e.length-t,0))}function sf(e){return Object.fromEntries(e.entries())}function af(e){return new Map(Object.entries(e))}function cf(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const uf=e=>e;function ri(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function ff(e){return e.split(on).map(t=>ri(t)).join(on)}function lf(e=Qe.FIVE_MINUTES,t){const n=Qe.toMiliseconds(e||Qe.FIVE_MINUTES);let r,o,i,s;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),s=Promise.resolve(a))},reject:a=>{i&&o&&(clearTimeout(i),o(a))},done:()=>new Promise((a,c)=>{if(s)return a(s);i=setTimeout(()=>{const u=new Error(t);s=Promise.reject(u),c(u)},n),r=a,o=c})}}function df(e,t,n){return new Promise(async(r,o)=>{const i=setTimeout(()=>o(new Error(n)),t);try{const s=await e;r(s)}catch(s){o(s)}clearTimeout(i)})}function Yn(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function hf(e){return Yn("topic",e)}function bf(e){return Yn("id",e)}function gf(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function pf(e,t){return Qe.fromMiliseconds((t||Date.now())+Qe.toMiliseconds(e))}function wf(e){return Date.now()>=Qe.toMiliseconds(e)}function yf(e,t){return`${e}${t?`:${t}`:""}`}function we(e=[],t=[]){return[...new Set([...e,...t])]}async function mf({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const o=typeof n=="string"?JSON.parse(n):n,i=o?.href;if(typeof i!="string")return;const s=oi(i,e,t),a=rt();if(a===ce.browser){if(!((r=gt())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ii(s)}else a===ce.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(o){console.error(o)}}function oi(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let o=`${e}`;if(e.startsWith("https://t.me")){const i=e.includes("?")?"&startapp=":"?startapp=";o=`${o}${i}${ci(r,!0)}`}else o=`${o}/wc?${r}`;return o}function ii(e){let t="_self";ai()?t="_top":(si()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Ef(e,t){let n="";try{if(pt()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Gn(e,t){return e.filter(n=>t.includes(n))}function Df(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function vf(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Af(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function si(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function ai(){try{return window.self!==window.top}catch{return!1}}function ci(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function Zn(e){return Buffer.from(e,"base64").toString("utf-8")}function Sf(e){return new Promise(t=>setTimeout(t,e))}function Pt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function _f(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function jt(e,...t){if(!_f(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Xn(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Pt(e.outputLen),Pt(e.blockLen)}function wt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ui(e,t){jt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const sn=BigInt(2**32-1),fi=BigInt(32);function xf(e,t=!1){return t?{h:Number(e&sn),l:Number(e>>fi&sn)}:{h:Number(e>>fi&sn)|0,l:Number(e&sn)|0}}function Bf(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=xf(e[o],t);[n[o],r[o]]=[i,s]}return[n,r]}const Of=(e,t,n)=>e<<n|t>>>32-n,Cf=(e,t,n)=>t<<n|e>>>32-n,Nf=(e,t,n)=>t<<n-32|e>>>64-n,If=(e,t,n)=>e<<n-32|t>>>64-n,yt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Tf(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Jn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ae(e,t){return e<<32-t|e>>>t}const li=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Uf(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function di(e){for(let t=0;t<e.length;t++)e[t]=Uf(e[t])}function Rf(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function mt(e){return typeof e=="string"&&(e=Rf(e)),jt(e),e}function Ff(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];jt(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}class Qn{clone(){return this._cloneInto()}}function hi(e){const t=r=>e().update(mt(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ot(e=32){if(yt&&typeof yt.getRandomValues=="function")return yt.getRandomValues(new Uint8Array(e));if(yt&&typeof yt.randomBytes=="function")return yt.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const bi=[],gi=[],pi=[],$f=BigInt(0),Lt=BigInt(1),Pf=BigInt(2),jf=BigInt(7),Lf=BigInt(256),Mf=BigInt(113);for(let e=0,t=Lt,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],bi.push(2*(5*r+n)),gi.push((e+1)*(e+2)/2%64);let o=$f;for(let i=0;i<7;i++)t=(t<<Lt^(t>>jf)*Mf)%Lf,t&Pf&&(o^=Lt<<(Lt<<BigInt(i))-Lt);pi.push(o)}const[zf,kf]=Bf(pi,!0),wi=(e,t,n)=>n>32?Nf(e,t,n):Of(e,t,n),yi=(e,t,n)=>n>32?If(e,t,n):Cf(e,t,n);function Vf(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,c=(s+2)%10,u=n[c],f=n[c+1],l=wi(u,f,1)^n[a],d=yi(u,f,1)^n[a+1];for(let w=0;w<50;w+=10)e[s+w]^=l,e[s+w+1]^=d}let o=e[2],i=e[3];for(let s=0;s<24;s++){const a=gi[s],c=wi(o,i,a),u=yi(o,i,a),f=bi[s];o=e[f],i=e[f+1],e[f]=c,e[f+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)n[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=zf[r],e[1]^=kf[r]}n.fill(0)}class er extends Qn{constructor(t,n,r,o=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Pt(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Tf(this.state)}keccak(){li||di(this.state32),Vf(this.state32,this.rounds),li||di(this.state32),this.posOut=0,this.pos=0}update(t){wt(this);const{blockLen:n,state:r}=this;t=mt(t);const o=t.length;for(let i=0;i<o;){const s=Math.min(n-this.pos,o-i);for(let a=0;a<s;a++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:o}=this;t[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){wt(this,!1),jt(t),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,i=t.length;o<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-o);t.set(n.subarray(this.posOut,this.posOut+s),o),this.posOut+=s,o+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Pt(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ui(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:o,rounds:i,enableXOF:s}=this;return t||(t=new er(n,r,o,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=o,t.enableXOF=s,t.destroyed=this.destroyed,t}}const tr=((e,t,n)=>hi(()=>new er(t,e,n)))(1,136,256/8);function Mt(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function mi(e){return Mt(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Ei="2.23.2";let nr={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Ei}`};class it extends Error{constructor(t,n={}){const r=n.cause instanceof it?n.cause.details:n.cause?.message?n.cause.message:n.details,o=n.cause instanceof it&&n.cause.docsPath||n.docsPath,i=nr.getDocsUrl?.({...n,docsPath:o}),s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...nr.version?[`Version: ${nr.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=o,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Ei}walk(t){return Di(this,t)}}function Di(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Di(e.cause,t):t?null:e}class vi extends it{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Et(e,{dir:t,size:n=32}={}){return typeof e=="string"?Hf(e,{dir:t,size:n}):qf(e,{dir:t,size:n})}function Hf(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new vi({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function qf(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new vi({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let o=0;o<n;o++){const i=t==="right";r[i?o:n-o-1]=e[i?o:e.length-o-1]}return r}class Kf extends it{constructor({max:t,min:n,signed:r,size:o,value:i}){super(`Number "${i}" is not in safe ${o?`${o*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Wf extends it{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function Dt(e,{size:t}){if(mi(e)>t)throw new Wf({givenSize:mi(e),maxSize:t})}function rr(e,t={}){const{signed:n}=t;t.size&&Dt(e,{size:t.size});const r=BigInt(e);if(!n)return r;const o=(e.length-2)/2,i=(1n<<BigInt(o)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(o*2,"f")}`)-1n}function Yf(e,t={}){return Number(rr(e,t))}const Gf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function or(e,t={}){return typeof e=="number"||typeof e=="bigint"?Si(e,t):typeof e=="string"?Jf(e,t):typeof e=="boolean"?Zf(e,t):Ai(e,t)}function Zf(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Dt(n,{size:t.size}),Et(n,{size:t.size})):n}function Ai(e,t={}){let n="";for(let o=0;o<e.length;o++)n+=Gf[e[o]];const r=`0x${n}`;return typeof t.size=="number"?(Dt(r,{size:t.size}),Et(r,{dir:"right",size:t.size})):r}function Si(e,t={}){const{signed:n,size:r}=t,o=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&o>i||o<s){const c=typeof e=="bigint"?"n":"";throw new Kf({max:i?`${i}${c}`:void 0,min:`${s}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&o<0?(1n<<BigInt(r*8))+BigInt(o):o).toString(16)}`;return r?Et(a,{size:r}):a}const Xf=new TextEncoder;function Jf(e,t={}){const n=Xf.encode(e);return Ai(n,t)}const Qf=new TextEncoder;function el(e,t={}){return typeof e=="number"||typeof e=="bigint"?nl(e,t):typeof e=="boolean"?tl(e,t):Mt(e)?xi(e,t):Bi(e,t)}function tl(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Dt(n,{size:t.size}),Et(n,{size:t.size})):n}const Ce={zero:48,nine:57,A:65,F:70,a:97,f:102};function _i(e){if(e>=Ce.zero&&e<=Ce.nine)return e-Ce.zero;if(e>=Ce.A&&e<=Ce.F)return e-(Ce.A-10);if(e>=Ce.a&&e<=Ce.f)return e-(Ce.a-10)}function xi(e,t={}){let n=e;t.size&&(Dt(n,{size:t.size}),n=Et(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,i=new Uint8Array(o);for(let s=0,a=0;s<o;s++){const c=_i(r.charCodeAt(a++)),u=_i(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new it(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[s]=c*16+u}return i}function nl(e,t){const n=Si(e,t);return xi(n)}function Bi(e,t={}){const n=Qf.encode(e);return typeof t.size=="number"?(Dt(n,{size:t.size}),Et(n,{dir:"right",size:t.size})):n}function Oi(e,t){const n=t||"hex",r=tr(Mt(e,{strict:!1})?el(e):e);return n==="bytes"?r:or(r)}class Ci extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const ir=new Ci(8192);function rl(e,t){if(ir.has(`${e}.${t}`))return ir.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=Oi(Bi(n),"bytes"),o=(t?n.substring(`${t}0x`.length):n).split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&o[s]&&(o[s]=o[s].toUpperCase()),(r[s>>1]&15)>=8&&o[s+1]&&(o[s+1]=o[s+1].toUpperCase());const i=`0x${o.join("")}`;return ir.set(`${e}.${t}`,i),i}function ol(e){const t=Oi(`0x${e.substring(4)}`).substring(26);return rl(`0x${t}`)}async function il({hash:e,signature:t}){const n=Mt(e)?e:or(e),{secp256k1:r}=await Promise.resolve().then(function(){return Pd});return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:l,yParity:d}=t,w=Number(d??l),h=Ni(w);return new r.Signature(rr(u),rr(f)).addRecoveryBit(h)}const s=Mt(t)?t:or(t),a=Yf(`0x${s.slice(130)}`),c=Ni(a);return r.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Ni(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function sl({hash:e,signature:t}){return ol(await il({hash:e,signature:t}))}function al(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}function cl(e,t,n){return e&t^~e&n}function ul(e,t,n){return e&t^e&n^t&n}class fl extends Qn{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Jn(this.buffer)}update(t){wt(this);const{view:n,buffer:r,blockLen:o}=this;t=mt(t);const i=t.length;for(let s=0;s<i;){const a=Math.min(o-this.pos,i-s);if(a===o){const c=Jn(t);for(;o<=i-s;s+=o)this.process(c,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){wt(this),ui(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;al(r,o-8,BigInt(this.length*8),i),this.process(r,0);const a=Jn(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,f[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}}const ll=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ke=new Uint32Array(64);class dl extends fl{constructor(){super(64,32,8,!1),this.A=ze[0]|0,this.B=ze[1]|0,this.C=ze[2]|0,this.D=ze[3]|0,this.E=ze[4]|0,this.F=ze[5]|0,this.G=ze[6]|0,this.H=ze[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)ke[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=ke[l-15],w=ke[l-2],h=Ae(d,7)^Ae(d,18)^d>>>3,p=Ae(w,17)^Ae(w,19)^w>>>10;ke[l]=p+ke[l-7]+h+ke[l-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){const d=Ae(a,6)^Ae(a,11)^Ae(a,25),w=f+d+cl(a,c,u)+ll[l]+ke[l]|0,p=(Ae(r,2)^Ae(r,13)^Ae(r,22))+ul(r,o,i)|0;f=u,u=c,c=a,a=s+w|0,s=i,i=o,o=r,r=w+p|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,o,i,s,a,c,u,f)}roundClean(){ke.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ne=hi(()=>new dl);new Ci(128);const hl=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ii=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),bl=Ii.map(e=>(9*e+5)%16);let gl=[Ii],pl=[bl];for(let e=0;e<4;e++)for(let t of[gl,pl])t.push(t[e].map(n=>hl[n]));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const an=BigInt(0),cn=BigInt(1),wl=BigInt(2);function st(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Se(e){if(!st(e))throw new Error("Uint8Array expected")}function vt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const yl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function At(e){Se(e);let t="";for(let n=0;n<e.length;n++)t+=yl[e[n]];return t}function St(e){const t=e.toString(16);return t.length&1?"0"+t:t}function sr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?an:BigInt("0x"+e)}const Ie={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ti(e){if(e>=Ie._0&&e<=Ie._9)return e-Ie._0;if(e>=Ie.A&&e<=Ie.F)return e-(Ie.A-10);if(e>=Ie.a&&e<=Ie.f)return e-(Ie.a-10)}function _t(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=Ti(e.charCodeAt(i)),a=Ti(e.charCodeAt(i+1));if(s===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=s*16+a}return r}function _e(e){return sr(At(e))}function zt(e){return Se(e),sr(At(Uint8Array.from(e).reverse()))}function Ve(e,t){return _t(e.toString(16).padStart(t*2,"0"))}function un(e,t){return Ve(e,t).reverse()}function ml(e){return _t(St(e))}function ne(e,t,n){let r;if(typeof t=="string")try{r=_t(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(st(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}function de(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];Se(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}function El(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function fn(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const ar=e=>typeof e=="bigint"&&an<=e;function xt(e,t,n){return ar(e)&&ar(t)&&ar(n)&&t<=e&&e<n}function xe(e,t,n,r){if(!xt(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Ui(e){let t;for(t=0;e>an;e>>=cn,t+=1);return t}function Dl(e,t){return e>>BigInt(t)&cn}function vl(e,t,n){return e|(n?cn:an)<<BigInt(t)}const cr=e=>(wl<<BigInt(e-1))-cn,ur=e=>new Uint8Array(e),Ri=e=>Uint8Array.from(e);function Fi(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ur(e),o=ur(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...l)=>n(o,r,...l),c=(l=ur())=>{o=a(Ri([0]),l),r=a(),l.length!==0&&(o=a(Ri([1]),l),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<t;){r=a();const w=r.slice();d.push(w),l+=r.length}return de(...d)};return(l,d)=>{s(),c(l);let w;for(;!(w=d(u()));)c();return s(),w}}const Al={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||st(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function at(e,t,n={}){const r=(o,i,s)=>{const a=Al[i];if(typeof a!="function")throw new Error("invalid validator function");const c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+c)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const Sl=()=>{throw new Error("not implemented")};function fr(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const i=e(n,...r);return t.set(n,i),i}}var _l=Object.freeze({__proto__:null,isBytes:st,abytes:Se,abool:vt,bytesToHex:At,numberToHexUnpadded:St,hexToNumber:sr,hexToBytes:_t,bytesToNumberBE:_e,bytesToNumberLE:zt,numberToBytesBE:Ve,numberToBytesLE:un,numberToVarBytesBE:ml,ensureBytes:ne,concatBytes:de,equalBytes:El,utf8ToBytes:fn,inRange:xt,aInRange:xe,bitLen:Ui,bitGet:Dl,bitSet:vl,bitMask:cr,createHmacDrbg:Fi,validateObject:at,notImplemented:Sl,memoized:fr});const xl="0.1.1";function Bl(){return xl}class ue extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof ue){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),o=n.cause instanceof ue&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${o??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||o?["",r?`Details: ${r}`:void 0,o?`See: ${s}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Bl()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=o,this.shortMessage=t}walk(t){return $i(this,t)}}function $i(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?$i(e.cause,t):t?null:e}function Ol(e,t){if(Li(e)>t)throw new $l({givenSize:Li(e),maxSize:t})}const Te={zero:48,nine:57,A:65,F:70,a:97,f:102};function Pi(e){if(e>=Te.zero&&e<=Te.nine)return e-Te.zero;if(e>=Te.A&&e<=Te.F)return e-(Te.A-10);if(e>=Te.a&&e<=Te.f)return e-(Te.a-10)}function Cl(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Pl({size:e.length,targetSize:r,type:"Bytes"});const o=new Uint8Array(r);for(let i=0;i<r;i++){const s=n==="right";o[s?i:r-i-1]=e[s?i:e.length-i-1]}return o}function lr(e,t){if(hr(e)>t)throw new Hl({givenSize:hr(e),maxSize:t})}function ji(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const o=e.replace("0x","");if(o.length>r*2)throw new ql({size:Math.ceil(o.length/2),targetSize:r,type:"Hex"});return`0x${o[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Nl=new TextEncoder;function Il(e){return e instanceof Uint8Array?e:typeof e=="string"?Ul(e):Tl(e)}function Tl(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Ul(e,t={}){const{size:n}=t;let r=e;n&&(lr(e,n),r=dr(e,n));let o=r.slice(2);o.length%2&&(o=`0${o}`);const i=o.length/2,s=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=Pi(o.charCodeAt(c++)),f=Pi(o.charCodeAt(c++));if(u===void 0||f===void 0)throw new ue(`Invalid byte sequence ("${o[c-2]}${o[c-1]}" in "${o}").`);s[a]=u*16+f}return s}function Rl(e,t={}){const{size:n}=t,r=Nl.encode(e);return typeof n=="number"?(Ol(r,n),Fl(r,n)):r}function Fl(e,t){return Cl(e,{dir:"right",size:t})}function Li(e){return e.length}class $l extends ue{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class Pl extends ue{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const jl=new TextEncoder,Ll=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Mi(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Ml(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(lr(n,t.size),ln(n,t.size)):n}function zi(e,t={}){let n="";for(let o=0;o<e.length;o++)n+=Ll[e[o]];const r=`0x${n}`;return typeof t.size=="number"?(lr(r,t.size),dr(r,t.size)):r}function zl(e,t={}){const{signed:n,size:r}=t,o=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&o>i||o<s){const u=typeof e=="bigint"?"n":"";throw new Vl({max:i?`${i}${u}`:void 0,min:`${s}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&o<0?(1n<<BigInt(r*8))+BigInt(o):o).toString(16)}`;return r?ln(c,r):c}function kl(e,t={}){return zi(jl.encode(e),t)}function ln(e,t){return ji(e,{dir:"left",size:t})}function dr(e,t){return ji(e,{dir:"right",size:t})}function hr(e){return Math.ceil((e.length-2)/2)}class Vl extends ue{constructor({max:t,min:n,signed:r,size:o,value:i}){super(`Number \`${i}\` is not in safe${o?` ${o*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Hl extends ue{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ql extends ue{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Kl(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=tr(Il(e));return n==="Bytes"?r:zi(r)}class Wl extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const br={checksum:new Wl(8192)}.checksum,Yl=/^0x[a-fA-F0-9]{40}$/;function ki(e,t={}){const{strict:n=!0}=t;if(!Yl.test(e))throw new Vi({address:e,cause:new Zl});if(n){if(e.toLowerCase()===e)return;if(Gl(e)!==e)throw new Vi({address:e,cause:new Xl})}}function Gl(e){if(br.has(e))return br.get(e);ki(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Kl(Rl(t),{as:"Bytes"}),r=t.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const o=`0x${r.join("")}`;return br.set(e,o),o}class Vi extends ue{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Zl extends ue{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Xl extends ue{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Jl=/^(.*)\[([0-9]*)\]$/,Ql=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ed=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function gr(e,t){if(e.length!==t.length)throw new nd({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const o=e[r],i=t[r];n.push(gr.encode(o,i))}return Mi(...n)}(function(e){function t(n,r,o=!1){if(n==="address"){const c=r;return ki(c),ln(c.toLowerCase(),o?32:0)}if(n==="string")return kl(r);if(n==="bytes")return r;if(n==="bool")return ln(Ml(r),o?32:1);const i=n.match(ed);if(i){const[c,u,f="256"]=i,l=Number.parseInt(f)/8;return zl(r,{size:o?32:l,signed:u==="int"})}const s=n.match(Ql);if(s){const[c,u]=s;if(Number.parseInt(u)!==(r.length-2)/2)throw new td({expectedSize:Number.parseInt(u),value:r});return dr(r,o?32:0)}const a=n.match(Jl);if(a&&Array.isArray(r)){const[c,u]=a,f=[];for(let l=0;l<r.length;l++)f.push(t(u,r[l],!0));return f.length===0?"0x":Mi(...f)}throw new rd(n)}e.encode=t})(gr||(gr={}));class td extends ue{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${hr(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class nd extends ue{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class rd extends ue{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class Hi extends Qn{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Xn(t);const r=mt(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return wt(this),this.iHash.update(t),this}digestInto(t){wt(this),jt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const dn=(e,t,n)=>new Hi(e,t).update(n).digest();dn.create=(e,t)=>new Hi(e,t);const re=BigInt(0),X=BigInt(1),ct=BigInt(2),od=BigInt(3),pr=BigInt(4),qi=BigInt(5),Ki=BigInt(8);function Q(e,t){const n=e%t;return n>=re?n:t+n}function Wi(e,t,n){if(t<re)throw new Error("invalid exponent, negatives unsupported");if(n<=re)throw new Error("invalid modulus");if(n===X)return re;let r=X;for(;t>re;)t&X&&(r=r*e%n),e=e*e%n,t>>=X;return r}function Z(e,t,n){let r=e;for(;t-- >re;)r*=r,r%=n;return r}function wr(e,t){if(e===re)throw new Error("invert: expected non-zero number");if(t<=re)throw new Error("invert: expected positive modulus, got "+t);let n=Q(e,t),r=t,o=re,i=X;for(;n!==re;){const a=r/n,c=r%n,u=o-i*a;r=n,n=c,o=i,i=u}if(r!==X)throw new Error("invert: does not exist");return Q(o,t)}function id(e){const t=(e-X)/ct;let n,r,o;for(n=e-X,r=0;n%ct===re;n/=ct,r++);for(o=ct;o<e&&Wi(o,t,e)!==e-X;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(e+X)/pr;return function(c,u){const f=c.pow(u,s);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const i=(n+X)/ct;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,f=a.pow(a.mul(a.ONE,o),n),l=a.pow(c,i),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let w=1;for(let p=a.sqr(d);w<u&&!a.eql(p,a.ONE);w++)p=a.sqr(p);const h=a.pow(f,X<<BigInt(u-w-1));f=a.sqr(h),l=a.mul(l,h),d=a.mul(d,f),u=w}return l}}function sd(e){if(e%pr===od){const t=(e+X)/pr;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%Ki===qi){const t=(e-qi)/Ki;return function(r,o){const i=r.mul(o,ct),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,ct),s),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),o))throw new Error("Cannot find square root");return u}}return id(e)}const ad=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Yi(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ad.reduce((r,o)=>(r[o]="function",r),t);return at(e,n)}function cd(e,t,n){if(n<re)throw new Error("invalid exponent, negatives unsupported");if(n===re)return e.ONE;if(n===X)return t;let r=e.ONE,o=t;for(;n>re;)n&X&&(r=e.mul(r,o)),o=e.sqr(o),n>>=X;return r}function ud(e,t){const n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function Gi(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function yr(e,t,n=!1,r={}){if(e<=re)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:i}=Gi(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const a=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:i,MASK:cr(o),ZERO:re,ONE:X,create:c=>Q(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return re<=c&&c<e},is0:c=>c===re,isOdd:c=>(c&X)===X,neg:c=>Q(-c,e),eql:(c,u)=>c===u,sqr:c=>Q(c*c,e),add:(c,u)=>Q(c+u,e),sub:(c,u)=>Q(c-u,e),mul:(c,u)=>Q(c*u,e),pow:(c,u)=>cd(a,c,u),div:(c,u)=>Q(c*wr(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>wr(c,e),sqrt:r.sqrt||(c=>(s||(s=sd(e)),s(a,c))),invertBatch:c=>ud(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>n?un(c,i):Ve(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?zt(c):_e(c)}});return Object.freeze(a)}function Zi(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Xi(e){const t=Zi(e);return t+Math.ceil(t/2)}function fd(e,t,n=!1){const r=e.length,o=Zi(t),i=Xi(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?zt(e):_e(e),a=Q(s,t-X)+X;return n?un(a,o):Ve(a,o)}const Ji=BigInt(0),hn=BigInt(1);function mr(e,t){const n=t.negate();return e?n:t}function Qi(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Er(e,t){Qi(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function ld(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function dd(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Dr=new WeakMap,es=new WeakMap;function vr(e){return es.get(e)||1}function hd(e,t){return{constTimeNegate:mr,hasPrecomputes(n){return vr(n)!==1},unsafeLadder(n,r,o=e.ZERO){let i=n;for(;r>Ji;)r&hn&&(o=o.add(i)),i=i.double(),r>>=hn;return o},precomputeWindow(n,r){const{windows:o,windowSize:i}=Er(r,t),s=[];let a=n,c=a;for(let u=0;u<o;u++){c=a,s.push(c);for(let f=1;f<i;f++)c=c.add(a),s.push(c);a=c.double()}return s},wNAF(n,r,o){const{windows:i,windowSize:s}=Er(n,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let d=0;d<i;d++){const w=d*s;let h=Number(o&u);o>>=l,h>s&&(h-=f,o+=hn);const p=w,b=w+Math.abs(h)-1,D=d%2!==0,E=h<0;h===0?c=c.add(mr(D,r[p])):a=a.add(mr(E,r[b]))}return{p:a,f:c}},wNAFUnsafe(n,r,o,i=e.ZERO){const{windows:s,windowSize:a}=Er(n,t),c=BigInt(2**n-1),u=2**n,f=BigInt(n);for(let l=0;l<s;l++){const d=l*a;if(o===Ji)break;let w=Number(o&c);if(o>>=f,w>a&&(w-=u,o+=hn),w===0)continue;let h=r[d+Math.abs(w)-1];w<0&&(h=h.negate()),i=i.add(h)}return i},getPrecomputes(n,r,o){let i=Dr.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Dr.set(r,o(i))),i},wNAFCached(n,r,o){const i=vr(n);return this.wNAF(i,this.getPrecomputes(i,n,o),r)},wNAFCachedUnsafe(n,r,o,i){const s=vr(n);return s===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,n,o),r,i)},setWindowSize(n,r){Qi(r,t),es.set(n,r),Dr.delete(n)}}}function bd(e,t,n,r){if(ld(n,e),dd(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,i=Ui(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,a=(1<<s)-1,c=new Array(a+1).fill(o),u=Math.floor((t.BITS-1)/s)*s;let f=o;for(let l=u;l>=0;l-=s){c.fill(o);for(let w=0;w<r.length;w++){const h=r[w],p=Number(h>>BigInt(l)&BigInt(a));c[p]=c[p].add(n[w])}let d=o;for(let w=c.length-1,h=o;w>0;w--)h=h.add(c[w]),d=d.add(h);if(f=f.add(d),l!==0)for(let w=0;w<s;w++)f=f.double()}return f}function ts(e){return Yi(e.Fp),at(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gi(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ns(e){e.lowS!==void 0&&vt("lowS",e.lowS),e.prehash!==void 0&&vt("prehash",e.prehash)}function gd(e){const t=ts(e);at(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:pd,hexToBytes:wd}=_l;class yd extends Error{constructor(t=""){super(t)}}const Ue={Err:yd,_tlv:{encode:(e,t)=>{const{Err:n}=Ue;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=St(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?St(o.length/2|128):"";return St(e)+i+o+t},decode(e,t){const{Err:n}=Ue;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++],i=!!(o&128);let s=0;if(!i)s=o;else{const c=o&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)s=s<<8|f;if(r+=c,s<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+s);if(a.length!==s)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=Ue;if(e<De)throw new t("integer: negative integers are not allowed");let n=St(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Ue;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return pd(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Ue,o=typeof e=="string"?wd(e):e;Se(o);const{v:i,l:s}=r.decode(48,o);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l:f}=r.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Ue,r=t.encode(2,n.encode(e.r)),o=t.encode(2,n.encode(e.s)),i=r+o;return t.encode(48,i)}},De=BigInt(0),K=BigInt(1),He=BigInt(2),bn=BigInt(3),rs=BigInt(4);function md(e){const t=gd(e),{Fp:n}=t,r=yr(t.n,t.nBitLength),o=t.toBytes||((p,b,D)=>{const E=b.toAffine();return de(Uint8Array.from([4]),n.toBytes(E.x),n.toBytes(E.y))}),i=t.fromBytes||(p=>{const b=p.subarray(1),D=n.fromBytes(b.subarray(0,n.BYTES)),E=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:D,y:E}});function s(p){const{a:b,b:D}=t,E=n.sqr(p),y=n.mul(E,p);return n.add(n.add(y,n.mul(p,b)),D)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(p){return xt(p,K,t.n)}function c(p){const{allowedPrivateKeyLengths:b,nByteLength:D,wrapPrivateKey:E,n:y}=t;if(b&&typeof p!="bigint"){if(st(p)&&(p=At(p)),typeof p!="string"||!b.includes(p.length))throw new Error("invalid private key");p=p.padStart(D*2,"0")}let A;try{A=typeof p=="bigint"?p:_e(ne("private key",p,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof p)}return E&&(A=Q(A,y)),xe("private key",A,K,y),A}function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}const f=fr((p,b)=>{const{px:D,py:E,pz:y}=p;if(n.eql(y,n.ONE))return{x:D,y:E};const A=p.is0();b==null&&(b=A?n.ONE:n.inv(y));const I=n.mul(D,b),O=n.mul(E,b),x=n.mul(y,b);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}),l=fr(p=>{if(p.is0()){if(t.allowInfinityPoint&&!n.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:b,y:D}=p.toAffine();if(!n.isValid(b)||!n.isValid(D))throw new Error("bad point: x or y not FE");const E=n.sqr(D),y=s(b);if(!n.eql(E,y))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(b,D,E){if(this.px=b,this.py=D,this.pz=E,b==null||!n.isValid(b))throw new Error("x required");if(D==null||!n.isValid(D))throw new Error("y required");if(E==null||!n.isValid(E))throw new Error("z required");Object.freeze(this)}static fromAffine(b){const{x:D,y:E}=b||{};if(!b||!n.isValid(D)||!n.isValid(E))throw new Error("invalid affine point");if(b instanceof d)throw new Error("projective point not allowed");const y=A=>n.eql(A,n.ZERO);return y(D)&&y(E)?d.ZERO:new d(D,E,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const D=n.invertBatch(b.map(E=>E.pz));return b.map((E,y)=>E.toAffine(D[y])).map(d.fromAffine)}static fromHex(b){const D=d.fromAffine(i(ne("pointHex",b)));return D.assertValidity(),D}static fromPrivateKey(b){return d.BASE.multiply(c(b))}static msm(b,D){return bd(d,r,b,D)}_setWindowSize(b){h.setWindowSize(this,b)}assertValidity(){l(this)}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){u(b);const{px:D,py:E,pz:y}=this,{px:A,py:I,pz:O}=b,x=n.eql(n.mul(D,O),n.mul(A,y)),N=n.eql(n.mul(E,O),n.mul(I,y));return x&&N}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:D}=t,E=n.mul(D,bn),{px:y,py:A,pz:I}=this;let O=n.ZERO,x=n.ZERO,N=n.ZERO,C=n.mul(y,y),j=n.mul(A,A),R=n.mul(I,I),$=n.mul(y,A);return $=n.add($,$),N=n.mul(y,I),N=n.add(N,N),O=n.mul(b,N),x=n.mul(E,R),x=n.add(O,x),O=n.sub(j,x),x=n.add(j,x),x=n.mul(O,x),O=n.mul($,O),N=n.mul(E,N),R=n.mul(b,R),$=n.sub(C,R),$=n.mul(b,$),$=n.add($,N),N=n.add(C,C),C=n.add(N,C),C=n.add(C,R),C=n.mul(C,$),x=n.add(x,C),R=n.mul(A,I),R=n.add(R,R),C=n.mul(R,$),O=n.sub(O,C),N=n.mul(R,j),N=n.add(N,N),N=n.add(N,N),new d(O,x,N)}add(b){u(b);const{px:D,py:E,pz:y}=this,{px:A,py:I,pz:O}=b;let x=n.ZERO,N=n.ZERO,C=n.ZERO;const j=t.a,R=n.mul(t.b,bn);let $=n.mul(D,A),M=n.mul(E,I),T=n.mul(y,O),v=n.add(D,E),m=n.add(A,I);v=n.mul(v,m),m=n.add($,M),v=n.sub(v,m),m=n.add(D,y);let S=n.add(A,O);return m=n.mul(m,S),S=n.add($,T),m=n.sub(m,S),S=n.add(E,y),x=n.add(I,O),S=n.mul(S,x),x=n.add(M,T),S=n.sub(S,x),C=n.mul(j,m),x=n.mul(R,T),C=n.add(x,C),x=n.sub(M,C),C=n.add(M,C),N=n.mul(x,C),M=n.add($,$),M=n.add(M,$),T=n.mul(j,T),m=n.mul(R,m),M=n.add(M,T),T=n.sub($,T),T=n.mul(j,T),m=n.add(m,T),$=n.mul(M,m),N=n.add(N,$),$=n.mul(S,m),x=n.mul(v,x),x=n.sub(x,$),$=n.mul(v,M),C=n.mul(S,C),C=n.add(C,$),new d(x,N,C)}subtract(b){return this.add(b.negate())}is0(){return this.equals(d.ZERO)}wNAF(b){return h.wNAFCached(this,b,d.normalizeZ)}multiplyUnsafe(b){const{endo:D,n:E}=t;xe("scalar",b,De,E);const y=d.ZERO;if(b===De)return y;if(this.is0()||b===K)return this;if(!D||h.hasPrecomputes(this))return h.wNAFCachedUnsafe(this,b,d.normalizeZ);let{k1neg:A,k1:I,k2neg:O,k2:x}=D.splitScalar(b),N=y,C=y,j=this;for(;I>De||x>De;)I&K&&(N=N.add(j)),x&K&&(C=C.add(j)),j=j.double(),I>>=K,x>>=K;return A&&(N=N.negate()),O&&(C=C.negate()),C=new d(n.mul(C.px,D.beta),C.py,C.pz),N.add(C)}multiply(b){const{endo:D,n:E}=t;xe("scalar",b,K,E);let y,A;if(D){const{k1neg:I,k1:O,k2neg:x,k2:N}=D.splitScalar(b);let{p:C,f:j}=this.wNAF(O),{p:R,f:$}=this.wNAF(N);C=h.constTimeNegate(I,C),R=h.constTimeNegate(x,R),R=new d(n.mul(R.px,D.beta),R.py,R.pz),y=C.add(R),A=j.add($)}else{const{p:I,f:O}=this.wNAF(b);y=I,A=O}return d.normalizeZ([y,A])[0]}multiplyAndAddUnsafe(b,D,E){const y=d.BASE,A=(O,x)=>x===De||x===K||!O.equals(y)?O.multiplyUnsafe(x):O.multiply(x),I=A(this,D).add(A(b,E));return I.is0()?void 0:I}toAffine(b){return f(this,b)}isTorsionFree(){const{h:b,isTorsionFree:D}=t;if(b===K)return!0;if(D)return D(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:D}=t;return b===K?this:D?D(d,this):this.multiplyUnsafe(t.h)}toRawBytes(b=!0){return vt("isCompressed",b),this.assertValidity(),o(d,this,b)}toHex(b=!0){return vt("isCompressed",b),At(this.toRawBytes(b))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const w=t.nBitLength,h=hd(d,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function Ed(e){const t=ts(e);return at(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Dd(e){const t=Ed(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(T){return Q(T,r)}function a(T){return wr(T,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:l}=md({...t,toBytes(T,v,m){const S=v.toAffine(),B=n.toBytes(S.x),_=de;return vt("isCompressed",m),m?_(Uint8Array.from([v.hasEvenY()?2:3]),B):_(Uint8Array.from([4]),B,n.toBytes(S.y))},fromBytes(T){const v=T.length,m=T[0],S=T.subarray(1);if(v===o&&(m===2||m===3)){const B=_e(S);if(!xt(B,K,n.ORDER))throw new Error("Point is not on curve");const _=f(B);let U;try{U=n.sqrt(_)}catch(L){const z=L instanceof Error?": "+L.message:"";throw new Error("Point is not on curve"+z)}const F=(U&K)===K;return(m&1)===1!==F&&(U=n.neg(U)),{x:B,y:U}}else if(v===i&&m===4){const B=n.fromBytes(S.subarray(0,n.BYTES)),_=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:B,y:_}}else{const B=o,_=i;throw new Error("invalid Point, expected length of "+B+", or uncompressed "+_+", got "+v)}}}),d=T=>At(Ve(T,t.nByteLength));function w(T){const v=r>>K;return T>v}function h(T){return w(T)?s(-T):T}const p=(T,v,m)=>_e(T.slice(v,m));class b{constructor(v,m,S){this.r=v,this.s=m,this.recovery=S,this.assertValidity()}static fromCompact(v){const m=t.nByteLength;return v=ne("compactSignature",v,m*2),new b(p(v,0,m),p(v,m,2*m))}static fromDER(v){const{r:m,s:S}=Ue.toSig(ne("DER",v));return new b(m,S)}assertValidity(){xe("r",this.r,K,r),xe("s",this.s,K,r)}addRecoveryBit(v){return new b(this.r,this.s,v)}recoverPublicKey(v){const{r:m,s:S,recovery:B}=this,_=O(ne("msgHash",v));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const U=B===2||B===3?m+t.n:m;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const F=(B&1)===0?"02":"03",P=c.fromHex(F+d(U)),L=a(U),z=s(-_*L),V=s(S*L),q=c.BASE.multiplyAndAddUnsafe(P,z,V);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return _t(this.toDERHex())}toDERHex(){return Ue.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _t(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const D={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=Xi(t.n);return fd(t.randomBytes(T),t.n)},precompute(T=8,v=c.BASE){return v._setWindowSize(T),v.multiply(BigInt(3)),v}};function E(T,v=!0){return c.fromPrivateKey(T).toRawBytes(v)}function y(T){const v=st(T),m=typeof T=="string",S=(v||m)&&T.length;return v?S===o||S===i:m?S===2*o||S===2*i:T instanceof c}function A(T,v,m=!0){if(y(T))throw new Error("first arg must be private key");if(!y(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(u(T)).toRawBytes(m)}const I=t.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");const v=_e(T),m=T.length*8-t.nBitLength;return m>0?v>>BigInt(m):v},O=t.bits2int_modN||function(T){return s(I(T))},x=cr(t.nBitLength);function N(T){return xe("num < 2^"+t.nBitLength,T,De,x),Ve(T,t.nByteLength)}function C(T,v,m=j){if(["recovered","canonical"].some(G=>G in m))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:B}=t;let{lowS:_,prehash:U,extraEntropy:F}=m;_==null&&(_=!0),T=ne("msgHash",T),ns(m),U&&(T=ne("prehashed msgHash",S(T)));const P=O(T),L=u(v),z=[N(L),N(P)];if(F!=null&&F!==!1){const G=F===!0?B(n.BYTES):F;z.push(ne("extraEntropy",G))}const V=de(...z),q=P;function ee(G){const Y=I(G);if(!l(Y))return;const me=a(Y),pe=c.BASE.multiply(Y).toAffine(),Ee=s(pe.x);if(Ee===De)return;const Je=s(me*s(q+Ee*L));if(Je===De)return;let Pe=(pe.x===Ee?0:2)|Number(pe.y&K),Tn=Je;return _&&w(Je)&&(Tn=h(Je),Pe^=1),new b(Ee,Tn,Pe)}return{seed:V,k2sig:ee}}const j={lowS:t.lowS,prehash:!1},R={lowS:t.lowS,prehash:!1};function $(T,v,m=j){const{seed:S,k2sig:B}=C(T,v,m),_=t;return Fi(_.hash.outputLen,_.nByteLength,_.hmac)(S,B)}c.BASE._setWindowSize(8);function M(T,v,m,S=R){const B=T;v=ne("msgHash",v),m=ne("publicKey",m);const{lowS:_,prehash:U,format:F}=S;if(ns(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&F!=="compact"&&F!=="der")throw new Error("format must be compact or der");const P=typeof B=="string"||st(B),L=!P&&!F&&typeof B=="object"&&B!==null&&typeof B.r=="bigint"&&typeof B.s=="bigint";if(!P&&!L)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,V;try{if(L&&(z=new b(B.r,B.s)),P){try{F!=="compact"&&(z=b.fromDER(B))}catch(Pe){if(!(Pe instanceof Ue.Err))throw Pe}!z&&F!=="der"&&(z=b.fromCompact(B))}V=c.fromHex(m)}catch{return!1}if(!z||_&&z.hasHighS())return!1;U&&(v=t.hash(v));const{r:q,s:ee}=z,G=O(v),Y=a(ee),me=s(G*Y),pe=s(q*Y),Ee=c.BASE.multiplyAndAddUnsafe(V,me,pe)?.toAffine();return Ee?s(Ee.x)===q:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:A,sign:$,verify:M,ProjectivePoint:c,Signature:b,utils:D}}function vd(e,t){const n=e.ORDER;let r=De;for(let h=n-K;h%He===De;h/=He)r+=K;const o=r,i=He<<o-K-K,s=i*He,a=(n-K)/s,c=(a-K)/He,u=s-K,f=i,l=e.pow(t,a),d=e.pow(t,(a+K)/He);let w=(h,p)=>{let b=l,D=e.pow(p,u),E=e.sqr(D);E=e.mul(E,p);let y=e.mul(h,E);y=e.pow(y,c),y=e.mul(y,D),D=e.mul(y,p),E=e.mul(y,h);let A=e.mul(E,D);y=e.pow(A,f);let I=e.eql(y,e.ONE);D=e.mul(E,d),y=e.mul(A,b),E=e.cmov(D,E,I),A=e.cmov(y,A,I);for(let O=o;O>K;O--){let x=O-He;x=He<<x-K;let N=e.pow(A,x);const C=e.eql(N,e.ONE);D=e.mul(E,b),b=e.mul(b,b),N=e.mul(A,b),E=e.cmov(D,E,C),A=e.cmov(N,A,C)}return{isValid:I,value:E}};if(e.ORDER%rs===bn){const h=(e.ORDER-bn)/rs,p=e.sqrt(e.neg(t));w=(b,D)=>{let E=e.sqr(D);const y=e.mul(b,D);E=e.mul(E,y);let A=e.pow(E,h);A=e.mul(A,y);const I=e.mul(A,p),O=e.mul(e.sqr(A),D),x=e.eql(O,b);let N=e.cmov(I,A,x);return{isValid:x,value:N}}}return w}function Ad(e,t){if(Yi(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=vd(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,s,a,c,u,f,l;o=e.sqr(r),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(s),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,s),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),f=e.mul(o,s);const{isValid:d,value:w}=n(i,u);l=e.mul(o,r),l=e.mul(l,w),f=e.cmov(f,s,d),l=e.cmov(l,w,d);const h=e.isOdd(r)===e.isOdd(l);return l=e.cmov(e.neg(l),l,h),f=e.div(f,a),{x:f,y:l}}}function Sd(e){return{hash:e,hmac:(t,...n)=>dn(e,t,Ff(...n)),randomBytes:ot}}function os(e,t){const n=r=>Dd({...e,...Sd(r)});return{...n(t),create:n}}const _d=_e;function qe(e,t){if(kt(e),kt(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function xd(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function kt(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Bd(e,t,n,r){Se(e),Se(t),kt(n),t.length>255&&(t=r(de(fn("H2C-OVERSIZE-DST-"),t)));const{outputLen:o,blockLen:i}=r,s=Math.ceil(n/o);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=de(t,qe(t.length,1)),c=qe(0,i),u=qe(n,2),f=new Array(s),l=r(de(c,e,u,qe(0,1),a));f[0]=r(de(l,qe(1,1),a));for(let w=1;w<=s;w++){const h=[xd(l,f[w-1]),qe(w+1,1),a];f[w]=r(de(...h))}return de(...f).slice(0,n)}function Od(e,t,n,r,o){if(Se(e),Se(t),kt(n),t.length>255){const i=Math.ceil(2*r/8);t=o.create({dkLen:i}).update(fn("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:n}).update(e).update(qe(n,2)).update(t).update(qe(t.length,1)).digest()}function is(e,t,n){at(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:o,m:i,hash:s,expand:a,DST:c}=n;Se(e),kt(t);const u=typeof c=="string"?fn(c):c,f=r.toString(2).length,l=Math.ceil((f+o)/8),d=t*i*l;let w;if(a==="xmd")w=Bd(e,u,d,s);else if(a==="xof")w=Od(e,u,d,o,s);else if(a==="_internal_pass")w=e;else throw new Error('expand must be "xmd" or "xof"');const h=new Array(t);for(let p=0;p<t;p++){const b=new Array(i);for(let D=0;D<i;D++){const E=l*(D+p*i),y=w.subarray(E,E+l);b[D]=Q(_d(y),r)}h[p]=b}return h}function Cd(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,o)=>{const[i,s,a,c]=n.map(u=>u.reduce((f,l)=>e.add(e.mul(f,r),l)));return r=e.div(i,s),o=e.mul(o,e.div(a,c)),{x:r,y:o}}}function Nd(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){const i=is(r,2,{...n,DST:n.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,o){const i=is(r,1,{...n,DST:n.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const i of r)if(typeof i!="bigint")throw new Error("mapToCurve: expected array of bigints");const o=e.fromAffine(t(r)).clearCofactor();return o.assertValidity(),o}}}const Vt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),gn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ht=BigInt(1),pn=BigInt(2),ss=(e,t)=>(e+t/pn)/t;function as(e){const t=Vt,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=Z(f,n,t)*f%t,d=Z(l,n,t)*f%t,w=Z(d,pn,t)*u%t,h=Z(w,o,t)*w%t,p=Z(h,i,t)*h%t,b=Z(p,a,t)*p%t,D=Z(b,c,t)*b%t,E=Z(D,a,t)*p%t,y=Z(E,n,t)*f%t,A=Z(y,s,t)*h%t,I=Z(A,r,t)*u%t,O=Z(I,pn,t);if(!Ke.eql(Ke.sqr(O),e))throw new Error("Cannot find square root");return O}const Ke=yr(Vt,void 0,void 0,{sqrt:as}),qt=os({a:BigInt(0),b:BigInt(7),Fp:Ke,n:gn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=gn,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ht*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=ss(i*e,t),c=ss(-r*e,t);let u=Q(e-a*n-c*o,t),f=Q(-a*r-c*i,t);const l=u>s,d=f>s;if(l&&(u=t-u),d&&(f=t-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:d,k2:f}}}},Ne),cs=BigInt(0),us={};function wn(e,...t){let n=us[e];if(n===void 0){const r=Ne(Uint8Array.from(e,o=>o.charCodeAt(0)));n=de(r,r),us[e]=n}return Ne(de(n,...t))}const Ar=e=>e.toRawBytes(!0).slice(1),Sr=e=>Ve(e,32),_r=e=>Q(e,Vt),Kt=e=>Q(e,gn),xr=qt.ProjectivePoint,Id=(e,t,n)=>xr.BASE.multiplyAndAddUnsafe(e,t,n);function Br(e){let t=qt.utils.normPrivateKeyToScalar(e),n=xr.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Kt(-t),bytes:Ar(n)}}function fs(e){xe("x",e,Ht,Vt);const t=_r(e*e),n=_r(t*e+BigInt(7));let r=as(n);r%pn!==cs&&(r=_r(-r));const o=new xr(e,r,Ht);return o.assertValidity(),o}const Bt=_e;function ls(...e){return Kt(Bt(wn("BIP0340/challenge",...e)))}function Td(e){return Br(e).bytes}function Ud(e,t,n=ot(32)){const r=ne("message",e),{bytes:o,scalar:i}=Br(t),s=ne("auxRand",n,32),a=Sr(i^Bt(wn("BIP0340/aux",s))),c=wn("BIP0340/nonce",a,o,r),u=Kt(Bt(c));if(u===cs)throw new Error("sign failed: k is zero");const{bytes:f,scalar:l}=Br(u),d=ls(f,o,r),w=new Uint8Array(64);if(w.set(f,0),w.set(Sr(Kt(l+d*i)),32),!ds(w,r,o))throw new Error("sign: Invalid signature produced");return w}function ds(e,t,n){const r=ne("signature",e,64),o=ne("message",t),i=ne("publicKey",n,32);try{const s=fs(Bt(i)),a=Bt(r.subarray(0,32));if(!xt(a,Ht,Vt))return!1;const c=Bt(r.subarray(32,64));if(!xt(c,Ht,gn))return!1;const u=ls(Sr(a),Ar(s),o),f=Id(s,c,Kt(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const Rd={getPublicKey:Td,sign:Ud,verify:ds,utils:{randomPrivateKey:qt.utils.randomPrivateKey,lift_x:fs,pointToBytes:Ar,numberToBytesBE:Ve,bytesToNumberBE:_e,taggedHash:wn,mod:Q}},Fd=Cd(Ke,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),$d=Ad(Ke,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ke.create(BigInt("-11"))}),hs=Nd(qt.ProjectivePoint,e=>{const{x:t,y:n}=$d(Ke.create(e[0]));return Fd(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ke.ORDER,m:1,k:128,expand:"xmd",hash:Ne});var Pd=Object.freeze({__proto__:null,secp256k1:qt,schnorr:Rd,hashToCurve:hs.hashToCurve,encodeToCurve:hs.encodeToCurve});function jd(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let u=0;u<t.length;u++)t[u]=255;for(let u=0;u<e.length;u++){const f=e.charAt(u),l=f.charCodeAt(0);if(t[l]!==255)throw new TypeError(f+" is ambiguous");t[l]=u}const n=e.length,r=e.charAt(0),o=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function s(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let f=0,l=0,d=0;const w=u.length;for(;d!==w&&u[d]===0;)d++,f++;const h=(w-d)*i+1>>>0,p=new Uint8Array(h);for(;d!==w;){let E=u[d],y=0;for(let A=h-1;(E!==0||y<l)&&A!==-1;A--,y++)E+=256*p[A]>>>0,p[A]=E%n>>>0,E=E/n>>>0;if(E!==0)throw new Error("Non-zero carry");l=y,d++}let b=h-l;for(;b!==h&&p[b]===0;)b++;let D=r.repeat(f);for(;b<h;++b)D+=e.charAt(p[b]);return D}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let f=0,l=0,d=0;for(;u[f]===r;)l++,f++;const w=(u.length-f)*o+1>>>0,h=new Uint8Array(w);for(;f<u.length;){const E=u.charCodeAt(f);if(E>255)return;let y=t[E];if(y===255)return;let A=0;for(let I=w-1;(y!==0||A<d)&&I!==-1;I--,A++)y+=n*h[I]>>>0,h[I]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");d=A,f++}let p=w-d;for(;p!==w&&h[p]===0;)p++;const b=new Uint8Array(l+(w-p));let D=l;for(;p!==w;)b[D++]=h[p++];return b}function c(u){const f=a(u);if(f)return f;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var Ld="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Md=jd(Ld);const zd="https://rpc.walletconnect.org/v1";function Or(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(tr(n)).toString("hex")}async function bs(e,t,n,r,o,i){switch(n.t){case"eip191":return await gs(e,t,n.s);case"eip1271":return await ps(e,t,n.s,r,o,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function gs(e,t,n){return(await sl({hash:Or(t),signature:n})).toLowerCase()===e.toLowerCase()}async function ps(e,t,n,r,o,i){const s=Un(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",f=n.substring(2),l=Or(t).substring(2),d=a+l+c+u+f,w=await fetch(`${i||zd}/?chainId=${r}&projectId=${o}`,{method:"POST",body:JSON.stringify({id:kd(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:d},"latest"]})}),{result:h}=await w.json();return h?h.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function kd(){return Date.now()+Math.floor(Math.random()*1e3)}function Vd(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=n[0];if(r===0)throw new Error("No signatures found");const o=1+r*64;if(n.length<o)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(e,"base64").slice(1,65);return Md.encode(i)}var Hd=Object.defineProperty,qd=Object.defineProperties,Kd=Object.getOwnPropertyDescriptors,ws=Object.getOwnPropertySymbols,Wd=Object.prototype.hasOwnProperty,Yd=Object.prototype.propertyIsEnumerable,ys=(e,t,n)=>t in e?Hd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cr=(e,t)=>{for(var n in t||(t={}))Wd.call(t,n)&&ys(e,n,t[n]);if(ws)for(var n of ws(t))Yd.call(t,n)&&ys(e,n,t[n]);return e},ms=(e,t)=>qd(e,Kd(t));const Gd="did:pkh:",yn=e=>e?.split(":"),Es=e=>{const t=e&&yn(e);if(t)return e.includes(Gd)?t[3]:t[1]},Ds=e=>{const t=e&&yn(e);if(t)return t[2]+":"+t[3]},Nr=e=>{const t=e&&yn(e);if(t)return t.pop()};async function Zd(e){const{cacao:t,projectId:n}=e,{s:r,p:o}=t,i=vs(o,o.iss),s=Nr(o.iss);return await bs(s,i,r,Ds(o.iss),n)}const vs=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=Nr(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=e.statement||void 0;const i=`URI: ${e.aud||e.uri}`,s=`Version: ${e.version}`,a=`Chain ID: ${Es(t)}`,c=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,f=e.exp?`Expiration Time: ${e.exp}`:void 0,l=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,w=e.resources?`Resources:${e.resources.map(p=>`
- ${p}`).join("")}`:void 0,h=En(e.resources);if(h){const p=We(h);o=Ur(o,p)}return[n,r,"",o,"",i,s,a,c,u,f,l,d,w].filter(p=>p!=null).join(`
`)};function Xd(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function Jd(e){var t;const{authPayload:n,chains:r,methods:o}=e,i=n.statement||"";if(!(r!=null&&r.length))return n;const s=n.chains,a=Gn(s,r);if(!(a!=null&&a.length))throw new Error("No supported chains");const c=As(n.resources);if(!c)return n;Be(c);const u=Ss(c,"eip155");let f=n?.resources||[];if(u!=null&&u.length){const l=_s(u),d=Gn(l,o);if(!(d!=null&&d.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(l)}, supported: ${JSON.stringify(o)}`);const w=Ir("request",d,{chains:a}),h=Cs(c,"eip155",w);f=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],f.push(mn(h))}return ms(Cr({},n),{statement:Is(i,En(f)),chains:a,resources:n!=null&&n.resources||f.length>0?f:void 0})}function As(e){const t=En(e);if(t&&Tr(t))return We(t)}function Qd(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function Ss(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function eh(e){return e?.map(t=>Object.keys(t))||[]}function _s(e){return e?.map(t=>{var n;return(n=t.split("/"))==null?void 0:n[1]})||[]}function xs(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function Bs(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function Be(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(o=>{const i=r[o];if(!Array.isArray(i))throw new Error(`Ability limits ${o} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${o} is empty array, must be an array with objects`);i.forEach(s=>{if(typeof s!="object")throw new Error(`Ability limits (${o}) must be an array of objects, found: ${s}`)})})})}function Os(e,t,n,r={}){return n?.sort((o,i)=>o.localeCompare(i)),{att:{[e]:Ir(t,n,r)}}}function Cs(e,t,n){var r;e.att[t]=Cr({},n);const o=(r=Object.keys(e.att))==null?void 0:r.sort((s,a)=>s.localeCompare(a)),i={att:{}};return o.reduce((s,a)=>(s.att[a]=e.att[a],s),i)}function Ir(e,t,n={}){t=t?.sort((o,i)=>o.localeCompare(i));const r=t.map(o=>({[`${e}/${o}`]:[n]}));return Object.assign({},...r)}function mn(e){return Be(e),`urn:recap:${xs(e).replace(/=/g,"")}`}function We(e){const t=Bs(e.replace("urn:recap:",""));return Be(t),t}function th(e,t,n){const r=Os(e,t,n);return mn(r)}function Tr(e){return e&&e.includes("urn:recap:")}function nh(e,t){const n=We(e),r=We(t),o=Ns(n,r);return mn(o)}function Ns(e,t){Be(e),Be(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((o,i)=>o.localeCompare(i)),r={att:{}};return n.forEach(o=>{var i,s;Object.keys(((i=e.att)==null?void 0:i[o])||{}).concat(Object.keys(((s=t.att)==null?void 0:s[o])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[o]=ms(Cr({},r.att[o]),{[a]:((c=e.att[o])==null?void 0:c[a])||((u=t.att[o])==null?void 0:u[a])})})}),r}function Ur(e="",t){Be(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let o=0;Object.keys(t.att).forEach(a=>{const c=Object.keys(t.att[a]).map(l=>({ability:l.split("/")[0],action:l.split("/")[1]}));c.sort((l,d)=>l.action.localeCompare(d.action));const u={};c.forEach(l=>{u[l.ability]||(u[l.ability]=[]),u[l.ability].push(l.action)});const f=Object.keys(u).map(l=>(o++,`(${o}) '${l}': '${u[l].join("', '")}' for '${a}'.`));r.push(f.join(", ").replace(".,","."))});const i=r.join(" "),s=`${n}${i}`;return`${e?e+" ":""}${s}`}function rh(e){var t;const n=We(e);Be(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(o=>o.split("/")[1]):[]}function oh(e){const t=We(e);Be(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(o=>{var i;(i=o?.[0])!=null&&i.chains&&n.push(o[0].chains)})}),[...new Set(n.flat())]}function Is(e,t){if(!t)return e;const n=We(t);return Be(n),Ur(e,n)}function En(e){if(!e)return;const t=e?.[e.length-1];return Tr(t)?t:void 0}function Rr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ts(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function he(e,...t){if(!Ts(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Us(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ih(e,t){he(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Rs(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}const Ye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),sh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function ah(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Fr(e){if(typeof e=="string")e=ah(e);else if(Ts(e))e=$r(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function ch(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function uh(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const fh=(e,t)=>{function n(r,...o){if(he(r),e.nonceLength!==void 0){const f=o[0];if(!f)throw new Error("nonce / iv required");e.varSizeNonce?he(f):he(f,e.nonceLength)}const i=e.tagLength;i&&o[1]!==void 0&&he(o[1]);const s=t(r,...o),a=(f,l)=>{if(l!==void 0){if(f!==2)throw new Error("cipher output not supported");he(l)}};let c=!1;return{encrypt(f,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,he(f),a(s.encrypt.length,l),s.encrypt(f,l)},decrypt(f,l){if(he(f),i&&f.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(s.decrypt.length,l),s.decrypt(f,l)}}}return Object.assign(n,e),n};function Fs(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!lh(t))throw new Error("invalid output, must be aligned");return t}function $s(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}function lh(e){return e.byteOffset%4===0}function $r(e){return Uint8Array.from(e)}function Ot(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Ps=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),dh=Ps("expand 16-byte k"),hh=Ps("expand 32-byte k"),bh=Ye(dh),gh=Ye(hh);function H(e,t){return e<<t|e>>>32-t}function Pr(e){return e.byteOffset%4===0}const Dn=64,ph=16,js=2**32-1,Ls=new Uint32Array;function wh(e,t,n,r,o,i,s,a){const c=o.length,u=new Uint8Array(Dn),f=Ye(u),l=Pr(o)&&Pr(i),d=l?Ye(o):Ls,w=l?Ye(i):Ls;for(let h=0;h<c;s++){if(e(t,n,r,f,s,a),s>=js)throw new Error("arx: counter overflow");const p=Math.min(Dn,c-h);if(l&&p===Dn){const b=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let D=0,E;D<ph;D++)E=b+D,w[E]=d[E]^f[D];h+=Dn;continue}for(let b=0,D;b<p;b++)D=h+b,i[D]=o[D]^u[b];h+=p}}function yh(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=ch({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Rr(o),Rr(s),Rs(i),Rs(n),(a,c,u,f,l=0)=>{he(a),he(c),he(u);const d=u.length;if(f===void 0&&(f=new Uint8Array(d)),he(f),Rr(l),l<0||l>=js)throw new Error("arx: counter overflow");if(f.length<d)throw new Error(`arx: output (${f.length}) is shorter than data (${d})`);const w=[];let h=a.length,p,b;if(h===32)w.push(p=$r(a)),b=gh;else if(h===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),b=bh,w.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${h}`);Pr(c)||w.push(c=$r(c));const D=Ye(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,D,Ye(c.subarray(0,16)),D),c=c.subarray(16)}const E=16-o;if(E!==c.length)throw new Error(`arx: nonce must be ${E} or 16 bytes`);if(E!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,w.push(c)}const y=Ye(c);return wh(e,b,D,y,u,f,l,s),Ot(...w),f}}const ie=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class mh{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Fr(t),he(t,32);const n=ie(t,0),r=ie(t,2),o=ie(t,4),i=ie(t,6),s=ie(t,8),a=ie(t,10),c=ie(t,12),u=ie(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let f=0;f<8;f++)this.pad[f]=ie(t,16+2*f)}process(t,n,r=!1){const o=r?0:2048,{h:i,r:s}=this,a=s[0],c=s[1],u=s[2],f=s[3],l=s[4],d=s[5],w=s[6],h=s[7],p=s[8],b=s[9],D=ie(t,n+0),E=ie(t,n+2),y=ie(t,n+4),A=ie(t,n+6),I=ie(t,n+8),O=ie(t,n+10),x=ie(t,n+12),N=ie(t,n+14);let C=i[0]+(D&8191),j=i[1]+((D>>>13|E<<3)&8191),R=i[2]+((E>>>10|y<<6)&8191),$=i[3]+((y>>>7|A<<9)&8191),M=i[4]+((A>>>4|I<<12)&8191),T=i[5]+(I>>>1&8191),v=i[6]+((I>>>14|O<<2)&8191),m=i[7]+((O>>>11|x<<5)&8191),S=i[8]+((x>>>8|N<<8)&8191),B=i[9]+(N>>>5|o),_=0,U=_+C*a+j*(5*b)+R*(5*p)+$*(5*h)+M*(5*w);_=U>>>13,U&=8191,U+=T*(5*d)+v*(5*l)+m*(5*f)+S*(5*u)+B*(5*c),_+=U>>>13,U&=8191;let F=_+C*c+j*a+R*(5*b)+$*(5*p)+M*(5*h);_=F>>>13,F&=8191,F+=T*(5*w)+v*(5*d)+m*(5*l)+S*(5*f)+B*(5*u),_+=F>>>13,F&=8191;let P=_+C*u+j*c+R*a+$*(5*b)+M*(5*p);_=P>>>13,P&=8191,P+=T*(5*h)+v*(5*w)+m*(5*d)+S*(5*l)+B*(5*f),_+=P>>>13,P&=8191;let L=_+C*f+j*u+R*c+$*a+M*(5*b);_=L>>>13,L&=8191,L+=T*(5*p)+v*(5*h)+m*(5*w)+S*(5*d)+B*(5*l),_+=L>>>13,L&=8191;let z=_+C*l+j*f+R*u+$*c+M*a;_=z>>>13,z&=8191,z+=T*(5*b)+v*(5*p)+m*(5*h)+S*(5*w)+B*(5*d),_+=z>>>13,z&=8191;let V=_+C*d+j*l+R*f+$*u+M*c;_=V>>>13,V&=8191,V+=T*a+v*(5*b)+m*(5*p)+S*(5*h)+B*(5*w),_+=V>>>13,V&=8191;let q=_+C*w+j*d+R*l+$*f+M*u;_=q>>>13,q&=8191,q+=T*c+v*a+m*(5*b)+S*(5*p)+B*(5*h),_+=q>>>13,q&=8191;let ee=_+C*h+j*w+R*d+$*l+M*f;_=ee>>>13,ee&=8191,ee+=T*u+v*c+m*a+S*(5*b)+B*(5*p),_+=ee>>>13,ee&=8191;let G=_+C*p+j*h+R*w+$*d+M*l;_=G>>>13,G&=8191,G+=T*f+v*u+m*c+S*a+B*(5*b),_+=G>>>13,G&=8191;let Y=_+C*b+j*p+R*h+$*w+M*d;_=Y>>>13,Y&=8191,Y+=T*l+v*f+m*u+S*c+B*a,_+=Y>>>13,Y&=8191,_=(_<<2)+_|0,_=_+U|0,U=_&8191,_=_>>>13,F+=_,i[0]=U,i[1]=F,i[2]=P,i[3]=L,i[4]=z,i[5]=V,i[6]=q,i[7]=ee,i[8]=G,i[9]=Y}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=o,o=t[a]>>>13,t[a]&=8191;t[0]+=o*5,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+o,o=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(o^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)t[a]=t[a]&i|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let a=1;a<8;a++)s=(t[a]+n[a]|0)+(s>>>16)|0,t[a]=s&65535;Ot(r)}update(t){Us(this);const{buffer:n,blockLen:r}=this;t=Fr(t);const o=t.length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s===r){for(;r<=o-i;i+=r)this.process(t,i);continue}n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ot(this.h,this.r,this.buffer,this.pad)}digestInto(t){Us(this),ih(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=r[s]>>>0,t[i++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Eh(e){const t=(r,o)=>e(o).update(Fr(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Dh=Eh(e=>new mh(e));function vh(e,t,n,r,o,i=20){let s=e[0],a=e[1],c=e[2],u=e[3],f=t[0],l=t[1],d=t[2],w=t[3],h=t[4],p=t[5],b=t[6],D=t[7],E=o,y=n[0],A=n[1],I=n[2],O=s,x=a,N=c,C=u,j=f,R=l,$=d,M=w,T=h,v=p,m=b,S=D,B=E,_=y,U=A,F=I;for(let L=0;L<i;L+=2)O=O+j|0,B=H(B^O,16),T=T+B|0,j=H(j^T,12),O=O+j|0,B=H(B^O,8),T=T+B|0,j=H(j^T,7),x=x+R|0,_=H(_^x,16),v=v+_|0,R=H(R^v,12),x=x+R|0,_=H(_^x,8),v=v+_|0,R=H(R^v,7),N=N+$|0,U=H(U^N,16),m=m+U|0,$=H($^m,12),N=N+$|0,U=H(U^N,8),m=m+U|0,$=H($^m,7),C=C+M|0,F=H(F^C,16),S=S+F|0,M=H(M^S,12),C=C+M|0,F=H(F^C,8),S=S+F|0,M=H(M^S,7),O=O+R|0,F=H(F^O,16),m=m+F|0,R=H(R^m,12),O=O+R|0,F=H(F^O,8),m=m+F|0,R=H(R^m,7),x=x+$|0,B=H(B^x,16),S=S+B|0,$=H($^S,12),x=x+$|0,B=H(B^x,8),S=S+B|0,$=H($^S,7),N=N+M|0,_=H(_^N,16),T=T+_|0,M=H(M^T,12),N=N+M|0,_=H(_^N,8),T=T+_|0,M=H(M^T,7),C=C+j|0,U=H(U^C,16),v=v+U|0,j=H(j^v,12),C=C+j|0,U=H(U^C,8),v=v+U|0,j=H(j^v,7);let P=0;r[P++]=s+O|0,r[P++]=a+x|0,r[P++]=c+N|0,r[P++]=u+C|0,r[P++]=f+j|0,r[P++]=l+R|0,r[P++]=d+$|0,r[P++]=w+M|0,r[P++]=h+T|0,r[P++]=p+v|0,r[P++]=b+m|0,r[P++]=D+S|0,r[P++]=E+B|0,r[P++]=y+_|0,r[P++]=A+U|0,r[P++]=I+F|0}const Ah=yh(vh,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Sh=new Uint8Array(16),Ms=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Sh.subarray(n))},_h=new Uint8Array(32);function zs(e,t,n,r,o){const i=e(t,n,_h),s=Dh.create(i);o&&Ms(s,o),Ms(s,r);const a=new Uint8Array(16),c=sh(a);$s(c,0,BigInt(o?o.length:0),!0),$s(c,8,BigInt(r.length),!0),s.update(a);const u=s.digest();return Ot(i,a),u}const ks=fh({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,n,r)=>({encrypt(i,s){const a=i.length;s=Fs(a+16,s,!1),s.set(i);const c=s.subarray(0,-16);e(t,n,c,c,1);const u=zs(e,t,n,c,r);return s.set(u,a),Ot(u),s},decrypt(i,s){s=Fs(i.length-16,s,!1);const a=i.subarray(0,-16),c=i.subarray(-16),u=zs(e,t,n,a,r);if(!uh(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),e(t,n,s,s,1),Ot(u),s}}))(Ah));function xh(e,t,n){return Xn(e),n===void 0&&(n=new Uint8Array(e.outputLen)),dn(e,mt(n),mt(t))}const jr=new Uint8Array([0]),Vs=new Uint8Array;function Bh(e,t,n,r=32){if(Xn(e),Pt(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=Vs);const i=new Uint8Array(o*e.outputLen),s=dn.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let u=0;u<o;u++)jr[0]=u+1,a.update(u===0?Vs:c).update(n).update(jr).digestInto(c),i.set(c,e.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),jr.fill(0),i.slice(0,r)}const Oh=(e,t,n,r,o)=>Bh(e,xh(e,t,n),r,o);BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ct=BigInt(0),Lr=BigInt(1);function Ch(e){return at(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}function Nh(e){const t=Ch(e),{P:n}=t,r=E=>Q(E,n),o=t.montgomeryBits,i=Math.ceil(o/8),s=t.nByteLength,a=t.adjustScalarBytes||(E=>E),c=t.powPminus2||(E=>Wi(E,n-BigInt(2),n));function u(E,y,A){const I=r(E*(y-A));return y=r(y-I),A=r(A+I),[y,A]}const f=(t.a-BigInt(2))/BigInt(4);function l(E,y){xe("u",E,Ct,n),xe("scalar",y,Ct,n);const A=y,I=E;let O=Lr,x=Ct,N=E,C=Lr,j=Ct,R;for(let M=BigInt(o-1);M>=Ct;M--){const T=A>>M&Lr;j^=T,R=u(j,O,N),O=R[0],N=R[1],R=u(j,x,C),x=R[0],C=R[1],j=T;const v=O+x,m=r(v*v),S=O-x,B=r(S*S),_=m-B,U=N+C,F=N-C,P=r(F*v),L=r(U*S),z=P+L,V=P-L;N=r(z*z),C=r(I*r(V*V)),O=r(m*B),x=r(_*(m+r(f*_)))}R=u(j,O,N),O=R[0],N=R[1],R=u(j,x,C),x=R[0],C=R[1];const $=c(x);return r(O*$)}function d(E){return un(r(E),i)}function w(E){const y=ne("u coordinate",E,i);return s===32&&(y[31]&=127),zt(y)}function h(E){const y=ne("scalar",E),A=y.length;if(A!==i&&A!==s){let I=""+i+" or "+s;throw new Error("invalid scalar, expected "+I+" bytes, got "+A)}return zt(a(y))}function p(E,y){const A=w(y),I=h(E),O=l(A,I);if(O===Ct)throw new Error("invalid private or public key received");return d(O)}const b=d(t.Gu);function D(E){return p(E,b)}return{scalarMult:p,scalarMultBase:D,getSharedSecret:(E,y)=>p(E,y),getPublicKey:E=>D(E),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:b}}const Mr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Ih=BigInt(1),Hs=BigInt(2),Th=BigInt(3),Uh=BigInt(5);BigInt(8);function Rh(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=Mr,a=e*e%i*e%i,c=Z(a,Hs,i)*a%i,u=Z(c,Ih,i)*e%i,f=Z(u,Uh,i)*u%i,l=Z(f,t,i)*f%i,d=Z(l,n,i)*l%i,w=Z(d,r,i)*d%i,h=Z(w,o,i)*w%i,p=Z(h,o,i)*w%i,b=Z(p,t,i)*f%i;return{pow_p_5_8:Z(b,Hs,i)*e%i,b2:a}}function Fh(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const zr=Nh({P:Mr,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=Mr,{pow_p_5_8:n,b2:r}=Rh(e);return Q(Z(n,Th,t)*r,t)},adjustScalarBytes:Fh,randomBytes:ot}),qs=yr(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),$h=qs.create(BigInt("-3")),Ph=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),jh=os({a:$h,b:Ph,Fp:qs,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Ne),Lh=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Mh(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Lh(e)}catch{return e}}function zh(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ks(e,...t){if(!zh(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ws(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function kh(e,t){Ks(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Nt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Vh(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Ys(e){return typeof e=="string"&&(e=Vh(e)),Ks(e),e}class Hh{clone(){return this._cloneInto()}}function qh(e){const t=r=>e().update(Ys(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Kh(e=32){if(Nt&&typeof Nt.getRandomValues=="function")return Nt.getRandomValues(new Uint8Array(e));if(Nt&&typeof Nt.randomBytes=="function")return Nt.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function Wh(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}class Yh extends Hh{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=kr(this.buffer)}update(t){Ws(this);const{view:n,buffer:r,blockLen:o}=this;t=Ys(t);const i=t.length;for(let s=0;s<i;){const a=Math.min(o-this.pos,i-s);if(a===o){const c=kr(t);for(;o<=i-s;s+=o)this.process(c,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ws(this),kh(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;Wh(r,o-8,BigInt(this.length*8),i),this.process(r,0);const a=kr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,f[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}}const vn=BigInt(2**32-1),Vr=BigInt(32);function Gs(e,t=!1){return t?{h:Number(e&vn),l:Number(e>>Vr&vn)}:{h:Number(e>>Vr&vn)|0,l:Number(e&vn)|0}}function Gh(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=Gs(e[o],t);[n[o],r[o]]=[i,s]}return[n,r]}const Zh=(e,t)=>BigInt(e>>>0)<<Vr|BigInt(t>>>0),Xh=(e,t,n)=>e>>>n,Jh=(e,t,n)=>e<<32-n|t>>>n,Qh=(e,t,n)=>e>>>n|t<<32-n,e0=(e,t,n)=>e<<32-n|t>>>n,t0=(e,t,n)=>e<<64-n|t>>>n-32,n0=(e,t,n)=>e>>>n-32|t<<64-n,r0=(e,t)=>t,o0=(e,t)=>e,i0=(e,t,n)=>e<<n|t>>>32-n,s0=(e,t,n)=>t<<n|e>>>32-n,a0=(e,t,n)=>t<<n-32|e>>>64-n,c0=(e,t,n)=>e<<n-32|t>>>64-n;function u0(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const f0=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),l0=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,d0=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),h0=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,b0=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0),g0=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,k={fromBig:Gs,split:Gh,toBig:Zh,shrSH:Xh,shrSL:Jh,rotrSH:Qh,rotrSL:e0,rotrBH:t0,rotrBL:n0,rotr32H:r0,rotr32L:o0,rotlSH:i0,rotlSL:s0,rotlBH:a0,rotlBL:c0,add:u0,add3L:f0,add3H:l0,add4L:d0,add4H:h0,add5H:g0,add5L:b0},[p0,w0]=k.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ge=new Uint32Array(80),Ze=new Uint32Array(80);class y0 extends Yh{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:u,El:f,Fh:l,Fl:d,Gh:w,Gl:h,Hh:p,Hl:b}=this;return[t,n,r,o,i,s,a,c,u,f,l,d,w,h,p,b]}set(t,n,r,o,i,s,a,c,u,f,l,d,w,h,p,b){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=d|0,this.Gh=w|0,this.Gl=h|0,this.Hh=p|0,this.Hl=b|0}process(t,n){for(let y=0;y<16;y++,n+=4)Ge[y]=t.getUint32(n),Ze[y]=t.getUint32(n+=4);for(let y=16;y<80;y++){const A=Ge[y-15]|0,I=Ze[y-15]|0,O=k.rotrSH(A,I,1)^k.rotrSH(A,I,8)^k.shrSH(A,I,7),x=k.rotrSL(A,I,1)^k.rotrSL(A,I,8)^k.shrSL(A,I,7),N=Ge[y-2]|0,C=Ze[y-2]|0,j=k.rotrSH(N,C,19)^k.rotrBH(N,C,61)^k.shrSH(N,C,6),R=k.rotrSL(N,C,19)^k.rotrBL(N,C,61)^k.shrSL(N,C,6),$=k.add4L(x,R,Ze[y-7],Ze[y-16]),M=k.add4H($,O,j,Ge[y-7],Ge[y-16]);Ge[y]=M|0,Ze[y]=$|0}let{Ah:r,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:u,Dl:f,Eh:l,El:d,Fh:w,Fl:h,Gh:p,Gl:b,Hh:D,Hl:E}=this;for(let y=0;y<80;y++){const A=k.rotrSH(l,d,14)^k.rotrSH(l,d,18)^k.rotrBH(l,d,41),I=k.rotrSL(l,d,14)^k.rotrSL(l,d,18)^k.rotrBL(l,d,41),O=l&w^~l&p,x=d&h^~d&b,N=k.add5L(E,I,x,w0[y],Ze[y]),C=k.add5H(N,D,A,O,p0[y],Ge[y]),j=N|0,R=k.rotrSH(r,o,28)^k.rotrBH(r,o,34)^k.rotrBH(r,o,39),$=k.rotrSL(r,o,28)^k.rotrBL(r,o,34)^k.rotrBL(r,o,39),M=r&i^r&a^i&a,T=o&s^o&c^s&c;D=p|0,E=b|0,p=w|0,b=h|0,w=l|0,h=d|0,{h:l,l:d}=k.add(u|0,f|0,C|0,j|0),u=a|0,f=c|0,a=i|0,c=s|0,i=r|0,s=o|0;const v=k.add3L(j,$,T);r=k.add3H(v,C,R,M),o=v|0}({h:r,l:o}=k.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:s}=k.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:a,l:c}=k.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=k.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:d}=k.add(this.Eh|0,this.El|0,l|0,d|0),{h:w,l:h}=k.add(this.Fh|0,this.Fl|0,w|0,h|0),{h:p,l:b}=k.add(this.Gh|0,this.Gl|0,p|0,b|0),{h:D,l:E}=k.add(this.Hh|0,this.Hl|0,D|0,E|0),this.set(r,o,i,s,a,c,u,f,l,d,w,h,p,b,D,E)}roundClean(){Ge.fill(0),Ze.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const m0=qh(()=>new y0);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hr=BigInt(0),Zs=BigInt(1),E0=BigInt(2);function qr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Kr(e){if(!qr(e))throw new Error("Uint8Array expected")}function Wr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const D0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Yr(e){Kr(e);let t="";for(let n=0;n<e.length;n++)t+=D0[e[n]];return t}function Xs(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Hr:BigInt("0x"+e)}const Re={_0:48,_9:57,A:65,F:70,a:97,f:102};function Js(e){if(e>=Re._0&&e<=Re._9)return e-Re._0;if(e>=Re.A&&e<=Re.F)return e-(Re.A-10);if(e>=Re.a&&e<=Re.f)return e-(Re.a-10)}function Qs(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=Js(e.charCodeAt(i)),a=Js(e.charCodeAt(i+1));if(s===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=s*16+a}return r}function v0(e){return Xs(Yr(e))}function An(e){return Kr(e),Xs(Yr(Uint8Array.from(e).reverse()))}function ea(e,t){return Qs(e.toString(16).padStart(t*2,"0"))}function Gr(e,t){return ea(e,t).reverse()}function Fe(e,t,n){let r;if(typeof t=="string")try{r=Qs(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(qr(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}function ta(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];Kr(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}const Zr=e=>typeof e=="bigint"&&Hr<=e;function A0(e,t,n){return Zr(e)&&Zr(t)&&Zr(n)&&t<=e&&e<n}function Wt(e,t,n,r){if(!A0(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function S0(e){let t;for(t=0;e>Hr;e>>=Zs,t+=1);return t}const _0=e=>(E0<<BigInt(e-1))-Zs,x0={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||qr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Xr(e,t,n={}){const r=(o,i,s)=>{const a=x0[i];if(typeof a!="function")throw new Error("invalid validator function");const c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+c)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}function na(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const i=e(n,...r);return t.set(n,i),i}}const oe=BigInt(0),J=BigInt(1),ut=BigInt(2),B0=BigInt(3),Jr=BigInt(4),ra=BigInt(5),oa=BigInt(8);function te(e,t){const n=e%t;return n>=oe?n:t+n}function O0(e,t,n){if(t<oe)throw new Error("invalid exponent, negatives unsupported");if(n<=oe)throw new Error("invalid modulus");if(n===J)return oe;let r=J;for(;t>oe;)t&J&&(r=r*e%n),e=e*e%n,t>>=J;return r}function Oe(e,t,n){let r=e;for(;t-- >oe;)r*=r,r%=n;return r}function ia(e,t){if(e===oe)throw new Error("invert: expected non-zero number");if(t<=oe)throw new Error("invert: expected positive modulus, got "+t);let n=te(e,t),r=t,o=oe,i=J;for(;n!==oe;){const s=r/n,a=r%n,c=o-i*s;r=n,n=a,o=i,i=c}if(r!==J)throw new Error("invert: does not exist");return te(o,t)}function C0(e){const t=(e-J)/ut;let n,r,o;for(n=e-J,r=0;n%ut===oe;n/=ut,r++);for(o=ut;o<e&&O0(o,t,e)!==e-J;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(e+J)/Jr;return function(a,c){const u=a.pow(c,s);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+J)/ut;return function(s,a){if(s.pow(a,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,u=s.pow(s.mul(s.ONE,o),n),f=s.pow(a,i),l=s.pow(a,n);for(;!s.eql(l,s.ONE);){if(s.eql(l,s.ZERO))return s.ZERO;let d=1;for(let h=s.sqr(l);d<c&&!s.eql(h,s.ONE);d++)h=s.sqr(h);const w=s.pow(u,J<<BigInt(c-d-1));u=s.sqr(w),f=s.mul(f,w),l=s.mul(l,u),c=d}return f}}function N0(e){if(e%Jr===B0){const t=(e+J)/Jr;return function(n,r){const o=n.pow(r,t);if(!n.eql(n.sqr(o),r))throw new Error("Cannot find square root");return o}}if(e%oa===ra){const t=(e-ra)/oa;return function(n,r){const o=n.mul(r,ut),i=n.pow(o,t),s=n.mul(r,i),a=n.mul(n.mul(s,ut),i),c=n.mul(s,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return C0(e)}const I0=(e,t)=>(te(e,t)&J)===J,T0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function U0(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=T0.reduce((r,o)=>(r[o]="function",r),t);return Xr(e,n)}function R0(e,t,n){if(n<oe)throw new Error("invalid exponent, negatives unsupported");if(n===oe)return e.ONE;if(n===J)return t;let r=e.ONE,o=t;for(;n>oe;)n&J&&(r=e.mul(r,o)),o=e.sqr(o),n>>=J;return r}function F0(e,t){const n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function sa(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function aa(e,t,n=!1,r={}){if(e<=oe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:i}=sa(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const a=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:i,MASK:_0(o),ZERO:oe,ONE:J,create:c=>te(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return oe<=c&&c<e},is0:c=>c===oe,isOdd:c=>(c&J)===J,neg:c=>te(-c,e),eql:(c,u)=>c===u,sqr:c=>te(c*c,e),add:(c,u)=>te(c+u,e),sub:(c,u)=>te(c-u,e),mul:(c,u)=>te(c*u,e),pow:(c,u)=>R0(a,c,u),div:(c,u)=>te(c*ia(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>ia(c,e),sqrt:r.sqrt||(c=>(s||(s=N0(e)),s(a,c))),invertBatch:c=>F0(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>n?Gr(c,i):ea(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?An(c):v0(c)}});return Object.freeze(a)}const ca=BigInt(0),Sn=BigInt(1);function Qr(e,t){const n=t.negate();return e?n:t}function ua(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function eo(e,t){ua(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function $0(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function P0(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const to=new WeakMap,fa=new WeakMap;function no(e){return fa.get(e)||1}function j0(e,t){return{constTimeNegate:Qr,hasPrecomputes(n){return no(n)!==1},unsafeLadder(n,r,o=e.ZERO){let i=n;for(;r>ca;)r&Sn&&(o=o.add(i)),i=i.double(),r>>=Sn;return o},precomputeWindow(n,r){const{windows:o,windowSize:i}=eo(r,t),s=[];let a=n,c=a;for(let u=0;u<o;u++){c=a,s.push(c);for(let f=1;f<i;f++)c=c.add(a),s.push(c);a=c.double()}return s},wNAF(n,r,o){const{windows:i,windowSize:s}=eo(n,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let d=0;d<i;d++){const w=d*s;let h=Number(o&u);o>>=l,h>s&&(h-=f,o+=Sn);const p=w,b=w+Math.abs(h)-1,D=d%2!==0,E=h<0;h===0?c=c.add(Qr(D,r[p])):a=a.add(Qr(E,r[b]))}return{p:a,f:c}},wNAFUnsafe(n,r,o,i=e.ZERO){const{windows:s,windowSize:a}=eo(n,t),c=BigInt(2**n-1),u=2**n,f=BigInt(n);for(let l=0;l<s;l++){const d=l*a;if(o===ca)break;let w=Number(o&c);if(o>>=f,w>a&&(w-=u,o+=Sn),w===0)continue;let h=r[d+Math.abs(w)-1];w<0&&(h=h.negate()),i=i.add(h)}return i},getPrecomputes(n,r,o){let i=to.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&to.set(r,o(i))),i},wNAFCached(n,r,o){const i=no(n);return this.wNAF(i,this.getPrecomputes(i,n,o),r)},wNAFCachedUnsafe(n,r,o,i){const s=no(n);return s===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,n,o),r,i)},setWindowSize(n,r){ua(r,t),fa.set(n,r),to.delete(n)}}}function L0(e,t,n,r){if($0(n,e),P0(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,i=S0(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,a=(1<<s)-1,c=new Array(a+1).fill(o),u=Math.floor((t.BITS-1)/s)*s;let f=o;for(let l=u;l>=0;l-=s){c.fill(o);for(let w=0;w<r.length;w++){const h=r[w],p=Number(h>>BigInt(l)&BigInt(a));c[p]=c[p].add(n[w])}let d=o;for(let w=c.length-1,h=o;w>0;w--)h=h.add(c[w]),d=d.add(h);if(f=f.add(d),l!==0)for(let w=0;w<s;w++)f=f.double()}return f}function M0(e){return U0(e.Fp),Xr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sa(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ve=BigInt(0),le=BigInt(1),_n=BigInt(2),z0=BigInt(8),k0={zip215:!0};function V0(e){const t=M0(e);return Xr(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function H0(e){const t=V0(e),{Fp:n,n:r,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:c}=t,u=_n<<BigInt(a*8)-le,f=n.create,l=aa(t.n,t.nBitLength),d=t.uvRatio||((v,m)=>{try{return{isValid:!0,value:n.sqrt(v*n.inv(m))}}catch{return{isValid:!1,value:ve}}}),w=t.adjustScalarBytes||(v=>v),h=t.domain||((v,m,S)=>{if(Wr("phflag",S),m.length||S)throw new Error("Contexts/pre-hash are not supported");return v});function p(v,m){Wt("coordinate "+v,m,ve,u)}function b(v){if(!(v instanceof y))throw new Error("ExtendedPoint expected")}const D=na((v,m)=>{const{ex:S,ey:B,ez:_}=v,U=v.is0();m==null&&(m=U?z0:n.inv(_));const F=f(S*m),P=f(B*m),L=f(_*m);if(U)return{x:ve,y:le};if(L!==le)throw new Error("invZ was invalid");return{x:F,y:P}}),E=na(v=>{const{a:m,d:S}=t;if(v.is0())throw new Error("bad point: ZERO");const{ex:B,ey:_,ez:U,et:F}=v,P=f(B*B),L=f(_*_),z=f(U*U),V=f(z*z),q=f(P*m),ee=f(z*f(q+L)),G=f(V+f(S*f(P*L)));if(ee!==G)throw new Error("bad point: equation left != right (1)");const Y=f(B*_),me=f(U*F);if(Y!==me)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(m,S,B,_){this.ex=m,this.ey=S,this.ez=B,this.et=_,p("x",m),p("y",S),p("z",B),p("t",_),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof y)throw new Error("extended point not allowed");const{x:S,y:B}=m||{};return p("x",S),p("y",B),new y(S,B,le,f(S*B))}static normalizeZ(m){const S=n.invertBatch(m.map(B=>B.ez));return m.map((B,_)=>B.toAffine(S[_])).map(y.fromAffine)}static msm(m,S){return L0(y,l,m,S)}_setWindowSize(m){O.setWindowSize(this,m)}assertValidity(){E(this)}equals(m){b(m);const{ex:S,ey:B,ez:_}=this,{ex:U,ey:F,ez:P}=m,L=f(S*P),z=f(U*_),V=f(B*P),q=f(F*_);return L===z&&V===q}is0(){return this.equals(y.ZERO)}negate(){return new y(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:m}=t,{ex:S,ey:B,ez:_}=this,U=f(S*S),F=f(B*B),P=f(_n*f(_*_)),L=f(m*U),z=S+B,V=f(f(z*z)-U-F),q=L+F,ee=q-P,G=L-F,Y=f(V*ee),me=f(q*G),pe=f(V*G),Ee=f(ee*q);return new y(Y,me,Ee,pe)}add(m){b(m);const{a:S,d:B}=t,{ex:_,ey:U,ez:F,et:P}=this,{ex:L,ey:z,ez:V,et:q}=m;if(S===BigInt(-1)){const Ic=f((U-_)*(z+L)),Tc=f((U+_)*(z-L)),Do=f(Tc-Ic);if(Do===ve)return this.double();const Uc=f(F*_n*q),Rc=f(P*_n*V),Fc=Rc+Uc,$c=Tc+Ic,Pc=Rc-Uc,Kp=f(Fc*Do),Wp=f($c*Pc),Yp=f(Fc*Pc),Gp=f(Do*$c);return new y(Kp,Wp,Gp,Yp)}const ee=f(_*L),G=f(U*z),Y=f(P*B*q),me=f(F*V),pe=f((_+U)*(L+z)-ee-G),Ee=me-Y,Je=me+Y,Pe=f(G-S*ee),Tn=f(pe*Ee),Vp=f(Je*Pe),Hp=f(pe*Pe),qp=f(Ee*Je);return new y(Tn,Vp,qp,Hp)}subtract(m){return this.add(m.negate())}wNAF(m){return O.wNAFCached(this,m,y.normalizeZ)}multiply(m){const S=m;Wt("scalar",S,le,r);const{p:B,f:_}=this.wNAF(S);return y.normalizeZ([B,_])[0]}multiplyUnsafe(m,S=y.ZERO){const B=m;return Wt("scalar",B,ve,r),B===ve?I:this.is0()||B===le?this:O.wNAFCachedUnsafe(this,B,y.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return O.unsafeLadder(this,r).is0()}toAffine(m){return D(this,m)}clearCofactor(){const{h:m}=t;return m===le?this:this.multiplyUnsafe(m)}static fromHex(m,S=!1){const{d:B,a:_}=t,U=n.BYTES;m=Fe("pointHex",m,U),Wr("zip215",S);const F=m.slice(),P=m[U-1];F[U-1]=P&-129;const L=An(F),z=S?u:n.ORDER;Wt("pointHex.y",L,ve,z);const V=f(L*L),q=f(V-le),ee=f(B*V-_);let{isValid:G,value:Y}=d(q,ee);if(!G)throw new Error("Point.fromHex: invalid y coordinate");const me=(Y&le)===le,pe=(P&128)!==0;if(!S&&Y===ve&&pe)throw new Error("Point.fromHex: x=0 and x_0=1");return pe!==me&&(Y=f(-Y)),y.fromAffine({x:Y,y:L})}static fromPrivateKey(m){return C(m).point}toRawBytes(){const{x:m,y:S}=this.toAffine(),B=Gr(S,n.BYTES);return B[B.length-1]|=m&le?128:0,B}toHex(){return Yr(this.toRawBytes())}}y.BASE=new y(t.Gx,t.Gy,le,f(t.Gx*t.Gy)),y.ZERO=new y(ve,le,le,ve);const{BASE:A,ZERO:I}=y,O=j0(y,a*8);function x(v){return te(v,r)}function N(v){return x(An(v))}function C(v){const m=n.BYTES;v=Fe("private key",v,m);const S=Fe("hashed private key",i(v),2*m),B=w(S.slice(0,m)),_=S.slice(m,2*m),U=N(B),F=A.multiply(U),P=F.toRawBytes();return{head:B,prefix:_,scalar:U,point:F,pointBytes:P}}function j(v){return C(v).pointBytes}function R(v=new Uint8Array,...m){const S=ta(...m);return N(i(h(S,Fe("context",v),!!o)))}function $(v,m,S={}){v=Fe("message",v),o&&(v=o(v));const{prefix:B,scalar:_,pointBytes:U}=C(m),F=R(S.context,B,v),P=A.multiply(F).toRawBytes(),L=R(S.context,P,U,v),z=x(F+L*_);Wt("signature.s",z,ve,r);const V=ta(P,Gr(z,n.BYTES));return Fe("result",V,n.BYTES*2)}const M=k0;function T(v,m,S,B=M){const{context:_,zip215:U}=B,F=n.BYTES;v=Fe("signature",v,2*F),m=Fe("message",m),S=Fe("publicKey",S,F),U!==void 0&&Wr("zip215",U),o&&(m=o(m));const P=An(v.slice(F,2*F));let L,z,V;try{L=y.fromHex(S,U),z=y.fromHex(v.slice(0,F),U),V=A.multiplyUnsafe(P)}catch{return!1}if(!U&&L.isSmallOrder())return!1;const q=R(_,z.toRawBytes(),L.toRawBytes(),m);return z.add(L.multiplyUnsafe(q)).subtract(V).clearCofactor().equals(y.ZERO)}return A._setWindowSize(8),{CURVE:t,getPublicKey:j,sign:$,verify:T,ExtendedPoint:y,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>s(n.BYTES),precompute(v=8,m=y.BASE){return m._setWindowSize(v),m.multiply(BigInt(3)),m}}}}BigInt(0),BigInt(1);const ro=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),la=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const q0=BigInt(1),da=BigInt(2);BigInt(3);const K0=BigInt(5),W0=BigInt(8);function Y0(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=ro,s=e*e%i*e%i,a=Oe(s,da,i)*s%i,c=Oe(a,q0,i)*e%i,u=Oe(c,K0,i)*c%i,f=Oe(u,t,i)*u%i,l=Oe(f,n,i)*f%i,d=Oe(l,r,i)*l%i,w=Oe(d,o,i)*d%i,h=Oe(w,o,i)*d%i,p=Oe(h,t,i)*u%i;return{pow_p_5_8:Oe(p,da,i)*e%i,b2:s}}function G0(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Z0(e,t){const n=ro,r=te(t*t*t,n),o=te(r*r*t,n),i=Y0(e*o).pow_p_5_8;let s=te(e*r*i,n);const a=te(t*s*s,n),c=s,u=te(s*la,n),f=a===e,l=a===te(-e,n),d=a===te(-e*la,n);return f&&(s=c),(l||d)&&(s=u),I0(s,n)&&(s=te(-s,n)),{isValid:f||l,value:s}}const X0=aa(ro,void 0,!0),J0={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:X0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:W0,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:m0,randomBytes:Kh,adjustScalarBytes:G0,uvRatio:Z0};H0(J0);const ha=".",ba="base64url",Q0="utf8",eb="utf8";function ga(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function tb(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ga(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function nb(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,b=0,D=0,E=h.length;D!==E&&h[D]===0;)D++,p++;for(var y=(E-D)*f+1>>>0,A=new Uint8Array(y);D!==E;){for(var I=h[D],O=0,x=y-1;(I!==0||O<b)&&x!==-1;x--,O++)I+=256*A[x]>>>0,A[x]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");b=O,D++}for(var N=y-b;N!==y&&A[N]===0;)N++;for(var C=c.repeat(p);N<y;++N)C+=e.charAt(A[N]);return C}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var p=0;if(h[p]!==" "){for(var b=0,D=0;h[p]===c;)b++,p++;for(var E=(h.length-p)*u+1>>>0,y=new Uint8Array(E);h[p];){var A=n[h.charCodeAt(p)];if(A===255)return;for(var I=0,O=E-1;(A!==0||I<D)&&O!==-1;O--,I++)A+=a*y[O]>>>0,y[O]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");D=I,p++}if(h[p]!==" "){for(var x=E-D;x!==E&&y[x]===0;)x++;for(var N=new Uint8Array(b+(E-x)),C=b;x!==E;)N[C++]=y[x++];return N}}}function w(h){var p=d(h);if(p)return p;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:d,decode:w}}var rb=nb,ob=rb;const pa=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ib=e=>new TextEncoder().encode(e),sb=e=>new TextDecoder().decode(e);class ab{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class cb{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return wa(this,t)}}class ub{constructor(t){this.decoders=t}or(t){return wa(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wa=(e,t)=>new ub({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class fb{constructor(t,n,r,o){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new ab(t,n,r),this.decoder=new cb(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const xn=({name:e,prefix:t,encode:n,decode:r})=>new fb(e,t,n,r),Yt=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=ob(n,t);return xn({prefix:e,name:t,encode:r,decode:i=>pa(o(i))})},lb=(e,t,n,r)=>{const o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let i=e.length;for(;e[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let f=0;f<i;++f){const l=o[e[f]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|l,a+=n,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},db=(e,t,n)=>{const r=t[t.length-1]==="=",o=(1<<n)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i},se=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>xn({prefix:t,name:e,encode(o){return db(o,r,n)},decode(o){return lb(o,r,n,e)}}),hb=xn({prefix:"\0",name:"identity",encode:e=>sb(e),decode:e=>ib(e)});var bb=Object.freeze({__proto__:null,identity:hb});const gb=se({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pb=Object.freeze({__proto__:null,base2:gb});const wb=se({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yb=Object.freeze({__proto__:null,base8:wb});const mb=Yt({prefix:"9",name:"base10",alphabet:"0123456789"});var Eb=Object.freeze({__proto__:null,base10:mb});const Db=se({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vb=se({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ab=Object.freeze({__proto__:null,base16:Db,base16upper:vb});const Sb=se({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_b=se({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xb=se({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bb=se({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ob=se({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cb=se({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nb=se({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ib=se({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tb=se({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ub=Object.freeze({__proto__:null,base32:Sb,base32upper:_b,base32pad:xb,base32padupper:Bb,base32hex:Ob,base32hexupper:Cb,base32hexpad:Nb,base32hexpadupper:Ib,base32z:Tb});const Rb=Yt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fb=Yt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $b=Object.freeze({__proto__:null,base36:Rb,base36upper:Fb});const Pb=Yt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jb=Yt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Lb=Object.freeze({__proto__:null,base58btc:Pb,base58flickr:jb});const Mb=se({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zb=se({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kb=se({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vb=se({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Hb=Object.freeze({__proto__:null,base64:Mb,base64pad:zb,base64url:kb,base64urlpad:Vb});const ya=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),qb=ya.reduce((e,t,n)=>(e[n]=t,e),[]),Kb=ya.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Wb(e){return e.reduce((t,n)=>(t+=qb[n],t),"")}function Yb(e){const t=[];for(const n of e){const r=Kb[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const Gb=xn({prefix:"\u{1F680}",name:"base256emoji",encode:Wb,decode:Yb});var Zb=Object.freeze({__proto__:null,base256emoji:Gb}),Xb=Ea,ma=128,Jb=127,Qb=~Jb,eg=Math.pow(2,31);function Ea(e,t,n){t=t||[],n=n||0;for(var r=n;e>=eg;)t[n++]=e&255|ma,e/=128;for(;e&Qb;)t[n++]=e&255|ma,e>>>=7;return t[n]=e|0,Ea.bytes=n-r+1,t}var tg=oo,ng=128,Da=127;function oo(e,r){var n=0,r=r||0,o=0,i=r,s,a=e.length;do{if(i>=a)throw oo.bytes=0,new RangeError("Could not decode varint");s=e[i++],n+=o<28?(s&Da)<<o:(s&Da)*Math.pow(2,o),o+=7}while(s>=ng);return oo.bytes=i-r,n}var rg=Math.pow(2,7),og=Math.pow(2,14),ig=Math.pow(2,21),sg=Math.pow(2,28),ag=Math.pow(2,35),cg=Math.pow(2,42),ug=Math.pow(2,49),fg=Math.pow(2,56),lg=Math.pow(2,63),dg=function(e){return e<rg?1:e<og?2:e<ig?3:e<sg?4:e<ag?5:e<cg?6:e<ug?7:e<fg?8:e<lg?9:10},hg={encode:Xb,decode:tg,encodingLength:dg},va=hg;const Aa=(e,t,n=0)=>(va.encode(e,t,n),t),Sa=e=>va.encodingLength(e),io=(e,t)=>{const n=t.byteLength,r=Sa(e),o=r+Sa(n),i=new Uint8Array(o+n);return Aa(e,i,0),Aa(n,i,r),i.set(t,o),new bg(e,n,t,i)};class bg{constructor(t,n,r,o){this.code=t,this.size=n,this.digest=r,this.bytes=o}}const _a=({name:e,code:t,encode:n})=>new gg(e,t,n);class gg{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?io(this.code,n):n.then(r=>io(this.code,r))}else throw Error("Unknown type, must be binary type")}}const xa=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),pg=_a({name:"sha2-256",code:18,encode:xa("SHA-256")}),wg=_a({name:"sha2-512",code:19,encode:xa("SHA-512")});var yg=Object.freeze({__proto__:null,sha256:pg,sha512:wg});const Ba=0,mg="identity",Oa=pa;var Eg=Object.freeze({__proto__:null,identity:{code:Ba,name:mg,encode:Oa,digest:e=>io(Ba,Oa(e))}});new TextEncoder,new TextDecoder;const Ca={...bb,...pb,...yb,...Eb,...Ab,...Ub,...$b,...Lb,...Hb,...Zb};({...yg,...Eg});function Na(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Ia=Na("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),so=Na("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=tb(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Ta={utf8:Ia,"utf-8":Ia,hex:Ca.base16,latin1:so,ascii:so,binary:so,...Ca};function Dg(e,t="utf8"){const n=Ta[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function ao(e,t="utf8"){const n=Ta[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ga(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Ua(e){return Mh(Dg(ao(e,ba),Q0))}function vg(e){return ao(e,ba)}function Ag(e){const t=e.split(ha),n=Ua(t[0]),r=Ua(t[1]),o=vg(t[2]),i=ao(t.slice(0,2).join(ha),eb);return{header:n,payload:r,signature:o,data:i}}function Ra(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Gt(e,t){t||(t=e.reduce((o,i)=>o+i.length,0));const n=Ra(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function Sg(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,b=0,D=0,E=h.length;D!==E&&h[D]===0;)D++,p++;for(var y=(E-D)*f+1>>>0,A=new Uint8Array(y);D!==E;){for(var I=h[D],O=0,x=y-1;(I!==0||O<b)&&x!==-1;x--,O++)I+=256*A[x]>>>0,A[x]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");b=O,D++}for(var N=y-b;N!==y&&A[N]===0;)N++;for(var C=c.repeat(p);N<y;++N)C+=e.charAt(A[N]);return C}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var p=0;if(h[p]!==" "){for(var b=0,D=0;h[p]===c;)b++,p++;for(var E=(h.length-p)*u+1>>>0,y=new Uint8Array(E);h[p];){var A=n[h.charCodeAt(p)];if(A===255)return;for(var I=0,O=E-1;(A!==0||I<D)&&O!==-1;O--,I++)A+=a*y[O]>>>0,y[O]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");D=I,p++}if(h[p]!==" "){for(var x=E-D;x!==E&&y[x]===0;)x++;for(var N=new Uint8Array(b+(E-x)),C=b;x!==E;)N[C++]=y[x++];return N}}}function w(h){var p=d(h);if(p)return p;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:d,decode:w}}var _g=Sg,xg=_g;const Fa=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Bg=e=>new TextEncoder().encode(e),Og=e=>new TextDecoder().decode(e);class Cg{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Ng{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return $a(this,t)}}class Ig{constructor(t){this.decoders=t}or(t){return $a(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $a=(e,t)=>new Ig({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Tg{constructor(t,n,r,o){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new Cg(t,n,r),this.decoder=new Ng(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Bn=({name:e,prefix:t,encode:n,decode:r})=>new Tg(e,t,n,r),Zt=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=xg(n,t);return Bn({prefix:e,name:t,encode:r,decode:i=>Fa(o(i))})},Ug=(e,t,n,r)=>{const o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let i=e.length;for(;e[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let f=0;f<i;++f){const l=o[e[f]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|l,a+=n,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Rg=(e,t,n)=>{const r=t[t.length-1]==="=",o=(1<<n)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i},ae=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Bn({prefix:t,name:e,encode(o){return Rg(o,r,n)},decode(o){return Ug(o,r,n,e)}}),Fg=Bn({prefix:"\0",name:"identity",encode:e=>Og(e),decode:e=>Bg(e)});var $g=Object.freeze({__proto__:null,identity:Fg});const Pg=ae({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var jg=Object.freeze({__proto__:null,base2:Pg});const Lg=ae({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Mg=Object.freeze({__proto__:null,base8:Lg});const zg=Zt({prefix:"9",name:"base10",alphabet:"0123456789"});var kg=Object.freeze({__proto__:null,base10:zg});const Vg=ae({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hg=ae({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qg=Object.freeze({__proto__:null,base16:Vg,base16upper:Hg});const Kg=ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Wg=ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Yg=ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gg=ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zg=ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xg=ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Jg=ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qg=ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),e1=ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var t1=Object.freeze({__proto__:null,base32:Kg,base32upper:Wg,base32pad:Yg,base32padupper:Gg,base32hex:Zg,base32hexupper:Xg,base32hexpad:Jg,base32hexpadupper:Qg,base32z:e1});const n1=Zt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),r1=Zt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var o1=Object.freeze({__proto__:null,base36:n1,base36upper:r1});const i1=Zt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s1=Zt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var a1=Object.freeze({__proto__:null,base58btc:i1,base58flickr:s1});const c1=ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),u1=ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),f1=ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),l1=ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var d1=Object.freeze({__proto__:null,base64:c1,base64pad:u1,base64url:f1,base64urlpad:l1});const Pa=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),h1=Pa.reduce((e,t,n)=>(e[n]=t,e),[]),b1=Pa.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function g1(e){return e.reduce((t,n)=>(t+=h1[n],t),"")}function p1(e){const t=[];for(const n of e){const r=b1[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const w1=Bn({prefix:"\u{1F680}",name:"base256emoji",encode:g1,decode:p1});var y1=Object.freeze({__proto__:null,base256emoji:w1}),m1=La,ja=128,E1=127,D1=~E1,v1=Math.pow(2,31);function La(e,t,n){t=t||[],n=n||0;for(var r=n;e>=v1;)t[n++]=e&255|ja,e/=128;for(;e&D1;)t[n++]=e&255|ja,e>>>=7;return t[n]=e|0,La.bytes=n-r+1,t}var A1=co,S1=128,Ma=127;function co(e,r){var n=0,r=r||0,o=0,i=r,s,a=e.length;do{if(i>=a)throw co.bytes=0,new RangeError("Could not decode varint");s=e[i++],n+=o<28?(s&Ma)<<o:(s&Ma)*Math.pow(2,o),o+=7}while(s>=S1);return co.bytes=i-r,n}var _1=Math.pow(2,7),x1=Math.pow(2,14),B1=Math.pow(2,21),O1=Math.pow(2,28),C1=Math.pow(2,35),N1=Math.pow(2,42),I1=Math.pow(2,49),T1=Math.pow(2,56),U1=Math.pow(2,63),R1=function(e){return e<_1?1:e<x1?2:e<B1?3:e<O1?4:e<C1?5:e<N1?6:e<I1?7:e<T1?8:e<U1?9:10},F1={encode:m1,decode:A1,encodingLength:R1},za=F1;const ka=(e,t,n=0)=>(za.encode(e,t,n),t),Va=e=>za.encodingLength(e),uo=(e,t)=>{const n=t.byteLength,r=Va(e),o=r+Va(n),i=new Uint8Array(o+n);return ka(e,i,0),ka(n,i,r),i.set(t,o),new $1(e,n,t,i)};class $1{constructor(t,n,r,o){this.code=t,this.size=n,this.digest=r,this.bytes=o}}const Ha=({name:e,code:t,encode:n})=>new P1(e,t,n);class P1{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?uo(this.code,n):n.then(r=>uo(this.code,r))}else throw Error("Unknown type, must be binary type")}}const qa=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),j1=Ha({name:"sha2-256",code:18,encode:qa("SHA-256")}),L1=Ha({name:"sha2-512",code:19,encode:qa("SHA-512")});var M1=Object.freeze({__proto__:null,sha256:j1,sha512:L1});const Ka=0,z1="identity",Wa=Fa;var k1=Object.freeze({__proto__:null,identity:{code:Ka,name:z1,encode:Wa,digest:e=>uo(Ka,Wa(e))}});new TextEncoder,new TextDecoder;const Ya={...$g,...jg,...Mg,...kg,...qg,...t1,...o1,...a1,...d1,...y1};({...M1,...k1});function Ga(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Za=Ga("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),fo=Ga("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Ra(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Xa={utf8:Za,"utf-8":Za,hex:Ya.base16,latin1:fo,ascii:fo,binary:fo,...Ya};function ye(e,t="utf8"){const n=Xa[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):n.decoder.decode(`${n.prefix}${e}`)}function be(e,t="utf8"){const n=Xa[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const lo="base10",fe="base16",It="base64pad",On="base64url",Tt="utf8",ho=0,Ut=1,Xt=2,V1=0,Ja=1,Jt=12,bo=32;function H1(){const e=zr.utils.randomPrivateKey(),t=zr.getPublicKey(e);return{privateKey:be(e,fe),publicKey:be(t,fe)}}function q1(){const e=ot(bo);return be(e,fe)}function K1(e,t){const n=zr.getSharedSecret(ye(e,fe),ye(t,fe)),r=Oh(Ne,n,void 0,void 0,bo);return be(r,fe)}function W1(e){const t=Ne(ye(e,fe));return be(t,fe)}function Y1(e){const t=Ne(ye(e,Tt));return be(t,fe)}function go(e){return ye(`${e}`,lo)}function ft(e){return Number(be(e,lo))}function Qa(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ec(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function G1(e){const t=go(typeof e.type<"u"?e.type:ho);if(ft(t)===Ut&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?ye(e.senderPublicKey,fe):void 0,r=typeof e.iv<"u"?ye(e.iv,fe):ot(Jt),o=ye(e.symKey,fe),i=ks(o,r).encrypt(ye(e.message,Tt)),s=po({type:t,sealed:i,iv:r,senderPublicKey:n});return e.encoding===On?Qa(s):s}function Z1(e){const t=ye(e.symKey,fe),{sealed:n,iv:r}=Cn({encoded:e.encoded,encoding:e.encoding}),o=ks(t,r).decrypt(n);if(o===null)throw new Error("Failed to decrypt");return be(o,Tt)}function X1(e,t){const n=go(Xt),r=ot(Jt),o=ye(e,Tt),i=po({type:n,sealed:o,iv:r});return t===On?Qa(i):i}function J1(e,t){const{sealed:n}=Cn({encoded:e,encoding:t});return be(n,Tt)}function po(e){if(ft(e.type)===Xt)return be(Gt([e.type,e.sealed]),It);if(ft(e.type)===Ut){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return be(Gt([e.type,e.senderPublicKey,e.iv,e.sealed]),It)}return be(Gt([e.type,e.iv,e.sealed]),It)}function Cn(e){const t=(e.encoding||It)===On?ec(e.encoded):e.encoded,n=ye(t,It),r=n.slice(V1,Ja),o=Ja;if(ft(r)===Ut){const c=o+bo,u=c+Jt,f=n.slice(o,c),l=n.slice(c,u),d=n.slice(u);return{type:r,sealed:d,iv:l,senderPublicKey:f}}if(ft(r)===Xt){const c=n.slice(o),u=ot(Jt);return{type:r,sealed:c,iv:u}}const i=o+Jt,s=n.slice(o,i),a=n.slice(i);return{type:r,sealed:a,iv:s}}function Q1(e,t){const n=Cn({encoded:e,encoding:t?.encoding});return tc({type:ft(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?be(n.senderPublicKey,fe):void 0,receiverPublicKey:t?.receiverPublicKey})}function tc(e){const t=e?.type||ho;if(t===Ut){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ep(e){return e.type===Ut&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function tp(e){return e.type===Xt}function nc(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Gt([new Uint8Array([4]),t,n])}function np(e,t){const[n,r,o]=e.split("."),i=Buffer.from(ec(o),"base64");if(i.length!==64)throw new Error("Invalid signature length");const s=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,u=Ne(c),f=nc(t);if(!jh.verify(Gt([s,a]),u,f))throw new Error("Invalid signature");return Ag(e).payload}const rp={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},rc="irn";function op(e){return e?.relay||{protocol:rc}}function ip(e){const t=rp[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function oc(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const i=o.replace(r,""),s=e[o];n[i]=s}}),n}function sp(e){if(!e.includes("wc:")){const u=Zn(e);u!=null&&u.includes("wc:")&&(e=u)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),o=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",s=new URLSearchParams(i),a={};s.forEach((u,f)=>{a[f]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:ic(o[0]),version:parseInt(o[1],10),symKey:a.symKey,relay:oc(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function ic(e){return e.startsWith("//")?e.substring(2):e}function sc(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(o=>{const i=o,s=n+t+i;e[i]&&(r[s]=e[i])}),r}function ap(e){const t=new URLSearchParams,n=sc(e.relay);Object.keys(n).sort().forEach(o=>{t.set(o,n[o])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function cp(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var up=Object.defineProperty,fp=Object.defineProperties,lp=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,dp=Object.prototype.hasOwnProperty,hp=Object.prototype.propertyIsEnumerable,cc=(e,t,n)=>t in e?up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bp=(e,t)=>{for(var n in t||(t={}))dp.call(t,n)&&cc(e,n,t[n]);if(ac)for(var n of ac(t))hp.call(t,n)&&cc(e,n,t[n]);return e},gp=(e,t)=>fp(e,lp(t));function lt(e){const t=[];return e.forEach(n=>{const[r,o]=n.split(":");t.push(`${r}:${o}`)}),t}function uc(e){const t=[];return Object.values(e).forEach(n=>{t.push(...lt(n.accounts))}),t}function fc(e,t){const n=[];return Object.values(e).forEach(r=>{lt(r.accounts).includes(t)&&n.push(...r.methods)}),n}function lc(e,t){const n=[];return Object.values(e).forEach(r=>{lt(r.accounts).includes(t)&&n.push(...r.events)}),n}function pp(e,t){const n=vc(e,t);if(n)throw new Error(n.message);const r={};for(const[o,i]of Object.entries(e))r[o]={methods:i.methods,events:i.events,chains:i.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return r}function wp(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:r}=e,o=Qt(t),i=Qt(n),s={};Object.keys(r).forEach(u=>{const f=r[u].chains,l=r[u].methods,d=r[u].events,w=r[u].accounts;f.forEach(h=>{if(!w.some(p=>p.includes(h)))throw new Error(`No accounts provided for chain ${h} in namespace ${u}`)}),s[u]={chains:f,methods:l,events:d,accounts:w}});const a=Sc(t,s,"approve()");if(a)throw new Error(a.message);const c={};return!Object.keys(t).length&&!Object.keys(n).length?s:(Object.keys(o).forEach(u=>{const f=r[u].chains.filter(h=>{var p,b;return(b=(p=o[u])==null?void 0:p.chains)==null?void 0:b.includes(h)}),l=r[u].methods.filter(h=>{var p,b;return(b=(p=o[u])==null?void 0:p.methods)==null?void 0:b.includes(h)}),d=r[u].events.filter(h=>{var p,b;return(b=(p=o[u])==null?void 0:p.events)==null?void 0:b.includes(h)}),w=f.map(h=>r[u].accounts.filter(p=>p.includes(`${h}:`))).flat();c[u]={chains:f,methods:l,events:d,accounts:w}}),Object.keys(i).forEach(u=>{var f,l,d,w,h,p;if(!r[u])return;const b=(l=(f=i[u])==null?void 0:f.chains)==null?void 0:l.filter(A=>r[u].chains.includes(A)),D=r[u].methods.filter(A=>{var I,O;return(O=(I=i[u])==null?void 0:I.methods)==null?void 0:O.includes(A)}),E=r[u].events.filter(A=>{var I,O;return(O=(I=i[u])==null?void 0:I.events)==null?void 0:O.includes(A)}),y=b?.map(A=>r[u].accounts.filter(I=>I.includes(`${A}:`))).flat();c[u]={chains:we((d=c[u])==null?void 0:d.chains,b),methods:we((w=c[u])==null?void 0:w.methods,D),events:we((h=c[u])==null?void 0:h.events,E),accounts:we((p=c[u])==null?void 0:p.accounts,y)}}),c)}function wo(e){return e.includes(":")}function dc(e){return wo(e)?e.split(":")[0]:e}function Qt(e){var t,n,r;const o={};if(!Nn(e))return o;for(const[i,s]of Object.entries(e)){const a=wo(i)?[i]:s.chains,c=s.methods||[],u=s.events||[],f=dc(i);o[f]=gp(bp({},o[f]),{chains:we(a,(t=o[f])==null?void 0:t.chains),methods:we(c,(n=o[f])==null?void 0:n.methods),events:we(u,(r=o[f])==null?void 0:r.events)})}return o}function hc(e){const t={};return e?.forEach(n=>{var r;const[o,i]=n.split(":");t[o]||(t[o]={accounts:[],chains:[],events:[],methods:[]}),t[o].accounts.push(n),(r=t[o].chains)==null||r.push(`${o}:${i}`)}),t}function yp(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=hc(t);for(const[r,o]of Object.entries(n))o.methods?o.methods=we(o.methods,e):o.methods=e,o.events=["chainChanged","accountsChanged"];return n}function mp(e,t){var n,r,o,i,s,a;const c=Qt(e),u=Qt(t),f={},l=Object.keys(c).concat(Object.keys(u));for(const d of l)f[d]={chains:we((n=c[d])==null?void 0:n.chains,(r=u[d])==null?void 0:r.chains),methods:we((o=c[d])==null?void 0:o.methods,(i=u[d])==null?void 0:i.methods),events:we((s=c[d])==null?void 0:s.events,(a=u[d])==null?void 0:a.events)};return f}const bc={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},gc={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $e(e,t){const{message:n,code:r}=gc[e];return{message:t?`${n} ${t}`:n,code:r}}function dt(e,t){const{message:n,code:r}=bc[e];return{message:t?`${n} ${t}`:n,code:r}}function en(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Nn(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Xe(e){return typeof e>"u"}function ge(e,t){return t&&Xe(e)?!0:typeof e=="string"&&!!e.trim().length}function In(e,t){return t&&Xe(e)?!0:typeof e=="number"&&!isNaN(e)}function Ep(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),o=Object.keys(n);let i=!0;return Me(o,r)?(r.forEach(s=>{const{accounts:a,methods:c,events:u}=e.namespaces[s],f=lt(a),l=n[s];(!Me(nn(s,l),f)||!Me(l.methods,c)||!Me(l.events,u))&&(i=!1)}),i):!1}function tn(e){return ge(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function pc(e){if(ge(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&tn(n)}}return!1}function Dp(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(ge(e,!1)){if(t(e))return!0;const n=Zn(e);return t(n)}}catch{}return!1}function vp(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function Ap(e){return e?.topic}function Sp(e,t){let n=null;return ge(e?.publicKey,!1)||(n=$e("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function yo(e){let t=!0;return en(e)?e.length&&(t=e.every(n=>ge(n,!1))):t=!1,t}function wc(e,t,n){let r=null;return en(t)&&t.length?t.forEach(o=>{r||tn(o)||(r=dt("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):tn(e)||(r=dt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function yc(e,t,n){let r=null;return Object.entries(e).forEach(([o,i])=>{if(r)return;const s=wc(o,nn(o,i),`${t} ${n}`);s&&(r=s)}),r}function mc(e,t){let n=null;return en(e)?e.forEach(r=>{n||pc(r)||(n=dt("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=dt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Ec(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const o=mc(r?.accounts,`${t} namespace`);o&&(n=o)}),n}function Dc(e,t){let n=null;return yo(e?.methods)?yo(e?.events)||(n=dt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=dt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function mo(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const o=Dc(r,`${t}, namespace`);o&&(n=o)}),n}function _p(e,t,n){let r=null;if(e&&Nn(e)){const o=mo(e,t);o&&(r=o);const i=yc(e,t,n);i&&(r=i)}else r=$e("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function vc(e,t){let n=null;if(e&&Nn(e)){const r=mo(e,t);r&&(n=r);const o=Ec(e,t);o&&(n=o)}else n=$e("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Ac(e){return ge(e.protocol,!0)}function xp(e,t){let n=!1;return t&&!e?n=!0:e&&en(e)&&e.length&&e.forEach(r=>{n=Ac(r)}),n}function Bp(e){return typeof e=="number"}function Op(e){return typeof e<"u"&&typeof e!==null}function Cp(e){return!(!e||typeof e!="object"||!e.code||!In(e.code,!1)||!e.message||!ge(e.message,!1))}function Np(e){return!(Xe(e)||!ge(e.method,!1))}function Ip(e){return!(Xe(e)||Xe(e.result)&&Xe(e.error)||!In(e.id,!1)||!ge(e.jsonrpc,!1))}function Tp(e){return!(Xe(e)||!ge(e.name,!1))}function Up(e,t){return!(!tn(t)||!uc(e).includes(t))}function Rp(e,t,n){return ge(n,!1)?fc(e,t).includes(n):!1}function Fp(e,t,n){return ge(n,!1)?lc(e,t).includes(n):!1}function Sc(e,t,n){let r=null;const o=$p(e),i=Pp(t),s=Object.keys(o),a=Object.keys(i),c=_c(Object.keys(e)),u=_c(Object.keys(t)),f=c.filter(l=>!u.includes(l));return f.length&&(r=$e("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(t).toString()}`)),Me(s,a)||(r=$e("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(l=>{if(!l.includes(":")||r)return;const d=lt(t[l].accounts);d.includes(l)||(r=$e("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${l}
        Required: ${l}
        Approved: ${d.toString()}`))}),s.forEach(l=>{r||(Me(o[l].methods,i[l].methods)?Me(o[l].events,i[l].events)||(r=$e("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${l}`)):r=$e("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${l}`))}),r}function $p(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(o=>{t[o]={methods:e[n].methods,events:e[n].events}})}),t}function _c(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Pp(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=lt(e[n].accounts);r?.forEach(o=>{t[o]={accounts:e[n].accounts.filter(i=>i.includes(`${o}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function jp(e,t){return In(e,!1)&&e<=t.max&&e>=t.min}function Lp(){const e=rt();return new Promise(t=>{switch(e){case ce.browser:t(xc());break;case ce.reactNative:t(Bc());break;case ce.node:t(Oc());break;default:t(!0)}})}function xc(){return pt()&&navigator?.onLine}async function Bc(){if(Le()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function Oc(){return!0}function Mp(e){switch(rt()){case ce.browser:Cc(e);break;case ce.reactNative:Nc(e);break;case ce.node:break}}function Cc(e){!Le()&&pt()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function Nc(e){Le()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function zp(){var e;return pt()&&gt()?((e=gt())==null?void 0:e.visibilityState)==="visible":!0}const Eo={};class kp{static get(t){return Eo[t]}static set(t,n){Eo[t]=n}static delete(t){delete Eo[t]}}g.BASE10=lo,g.BASE16=fe,g.BASE64=It,g.BASE64URL=On,g.COLON=Yu,g.DEFAULT_DEPTH=Kn,g.EMPTY_SPACE=on,g.ENV_MAP=ce,g.INTERNAL_ERRORS=gc,g.MemoryStore=kp,g.ONE_THOUSAND=Gu,g.REACT_NATIVE_PRODUCT=Wo,g.RELAYER_DEFAULT_PROTOCOL=rc,g.SDK_ERRORS=bc,g.SDK_TYPE=Go,g.SLASH=Yo,g.TYPE_0=ho,g.TYPE_1=Ut,g.TYPE_2=Xt,g.UTF8=Tt,g.addResourceToRecap=Cs,g.appendToQueryString=Zo,g.assertType=rf,g.assignAbilityToActions=Ir,g.base64Decode=Bs,g.base64Encode=xs,g.buildApprovedNamespaces=wp,g.buildAuthObject=Xd,g.buildNamespacesFromAuth=yp,g.buildRecapStatement=Is,g.calcExpiry=pf,g.capitalize=ff,g.capitalizeWord=ri,g.createDelayedPromise=lf,g.createEncodedRecap=th,g.createExpiringPromise=df,g.createRecap=Os,g.decodeRecap=We,g.decodeTypeByte=ft,g.decodeTypeTwoEnvelope=J1,g.decrypt=Z1,g.deriveSymKey=K1,g.deserialize=Cn,g.encodeRecap=mn,g.encodeTypeByte=go,g.encodeTypeTwoEnvelope=X1,g.encrypt=G1,g.engineEvent=yf,g.enumify=uf,g.extractSolanaTransactionId=Vd,g.formatAccountId=Ao,g.formatAccountWithChain=jc,g.formatChainId=vo,g.formatDeeplinkUrl=oi,g.formatExpirerTarget=Yn,g.formatIdTarget=bf,g.formatMessage=vs,g.formatMessageContext=of,g.formatRelayParams=sc,g.formatRelayRpcUrl=tf,g.formatStatementFromRecap=Ur,g.formatTopicTarget=hf,g.formatUA=ei,g.formatUri=ap,g.fromBase64=Zn,g.generateKeyPair=H1,g.generateRandomBytes32=q1,g.getAccountsChains=lt,g.getAccountsFromNamespaces=Mc,g.getAddressFromAccount=So,g.getAddressesFromAccounts=Lc,g.getAppId=Ju,g.getAppMetadata=Xo,g.getBrowserOnlineStatus=xc,g.getChainFromAccount=_o,g.getChainsFromAccounts=xo,g.getChainsFromNamespace=nn,g.getChainsFromNamespaces=zc,g.getChainsFromRecap=oh,g.getChainsFromRequiredNamespaces=kc,g.getCommonValuesInArrays=Gn,g.getCryptoKeyFromKeyData=nc,g.getDecodedRecapFromResources=As,g.getDeepLink=Ef,g.getDidAddress=Nr,g.getDidAddressSegments=yn,g.getDidChainId=Es,g.getEnvironment=rt,g.getHttpUrl=nf,g.getInternalError=$e,g.getJavascriptID=Qo,g.getJavascriptOS=Jo,g.getLastItems=ni,g.getLinkModeURL=cp,g.getMethodsFromRecap=rh,g.getNamespacedDidChainId=Ds,g.getNamespacesChains=uc,g.getNamespacesEventsForChainId=lc,g.getNamespacesFromAccounts=hc,g.getNamespacesMethodsForChainId=fc,g.getNodeOnlineStatus=Oc,g.getReCapActions=_s,g.getReactNativeOnlineStatus=Bc,g.getRecapAbilitiesFromResource=eh,g.getRecapFromResources=En,g.getRecapResource=Ss,g.getRelayClientMetadata=ef,g.getRelayProtocolApi=ip,g.getRelayProtocolName=op,g.getRequiredNamespacesFromNamespaces=pp,g.getSdkError=dt,g.getSearchParamFromURL=Df,g.getUniqueValues=Fn,g.handleDeeplinkRedirect=mf,g.hasOverlap=Me,g.hashEthereumMessage=Or,g.hashKey=W1,g.hashMessage=Y1,g.isAndroid=Zu,g.isAppVisible=zp,g.isBrowser=pt,g.isCaipNamespace=wo,g.isConformingNamespaces=Sc,g.isExpired=wf,g.isIframe=ai,g.isIos=Xu,g.isNode=Wn,g.isOnline=Lp,g.isProposalStruct=vp,g.isReactNative=Le,g.isRecap=Tr,g.isSessionCompatible=Ep,g.isSessionStruct=Ap,g.isTelegram=si,g.isTestRun=Af,g.isTypeOneEnvelope=ep,g.isTypeTwoEnvelope=tp,g.isUndefined=Xe,g.isValidAccountId=pc,g.isValidAccounts=mc,g.isValidActions=Dc,g.isValidArray=en,g.isValidChainId=tn,g.isValidChains=wc,g.isValidController=Sp,g.isValidEip1271Signature=ps,g.isValidEip191Signature=gs,g.isValidErrorReason=Cp,g.isValidEvent=Tp,g.isValidId=Bp,g.isValidNamespaceAccounts=Ec,g.isValidNamespaceActions=mo,g.isValidNamespaceChains=yc,g.isValidNamespaceMethodsOrEvents=yo,g.isValidNamespaces=vc,g.isValidNamespacesChainId=Up,g.isValidNamespacesEvent=Fp,g.isValidNamespacesRequest=Rp,g.isValidNumber=In,g.isValidObject=Nn,g.isValidParams=Op,g.isValidRecap=Be,g.isValidRelay=Ac,g.isValidRelays=xp,g.isValidRequest=Np,g.isValidRequestExpiry=jp,g.isValidRequiredNamespaces=_p,g.isValidResponse=Ip,g.isValidString=ge,g.isValidUrl=Dp,g.mapEntries=cf,g.mapToObj=sf,g.mergeArrays=we,g.mergeEncodedRecaps=nh,g.mergeRecaps=Ns,g.mergeRequiredAndOptionalNamespaces=mp,g.normalizeNamespaces=Qt,g.objToMap=af,g.openDeeplink=ii,g.parseAccountId=Rn,g.parseChainId=Un,g.parseContextNames=ti,g.parseExpirerTarget=gf,g.parseNamespaceKey=dc,g.parseRelayParams=oc,g.parseTopic=ic,g.parseUri=sp,g.populateAppMetadata=Qu,g.populateAuthPayload=Jd,g.recapHasResource=Qd,g.serialize=po,g.sleep=Sf,g.subscribeToBrowserNetworkChange=Cc,g.subscribeToNetworkChange=Mp,g.subscribeToReactNativeNetworkChange=Nc,g.toBase64=ci,g.uuidv4=vf,g.validateDecoding=Q1,g.validateEncoding=tc,g.validateSignedCacao=Zd,g.verifyP256Jwt=np,g.verifySignature=bs,Object.defineProperty(g,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
