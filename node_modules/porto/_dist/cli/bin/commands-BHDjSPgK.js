import"./utils-DlSZ4OeX.js";import{Field as e,createCurve as t,secp256k1 as n,sha256 as r,sha384 as i,sha512 as a}from"./secp256k1-chhE2qCh.js";import{AbiDecodingZeroDataError as o,AtomicReadyWalletRejectedUpgradeError as s,AtomicityNotSupportedError as c,BaseError as l,BaseError$1 as u,BundleTooLargeError as d,BytesSizeMismatchError as f,CallExecutionError as p,ChainDisconnectedError as m,ContractFunctionExecutionError as h,ContractFunctionRevertedError as g,ContractFunctionZeroDataError as _,DuplicateIdError as v,ExecutionRevertedError as y,FeeCapTooHighError as ee,HttpRequestError as te,IntegerOutOfRangeError as ne,InternalRpcError as re,InvalidAbiItemError as ie,InvalidAbiParametersError as ae,InvalidAddressError as b,InvalidChainIdError as oe,InvalidInputRpcError as se,InvalidLegacyVError as ce,InvalidParamsRpcError as le,InvalidRequestRpcError as ue,InvalidSerializableTransactionError as de,InvalidStorageKeySizeError as fe,JsonRpcVersionUnsupportedError as pe,LimitExceededRpcError as me,LruMap as he,MethodNotFoundRpcError as ge,MethodNotSupportedRpcError as _e,ParseRpcError as ve,ProviderDisconnectedError as ye,RawContractError as be,ResourceNotFoundRpcError as xe,ResourceUnavailableRpcError as Se,RpcRequestError as Ce,SwitchChainError as we,TimeoutError as Te,TipAboveFeeCapError as Ee,TransactionRejectedRpcError as De,UnauthorizedProviderError as Oe,UnknownBundleIdError as ke,UnknownRpcError as Ae,UnsupportedChainIdError as je,UnsupportedNonOptionalCapabilityError as Me,UnsupportedProviderMethodError as Ne,UserRejectedRequestError as Pe,bytesRegex as Fe,bytesToHex as Ie,call as Le,checksumAddress as Re,concat as ze,concat$1 as x,concatHex as Be,createBatchScheduler as Ve,createCursor as He,decodeErrorResult as Ue,decodeFunctionResult as We,defineFormatter as Ge,defineTransactionRequest as Ke,encodeAbiParameters as qe,encodeDeployData as Je,encodeFunctionData as Ye,erc1271Abi as Xe,erc6492SignatureValidatorAbi as Ze,erc6492SignatureValidatorByteCode as Qe,formatAbiItem$1 as $e,formatAbiParameters as et,from as tt,from$1 as nt,fromArray as rt,fromBoolean as it,fromBytes as S,fromHex as at,fromNumber as C,fromString as w,fromString$1 as ot,getAddress as st,hexToBigInt as T,hexToBool as ct,hexToBytes as lt,hexToNumber as ut,integerRegex as dt,isAddress as E,isAddressEqual as ft,isHex as pt,isStructSignature as mt,keccak256 as ht,keccak_256 as gt,maxUint256 as _t,modifiers as vt,multicall3Abi as yt,multicall3Bytecode as bt,numberToHex as D,padLeft as xt,padRight as St,parse as Ct,parseAbiParameter as wt,parseAccount as Tt,parseSignature as Et,parseStructs as Dt,size as Ot,size$1 as O,size$2 as kt,slice as At,slice$1 as k,slice$2 as jt,sliceHex as Mt,splitParameters as Nt,stringToHex as Pt,stringify as Ft,stringify$1 as It,toBigInt as Lt,toBigInt$1 as Rt,toBoolean as zt,toBytes as Bt,toHex as A,toHex$1 as Vt,toNumber as Ht,toNumber$1 as Ut,toString as Wt,trim as Gt,trimLeft as Kt,trimLeft$1 as qt,validate as Jt,validate$1 as Yt,withResolvers as Xt}from"./isAddressEqual-CFvy5LFG.js";import*as Zt from"node:fs";import*as Qt from"node:os";import*as $t from"node:path";import{setTimeout as en}from"node:timers/promises";import{stripVTControlCharacters as tn}from"node:util";import nn,{stdin as rn,stdout as an}from"node:process";import*as on from"node:readline";import sn from"node:readline";import{Writable as cn}from"node:stream";import*as j from"zod/mini";import{z as M}from"zod/mini";import*as ln from"node:url";import*as un from"node:http";import{devtools as dn,persist as fn,subscribeWithSelector as pn}from"zustand/middleware";import{createStore as mn}from"zustand/vanilla";import*as hn from"mipd";import{createStore as gn,del as _n,get as vn,set as yn}from"idb-keyval";var bn=Object.create,xn=Object.defineProperty,Sn=Object.getOwnPropertyDescriptor,Cn=Object.getOwnPropertyNames,wn=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty,En=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dn=e=>{let t={};for(var n in e)xn(t,n,{get:e[n],enumerable:!0});return t},On=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(var i=Cn(t),a=0,o=i.length,s;a<o;a++)s=i[a],!Tn.call(e,s)&&s!==n&&xn(e,s,{get:(e=>t[e]).bind(null,s),enumerable:!(r=Sn(t,s))||r.enumerable});return e},kn=(e,t,n)=>(n=e==null?{}:bn(wn(e)),On(t||!e||!e.__esModule?xn(n,`default`,{value:e,enumerable:!0}):n,e));function An(e){let t;if(typeof e==`string`)t=Et(e);else{let n=Dt(e),r=e.length;for(let i=0;i<r;i++){let r=e[i];if(!mt(r)){t=Et(r,n);break}}}if(!t)throw new ie({signature:e});return t}function jn(e){let t=[];if(typeof e==`string`){let n=Nt(e),r=n.length;for(let e=0;e<r;e++)t.push(wt(n[e],{modifiers:vt}))}else{let n=Dt(e),r=e.length;for(let i=0;i<r;i++){let r=e[i];if(mt(r))continue;let a=Nt(r),o=a.length;for(let e=0;e<o;e++)t.push(wt(a[e],{modifiers:vt,structs:n}))}}if(t.length===0)throw new ae({params:e});return t}var Mn=En(((exports,t)=>{let n={to(e,t){return t?`[${t+1};${e+1}H`:`[${e+1}G`},move(e,t){let n=``;return e<0?n+=`[${-e}D`:e>0&&(n+=`[${e}C`),t<0?n+=`[${-t}A`:t>0&&(n+=`[${t}B`),n},up:(e=1)=>`[${e}A`,down:(e=1)=>`[${e}B`,forward:(e=1)=>`[${e}C`,backward:(e=1)=>`[${e}D`,nextLine:(e=1)=>`\x1B[E`.repeat(e),prevLine:(e=1)=>`\x1B[F`.repeat(e),left:`\x1B[G`,hide:`\x1B[?25l`,show:`\x1B[?25h`,save:`\x1B7`,restore:`\x1B8`};t.exports={cursor:n,scroll:{up:(e=1)=>`\x1B[S`.repeat(e),down:(e=1)=>`\x1B[T`.repeat(e)},erase:{screen:`\x1B[2J`,up:(e=1)=>`\x1B[1J`.repeat(e),down:(e=1)=>`\x1B[J`.repeat(e),line:`\x1B[2K`,lineEnd:`\x1B[K`,lineStart:`\x1B[1K`,lines(e){let t=``;for(let r=0;r<e;r++)t+=this.line+(r<e-1?n.up():``);return e&&(t+=n.left),t}},beep:`\x07`}})),Nn=En(((exports,t)=>{let n=process||{},r=n.argv||[],i=n.env||{},a=!(i.NO_COLOR||r.includes(`--no-color`))&&(!!i.FORCE_COLOR||r.includes(`--color`)||n.platform===`win32`||(n.stdout||{}).isTTY&&i.TERM!==`dumb`||!!i.CI),o=(e,t,n=e)=>r=>{let i=``+r,a=i.indexOf(t,e.length);return~a?e+s(i,t,n,a)+t:e+i+t},s=(e,t,n,r)=>{let i=``,a=0;do i+=e.substring(a,r)+n,a=r+t.length,r=e.indexOf(t,a);while(~r);return i+e.substring(a)},c=(e=a)=>{let t=e?o:()=>String;return{isColorSupported:e,reset:t(`\x1B[0m`,`\x1B[0m`),bold:t(`\x1B[1m`,`\x1B[22m`,`\x1B[22m\x1B[1m`),dim:t(`\x1B[2m`,`\x1B[22m`,`\x1B[22m\x1B[2m`),italic:t(`\x1B[3m`,`\x1B[23m`),underline:t(`\x1B[4m`,`\x1B[24m`),inverse:t(`\x1B[7m`,`\x1B[27m`),hidden:t(`\x1B[8m`,`\x1B[28m`),strikethrough:t(`\x1B[9m`,`\x1B[29m`),black:t(`\x1B[30m`,`\x1B[39m`),red:t(`\x1B[31m`,`\x1B[39m`),green:t(`\x1B[32m`,`\x1B[39m`),yellow:t(`\x1B[33m`,`\x1B[39m`),blue:t(`\x1B[34m`,`\x1B[39m`),magenta:t(`\x1B[35m`,`\x1B[39m`),cyan:t(`\x1B[36m`,`\x1B[39m`),white:t(`\x1B[37m`,`\x1B[39m`),gray:t(`\x1B[90m`,`\x1B[39m`),bgBlack:t(`\x1B[40m`,`\x1B[49m`),bgRed:t(`\x1B[41m`,`\x1B[49m`),bgGreen:t(`\x1B[42m`,`\x1B[49m`),bgYellow:t(`\x1B[43m`,`\x1B[49m`),bgBlue:t(`\x1B[44m`,`\x1B[49m`),bgMagenta:t(`\x1B[45m`,`\x1B[49m`),bgCyan:t(`\x1B[46m`,`\x1B[49m`),bgWhite:t(`\x1B[47m`,`\x1B[49m`),blackBright:t(`\x1B[90m`,`\x1B[39m`),redBright:t(`\x1B[91m`,`\x1B[39m`),greenBright:t(`\x1B[92m`,`\x1B[39m`),yellowBright:t(`\x1B[93m`,`\x1B[39m`),blueBright:t(`\x1B[94m`,`\x1B[39m`),magentaBright:t(`\x1B[95m`,`\x1B[39m`),cyanBright:t(`\x1B[96m`,`\x1B[39m`),whiteBright:t(`\x1B[97m`,`\x1B[39m`),bgBlackBright:t(`\x1B[100m`,`\x1B[49m`),bgRedBright:t(`\x1B[101m`,`\x1B[49m`),bgGreenBright:t(`\x1B[102m`,`\x1B[49m`),bgYellowBright:t(`\x1B[103m`,`\x1B[49m`),bgBlueBright:t(`\x1B[104m`,`\x1B[49m`),bgMagentaBright:t(`\x1B[105m`,`\x1B[49m`),bgCyanBright:t(`\x1B[106m`,`\x1B[49m`),bgWhiteBright:t(`\x1B[107m`,`\x1B[49m`)}};t.exports=c(),t.exports.createColors=c})),N=kn(Mn(),1);Nn();function Pn({onlyFirst:e=!1}={}){let t=[`[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))`,`(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))`].join(`|`);return new RegExp(t,e?void 0:`g`)}const Fn=Pn();function In(e){if(typeof e!=`string`)throw TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Fn,``)}function Ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}var Rn={exports:{}};(function(e){var t={};e.exports=t,t.eastAsianWidth=function(e){var t=e.charCodeAt(0),n=e.length==2?e.charCodeAt(1):0,r=t;return 55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t&=1023,n&=1023,r=t<<10|n,r+=65536),r==12288||65281<=r&&r<=65376||65504<=r&&r<=65510?`F`:r==8361||65377<=r&&r<=65470||65474<=r&&r<=65479||65482<=r&&r<=65487||65490<=r&&r<=65495||65498<=r&&r<=65500||65512<=r&&r<=65518?`H`:4352<=r&&r<=4447||4515<=r&&r<=4519||4602<=r&&r<=4607||9001<=r&&r<=9002||11904<=r&&r<=11929||11931<=r&&r<=12019||12032<=r&&r<=12245||12272<=r&&r<=12283||12289<=r&&r<=12350||12353<=r&&r<=12438||12441<=r&&r<=12543||12549<=r&&r<=12589||12593<=r&&r<=12686||12688<=r&&r<=12730||12736<=r&&r<=12771||12784<=r&&r<=12830||12832<=r&&r<=12871||12880<=r&&r<=13054||13056<=r&&r<=19903||19968<=r&&r<=42124||42128<=r&&r<=42182||43360<=r&&r<=43388||44032<=r&&r<=55203||55216<=r&&r<=55238||55243<=r&&r<=55291||63744<=r&&r<=64255||65040<=r&&r<=65049||65072<=r&&r<=65106||65108<=r&&r<=65126||65128<=r&&r<=65131||110592<=r&&r<=110593||127488<=r&&r<=127490||127504<=r&&r<=127546||127552<=r&&r<=127560||127568<=r&&r<=127569||131072<=r&&r<=194367||177984<=r&&r<=196605||196608<=r&&r<=262141?`W`:32<=r&&r<=126||162<=r&&r<=163||165<=r&&r<=166||r==172||r==175||10214<=r&&r<=10221||10629<=r&&r<=10630?`Na`:r==161||r==164||167<=r&&r<=168||r==170||173<=r&&r<=174||176<=r&&r<=180||182<=r&&r<=186||188<=r&&r<=191||r==198||r==208||215<=r&&r<=216||222<=r&&r<=225||r==230||232<=r&&r<=234||236<=r&&r<=237||r==240||242<=r&&r<=243||247<=r&&r<=250||r==252||r==254||r==257||r==273||r==275||r==283||294<=r&&r<=295||r==299||305<=r&&r<=307||r==312||319<=r&&r<=322||r==324||328<=r&&r<=331||r==333||338<=r&&r<=339||358<=r&&r<=359||r==363||r==462||r==464||r==466||r==468||r==470||r==472||r==474||r==476||r==593||r==609||r==708||r==711||713<=r&&r<=715||r==717||r==720||728<=r&&r<=731||r==733||r==735||768<=r&&r<=879||913<=r&&r<=929||931<=r&&r<=937||945<=r&&r<=961||963<=r&&r<=969||r==1025||1040<=r&&r<=1103||r==1105||r==8208||8211<=r&&r<=8214||8216<=r&&r<=8217||8220<=r&&r<=8221||8224<=r&&r<=8226||8228<=r&&r<=8231||r==8240||8242<=r&&r<=8243||r==8245||r==8251||r==8254||r==8308||r==8319||8321<=r&&r<=8324||r==8364||r==8451||r==8453||r==8457||r==8467||r==8470||8481<=r&&r<=8482||r==8486||r==8491||8531<=r&&r<=8532||8539<=r&&r<=8542||8544<=r&&r<=8555||8560<=r&&r<=8569||r==8585||8592<=r&&r<=8601||8632<=r&&r<=8633||r==8658||r==8660||r==8679||r==8704||8706<=r&&r<=8707||8711<=r&&r<=8712||r==8715||r==8719||r==8721||r==8725||r==8730||8733<=r&&r<=8736||r==8739||r==8741||8743<=r&&r<=8748||r==8750||8756<=r&&r<=8759||8764<=r&&r<=8765||r==8776||r==8780||r==8786||8800<=r&&r<=8801||8804<=r&&r<=8807||8810<=r&&r<=8811||8814<=r&&r<=8815||8834<=r&&r<=8835||8838<=r&&r<=8839||r==8853||r==8857||r==8869||r==8895||r==8978||9312<=r&&r<=9449||9451<=r&&r<=9547||9552<=r&&r<=9587||9600<=r&&r<=9615||9618<=r&&r<=9621||9632<=r&&r<=9633||9635<=r&&r<=9641||9650<=r&&r<=9651||9654<=r&&r<=9655||9660<=r&&r<=9661||9664<=r&&r<=9665||9670<=r&&r<=9672||r==9675||9678<=r&&r<=9681||9698<=r&&r<=9701||r==9711||9733<=r&&r<=9734||r==9737||9742<=r&&r<=9743||9748<=r&&r<=9749||r==9756||r==9758||r==9792||r==9794||9824<=r&&r<=9825||9827<=r&&r<=9829||9831<=r&&r<=9834||9836<=r&&r<=9837||r==9839||9886<=r&&r<=9887||9918<=r&&r<=9919||9924<=r&&r<=9933||9935<=r&&r<=9953||r==9955||9960<=r&&r<=9983||r==10045||r==10071||10102<=r&&r<=10111||11093<=r&&r<=11097||12872<=r&&r<=12879||57344<=r&&r<=63743||65024<=r&&r<=65039||r==65533||127232<=r&&r<=127242||127248<=r&&r<=127277||127280<=r&&r<=127337||127344<=r&&r<=127386||917760<=r&&r<=917999||983040<=r&&r<=1048573||1048576<=r&&r<=1114109?`A`:`N`},t.characterLength=function(e){var t=this.eastAsianWidth(e);return t==`F`||t==`W`||t==`A`?2:1};function n(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}t.length=function(e){for(var t=n(e),r=0,i=0;i<t.length;i++)r+=this.characterLength(t[i]);return r},t.slice=function(e,r,i){textLen=t.length(e),r=r||0,i=i||1,r<0&&(r=textLen+r),i<0&&(i=textLen+i);for(var a=``,o=0,s=n(e),c=0;c<s.length;c++){var l=s[c],u=t.length(l);if(o>=r-(u==2?1:0))if(o+u<=i)a+=l;else break;o+=u}return a}})(Rn);var zn=Rn.exports;const Bn=Ln(zn),Vn=Ln(function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g});function Hn(e,t={}){if(typeof e!=`string`||e.length===0||(t={ambiguousIsNarrow:!0,...t},e=In(e),e.length===0))return 0;e=e.replace(Vn(),`  `);let n=t.ambiguousIsNarrow?1:2,r=0;for(let t of e){let e=t.codePointAt(0);if(e<=31||e>=127&&e<=159||e>=768&&e<=879)continue;switch(Bn.eastAsianWidth(t)){case`F`:case`W`:r+=2;break;case`A`:r+=n;break;default:r+=1}}return r}const Un=(e=0)=>t=>`\x1B[${t+e}m`,Wn=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Gn=(e=0)=>(t,n,r)=>`\x1B[${38+e};2;${t};${n};${r}m`,P={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(P.modifier);const Kn=Object.keys(P.color),qn=Object.keys(P.bgColor);[...Kn,...qn];function Jn(){let e=new Map;for(let[t,n]of Object.entries(P)){for(let[t,r]of Object.entries(n))P[t]={open:`\x1B[${r[0]}m`,close:`\x1B[${r[1]}m`},n[t]=P[t],e.set(r[0],r[1]);Object.defineProperty(P,t,{value:n,enumerable:!1})}return Object.defineProperty(P,`codes`,{value:e,enumerable:!1}),P.color.close=`\x1B[39m`,P.bgColor.close=`\x1B[49m`,P.color.ansi=Un(),P.color.ansi256=Wn(),P.color.ansi16m=Gn(),P.bgColor.ansi=Un(10),P.bgColor.ansi256=Wn(10),P.bgColor.ansi16m=Gn(10),Object.defineProperties(P,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:e=>{let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[n]=t;n.length===3&&(n=[...n].map(e=>e+e).join(``));let r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,r&255]},enumerable:!1},hexToAnsi256:{value:e=>P.rgbToAnsi256(...P.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value:e=>{if(e<8)return 30+e;if(e<16)return 90+(e-8);let t,n,r;if(e>=232)t=((e-232)*10+8)/255,n=t,r=t;else{e-=16;let i=e%36;t=Math.floor(e/36)/5,n=Math.floor(i/6)/5,r=i%6/5}let i=Math.max(t,n,r)*2;if(i===0)return 30;let a=30+(Math.round(r)<<2|Math.round(n)<<1|Math.round(t));return i===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(e,t,n)=>P.ansi256ToAnsi(P.rgbToAnsi256(e,t,n)),enumerable:!1},hexToAnsi:{value:e=>P.ansi256ToAnsi(P.hexToAnsi256(e)),enumerable:!1}}),P}const Yn=Jn(),Xn=new Set([`\x1B`,`Â›`]),Zn=`]8;;`,Qn=e=>`${Xn.values().next().value}[${e}m`,$n=e=>`${Xn.values().next().value}${Zn}${e}`,er=e=>e.split(` `).map(e=>Hn(e)),tr=(e,t,n)=>{let r=[...t],i=!1,a=!1,o=Hn(In(e[e.length-1]));for(let[t,s]of r.entries()){let c=Hn(s);if(o+c<=n?e[e.length-1]+=s:(e.push(s),o=0),Xn.has(s)&&(i=!0,a=r.slice(t+1).join(``).startsWith(Zn)),i){a?s===`\x07`&&(i=!1,a=!1):s===`m`&&(i=!1);continue}o+=c,o===n&&t<r.length-1&&(e.push(``),o=0)}!o&&e[e.length-1].length>0&&e.length>1&&(e[e.length-2]+=e.pop())},nr=e=>{let t=e.split(` `),n=t.length;for(;n>0&&!(Hn(t[n-1])>0);)n--;return n===t.length?e:t.slice(0,n).join(` `)+t.slice(n).join(``)},rr=(e,t,n={})=>{if(n.trim!==!1&&e.trim()===``)return``;let r=``,i,a,o=er(e),s=[``];for(let[r,i]of e.split(` `).entries()){n.trim!==!1&&(s[s.length-1]=s[s.length-1].trimStart());let e=Hn(s[s.length-1]);if(r!==0&&(e>=t&&(n.wordWrap===!1||n.trim===!1)&&(s.push(``),e=0),(e>0||n.trim===!1)&&(s[s.length-1]+=` `,e++)),n.hard&&o[r]>t){let n=t-e,a=1+Math.floor((o[r]-n-1)/t);Math.floor((o[r]-1)/t)<a&&s.push(``),tr(s,i,t);continue}if(e+o[r]>t&&e>0&&o[r]>0){if(n.wordWrap===!1&&e<t){tr(s,i,t);continue}s.push(``)}if(e+o[r]>t&&n.wordWrap===!1){tr(s,i,t);continue}s[s.length-1]+=i}n.trim!==!1&&(s=s.map(e=>nr(e)));let c=[...s.join(`
`)];for(let[e,t]of c.entries()){if(r+=t,Xn.has(t)){let{groups:t}=RegExp(`(?:\\[(?<code>\\d+)m|\\${Zn}(?<uri>.*))`).exec(c.slice(e).join(``))||{groups:{}};if(t.code!==void 0){let e=Number.parseFloat(t.code);i=e===39?void 0:e}else t.uri!==void 0&&(a=t.uri.length===0?void 0:t.uri)}let n=Yn.codes.get(Number(i));c[e+1]===`
`?(a&&(r+=$n(``)),i&&n&&(r+=Qn(n))):t===`
`&&(i&&n&&(r+=Qn(i)),a&&(r+=$n(a)))}return r};function ir(e,t,n){return String(e).normalize().replace(/\r\n/g,`
`).split(`
`).map(e=>rr(e,t,n)).join(`
`)}const ar=[`up`,`down`,`left`,`right`,`space`,`enter`,`cancel`],or={actions:new Set(ar),aliases:new Map([[`k`,`up`],[`j`,`down`],[`h`,`left`],[`l`,`right`],[``,`cancel`],[`escape`,`cancel`]])};function sr(e,t){if(typeof e==`string`)return or.aliases.get(e)===t;for(let n of e)if(n!==void 0&&sr(n,t))return!0;return!1}function cr(e,t){if(e===t)return;let n=e.split(`
`),r=t.split(`
`),i=[];for(let e=0;e<Math.max(n.length,r.length);e++)n[e]!==r[e]&&i.push(e);return i}const lr=globalThis.process.platform.startsWith(`win`),ur=Symbol(`clack:cancel`);function dr(e,t){let n=e;n.isTTY&&n.setRawMode(t)}function fr({input:e=rn,output:t=an,overwrite:n=!0,hideCursor:r=!0}={}){let i=on.createInterface({input:e,output:t,prompt:``,tabSize:1});on.emitKeypressEvents(e,i),e.isTTY&&e.setRawMode(!0);let a=(i,{name:o,sequence:s})=>{if(sr([String(i),o,s],`cancel`)){r&&t.write(N.cursor.show),process.exit(0);return}if(!n)return;let c=o===`return`?0:-1,l=o===`return`?-1:0;on.moveCursor(t,c,l,()=>{on.clearLine(t,1,()=>{e.once(`keypress`,a)})})};return r&&t.write(N.cursor.hide),e.once(`keypress`,a),()=>{e.off(`keypress`,a),r&&t.write(N.cursor.show),e.isTTY&&!lr&&e.setRawMode(!1),i.terminal=!1,i.close()}}var pr=Object.defineProperty,mr=(e,t,n)=>t in e?pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t,n)=>(mr(e,typeof t==`symbol`?t:t+``,n),n),hr=class{constructor(e,t=!0){F(this,`input`),F(this,`output`),F(this,`_abortSignal`),F(this,`rl`),F(this,`opts`),F(this,`_render`),F(this,`_track`,!1),F(this,`_prevFrame`,``),F(this,`_subscribers`,new Map),F(this,`_cursor`,0),F(this,`state`,`initial`),F(this,`error`,``),F(this,`value`);let{input:n=rn,output:r=an,render:i,signal:a,...o}=e;this.opts=o,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=i.bind(this),this._track=t,this._abortSignal=a,this.input=n,this.output=r}unsubscribe(){this._subscribers.clear()}setSubscriber(e,t){let n=this._subscribers.get(e)??[];n.push(t),this._subscribers.set(e,n)}on(e,t){this.setSubscriber(e,{cb:t})}once(e,t){this.setSubscriber(e,{cb:t,once:!0})}emit(e,...t){let n=this._subscribers.get(e)??[],r=[];for(let e of n)e.cb(...t),e.once&&r.push(()=>n.splice(n.indexOf(e),1));for(let e of r)e()}prompt(){return new Promise((e,t)=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state=`cancel`,this.close(),e(ur);this._abortSignal.addEventListener(`abort`,()=>{this.state=`cancel`,this.close()},{once:!0})}let n=new cn;n._write=(e,t,n)=>{this._track&&(this.value=this.rl?.line.replace(/\t/g,``),this._cursor=this.rl?.cursor??0,this.emit(`value`,this.value)),n()},this.input.pipe(n),this.rl=sn.createInterface({input:this.input,output:n,tabSize:2,prompt:``,escapeCodeTimeout:50,terminal:!0}),sn.emitKeypressEvents(this.input,this.rl),this.rl.prompt(),this.opts.initialValue!==void 0&&this._track&&this.rl.write(this.opts.initialValue),this.input.on(`keypress`,this.onKeypress),dr(this.input,!0),this.output.on(`resize`,this.render),this.render(),this.once(`submit`,()=>{this.output.write(N.cursor.show),this.output.off(`resize`,this.render),dr(this.input,!1),e(this.value)}),this.once(`cancel`,()=>{this.output.write(N.cursor.show),this.output.off(`resize`,this.render),dr(this.input,!1),e(ur)})})}onKeypress(e,t){if(this.state===`error`&&(this.state=`active`),t?.name&&(!this._track&&or.aliases.has(t.name)&&this.emit(`cursor`,or.aliases.get(t.name)),or.actions.has(t.name)&&this.emit(`cursor`,t.name)),e&&(e.toLowerCase()===`y`||e.toLowerCase()===`n`)&&this.emit(`confirm`,e.toLowerCase()===`y`),e===`	`&&this.opts.placeholder&&(this.value||(this.rl?.write(this.opts.placeholder),this.emit(`value`,this.opts.placeholder))),e&&this.emit(`key`,e.toLowerCase()),t?.name===`return`){if(this.opts.validate){let e=this.opts.validate(this.value);e&&(this.error=e instanceof Error?e.message:e,this.state=`error`,this.rl?.write(this.value))}this.state!==`error`&&(this.state=`submit`)}sr([e,t?.name,t?.sequence],`cancel`)&&(this.state=`cancel`),(this.state===`submit`||this.state===`cancel`)&&this.emit(`finalize`),this.render(),(this.state===`submit`||this.state===`cancel`)&&this.close()}close(){this.input.unpipe(),this.input.removeListener(`keypress`,this.onKeypress),this.output.write(`
`),dr(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let e=ir(this._prevFrame,process.stdout.columns,{hard:!0}).split(`
`).length-1;this.output.write(N.cursor.move(-999,e*-1))}render(){let e=ir(this._render(this)??``,process.stdout.columns,{hard:!0});if(e!==this._prevFrame){if(this.state===`initial`)this.output.write(N.cursor.hide);else{let t=cr(this._prevFrame,e);if(this.restoreCursor(),t&&t?.length===1){let n=t[0];this.output.write(N.cursor.move(0,n)),this.output.write(N.erase.lines(1));let r=e.split(`
`);this.output.write(r[n]),this._prevFrame=e,this.output.write(N.cursor.move(0,r.length-n-1));return}if(t&&t?.length>1){let n=t[0];this.output.write(N.cursor.move(0,n)),this.output.write(N.erase.down());let r=e.split(`
`).slice(n);this.output.write(r.join(`
`)),this._prevFrame=e;return}this.output.write(N.erase.down())}this.output.write(e),this.state===`initial`&&(this.state=`active`),this._prevFrame=e}}},gr=class extends hr{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(e){super(e,!1),this.value=!!e.initialValue,this.on(`value`,()=>{this.value=this._value}),this.on(`confirm`,e=>{this.output.write(N.cursor.move(0,-1)),this.value=e,this.state=`submit`,this.close()}),this.on(`cursor`,()=>{this.value=!this.value})}};Object.defineProperty,Object.defineProperty,Object.defineProperty,Object.defineProperty,Object.defineProperty;var I=kn(Nn(),1),_r=kn(Mn(),1);function vr(){return nn.platform===`win32`?!!nn.env.CI||!!nn.env.WT_SESSION||!!nn.env.TERMINUS_SUBLIME||nn.env.ConEmuTask===`{cmd::Cmder}`||nn.env.TERM_PROGRAM===`Terminus-Sublime`||nn.env.TERM_PROGRAM===`vscode`||nn.env.TERM===`xterm-256color`||nn.env.TERM===`alacritty`||nn.env.TERMINAL_EMULATOR===`JetBrains-JediTerm`:nn.env.TERM!==`linux`}const yr=vr(),L=(e,t)=>yr?e:t,br=L(`â—†`,`*`),xr=L(`â– `,`x`),Sr=L(`â–²`,`x`),Cr=L(`â—‡`,`o`),wr=L(`â”Œ`,`T`),R=L(`â”‚`,`|`),Tr=L(`â””`,`â€”`),Er=L(`â—`,`>`),Dr=L(`â—‹`,` `),Or=L(`â—`,`â€¢`),kr=L(`â—†`,`*`),Ar=L(`â–²`,`!`),jr=L(`â– `,`x`),Mr=e=>{switch(e){case`initial`:case`active`:return I.default.cyan(br);case`cancel`:return I.default.red(xr);case`error`:return I.default.yellow(Sr);case`submit`:return I.default.green(Cr)}},Nr=e=>{let t=e.active??`Yes`,n=e.inactive??`No`;return new gr({active:t,inactive:n,initialValue:e.initialValue??!0,render(){let r=`${I.default.gray(R)}
${Mr(this.state)}  ${e.message}
`,i=this.value?t:n;switch(this.state){case`submit`:return`${r}${I.default.gray(R)}  ${I.default.dim(i)}`;case`cancel`:return`${r}${I.default.gray(R)}  ${I.default.strikethrough(I.default.dim(i))}
${I.default.gray(R)}`;default:return`${r}${I.default.cyan(R)}  ${this.value?`${I.default.green(Er)} ${t}`:`${I.default.dim(Dr)} ${I.default.dim(t)}`} ${I.default.dim(`/`)} ${this.value?`${I.default.dim(Dr)} ${I.default.dim(n)}`:`${I.default.green(Er)} ${n}`}
${I.default.cyan(Tr)}
`}}}).prompt()},Pr=(e=``)=>{process.stdout.write(`${I.default.gray(wr)}  ${e}
`)},z={message:(e=``,{symbol:t=I.default.gray(R)}={})=>{let n=[`${I.default.gray(R)}`];if(e){let[r,...i]=e.split(`
`);n.push(`${t}  ${r}`,...i.map(e=>`${I.default.gray(R)}  ${e}`))}process.stdout.write(`${n.join(`
`)}
`)},info:e=>{z.message(e,{symbol:I.default.blue(Or)})},success:e=>{z.message(e,{symbol:I.default.green(kr)})},step:e=>{z.message(e,{symbol:I.default.green(Cr)})},warn:e=>{z.message(e,{symbol:I.default.yellow(Ar)})},warning:e=>{z.warn(e)},error:e=>{z.message(e,{symbol:I.default.red(jr)})}},Fr=`${I.default.gray(R)}  `,Ir={message:async(e,{symbol:t=I.default.gray(R)}={})=>{process.stdout.write(`${I.default.gray(R)}
${t}  `);let n=3;for await(let t of e){t=t.replace(/\n/g,`
${Fr}`),t.includes(`
`)&&(n=3+tn(t.slice(t.lastIndexOf(`
`))).length);let e=tn(t).length;n+e<process.stdout.columns?(n+=e,process.stdout.write(t)):(process.stdout.write(`
${Fr}${t.trimStart()}`),n=3+tn(t.trimStart()).length)}process.stdout.write(`
`)},info:e=>Ir.message(e,{symbol:I.default.blue(Or)}),success:e=>Ir.message(e,{symbol:I.default.green(kr)}),step:e=>Ir.message(e,{symbol:I.default.green(Cr)}),warn:e=>Ir.message(e,{symbol:I.default.yellow(Ar)}),warning:e=>Ir.warn(e),error:e=>Ir.message(e,{symbol:I.default.red(jr)})},Lr=({indicator:e=`dots`}={})=>{let t=yr?[`â—’`,`â—`,`â—“`,`â—‘`]:[`â€¢`,`o`,`O`,`0`],n=yr?80:120,r=process.env.CI===`true`,i,a,o=!1,s=``,c,l=performance.now(),u=e=>{o&&y(e>1?`Something went wrong`:`Canceled`,e)},d=()=>u(2),f=()=>u(1),p=()=>{process.on(`uncaughtExceptionMonitor`,d),process.on(`unhandledRejection`,d),process.on(`SIGINT`,f),process.on(`SIGTERM`,f),process.on(`exit`,u)},m=()=>{process.removeListener(`uncaughtExceptionMonitor`,d),process.removeListener(`unhandledRejection`,d),process.removeListener(`SIGINT`,f),process.removeListener(`SIGTERM`,f),process.removeListener(`exit`,u)},h=()=>{if(c===void 0)return;r&&process.stdout.write(`
`);let e=c.split(`
`);process.stdout.write(_r.cursor.move(-999,e.length-1)),process.stdout.write(_r.erase.down(e.length))},g=e=>e.replace(/\.+$/,``),_=e=>{let t=(performance.now()-e)/1e3,n=Math.floor(t/60),r=Math.floor(t%60);return n>0?`[${n}m ${r}s]`:`[${r}s]`},v=(u=``)=>{o=!0,i=fr(),s=g(u),l=performance.now(),process.stdout.write(`${I.default.gray(R)}
`);let d=0,f=0;p(),a=setInterval(()=>{if(r&&s===c)return;h(),c=s;let n=I.default.magenta(t[d]);if(r)process.stdout.write(`${n}  ${s}...`);else if(e===`timer`)process.stdout.write(`${n}  ${s} ${_(l)}`);else{let e=`.`.repeat(Math.floor(f)).slice(0,3);process.stdout.write(`${n}  ${s}${e}`)}d=d+1<t.length?d+1:0,f=f<t.length?f+.125:0},n)},y=(t=``,n=0)=>{o=!1,clearInterval(a),h();let r=n===0?I.default.green(Cr):n===1?I.default.red(xr):I.default.red(Sr);s=g(t??s),e===`timer`?process.stdout.write(`${r}  ${s} ${_(l)}
`):process.stdout.write(`${r}  ${s}
`),m(),i()};return{start:v,stop:y,message:(e=``)=>{s=g(e??s)}}};function Rr(e,t,n){let r=e[t.name];if(typeof r==`function`)return r;let i=e[n];return typeof i==`function`?i:n=>t(e,n)}function zr(e,{abi:t,address:n,args:r,docsPath:i,functionName:a,sender:s}){let c=e instanceof be?e:e instanceof l?e.walk(e=>`data`in e)||e.walk():{},{code:u,data:d,details:f,message:p,shortMessage:m}=c,v=(()=>e instanceof o?new _({functionName:a}):[3,re.code].includes(u)&&(d||f||p||m)?new g({abi:t,data:typeof d==`object`?d.data:d,functionName:a,message:c instanceof Ce?f:m??p}):e)();return new h(v,{abi:t,args:r,contractAddress:n,docsPath:i,functionName:a,sender:s})}async function Br(e,t){let{abi:n,address:r,args:i,functionName:a,...o}=t,s=Ye({abi:n,args:i,functionName:a});try{let{data:t}=await Rr(e,Le,`call`)({...o,data:s,to:r});return We({abi:n,args:i,functionName:a,data:t||`0x`})}catch(e){throw zr(e,{abi:n,address:r,args:i,docsPath:`/docs/contract/readContract`,functionName:a})}}function Vr(e){let t=ht(`0x${e.substring(4)}`).substring(26);return Re(`0x${t}`)}async function Hr({hash:e,signature:t}){let n=pt(e)?e:A(e),{secp256k1:r}=await import(`./secp256k1-DW1FJt09.js`);return`0x${(()=>{if(typeof t==`object`&&`r`in t&&`s`in t){let{r:e,s:n,v:i,yParity:a}=t,o=Ur(Number(a??i));return new r.Signature(T(e),T(n)).addRecoveryBit(o)}let e=pt(t)?t:A(t);if(Ot(e)!==65)throw Error(`invalid signature length`);let n=ut(`0x${e.slice(130)}`),i=Ur(n);return r.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(i)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Ur(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw Error(`Invalid yParityOrV value`)}async function Wr({hash:e,signature:t}){return Vr(await Hr({hash:e,signature:t}))}function Gr(e,t=`hex`){let n=Kr(e),r=He(new Uint8Array(n.length));return n.encode(r),t===`hex`?Ie(r.bytes):r.bytes}function Kr(e){return Array.isArray(e)?qr(e.map(e=>Kr(e))):Jr(e)}function qr(e){let t=e.reduce((e,t)=>e+t.length,0),n=Yr(t);return{length:(()=>t<=55?1+t:1+n+t)(),encode(r){t<=55?r.pushByte(192+t):(r.pushByte(247+n),n===1?r.pushUint8(t):n===2?r.pushUint16(t):n===3?r.pushUint24(t):r.pushUint32(t));for(let{encode:t}of e)t(r)}}}function Jr(e){let t=typeof e==`string`?lt(e):e,n=Yr(t.length);return{length:(()=>t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length)(),encode(e){t.length===1&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+n),n===1?e.pushUint8(t.length):n===2?e.pushUint16(t.length):n===3?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}function Yr(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new l(`Length is too large.`)}function Xr(e){let{chainId:t,nonce:n,to:r}=e,i=e.contractAddress??e.address,a=ht(Be([`0x05`,Gr([t?D(t):`0x`,i,n?D(n):`0x`])]));return r===`bytes`?lt(a):a}async function Zr(e){let{authorization:t,signature:n}=e;return Wr({hash:Xr(t),signature:n??t})}const Qr={"0x0":`legacy`,"0x1":`eip2930`,"0x2":`eip1559`,"0x3":`eip4844`,"0x4":`eip7702`};function $r(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?ut(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?ut(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Qr[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=ti(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v==`bigint`){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n==0n?1:0}})(),t.type===`legacy`&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type===`eip2930`&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type===`eip1559`&&delete t.maxFeePerBlobGas,t}const ei=Ge(`transaction`,$r);function ti(e){return e.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function ni(e){let t=(e.transactions??[]).map(e=>typeof e==`string`?e:$r(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const ri=Ge(`block`,ni);function ii(e){let{kzg:t}=e,n=e.to??(typeof e.blobs[0]==`string`?`hex`:`bytes`),r=typeof e.blobs[0]==`string`?e.blobs.map(e=>lt(e)):e.blobs,i=[];for(let e of r)i.push(Uint8Array.from(t.blobToKzgCommitment(e)));return n===`bytes`?i:i.map(e=>Ie(e))}function ai(e){let{kzg:t}=e,n=e.to??(typeof e.blobs[0]==`string`?`hex`:`bytes`),r=typeof e.blobs[0]==`string`?e.blobs.map(e=>lt(e)):e.blobs,i=typeof e.commitments[0]==`string`?e.commitments.map(e=>lt(e)):e.commitments,a=[];for(let e=0;e<r.length;e++){let n=r[e],o=i[e];a.push(Uint8Array.from(t.computeBlobKzgProof(n,o)))}return n===`bytes`?a:a.map(e=>Ie(e))}const oi=r;function si(e,t){let n=t||`hex`,r=oi(pt(e,{strict:!1})?Bt(e):e);return n===`bytes`?r:A(r)}function ci(e){let{commitment:t,version:n=1}=e,r=e.to??(typeof t==`string`?`hex`:`bytes`),i=si(t,`bytes`);return i.set([n],0),r===`bytes`?i:Ie(i)}function li(e){let{commitments:t,version:n}=e,r=e.to??(typeof t[0]==`string`?`hex`:`bytes`),i=[];for(let e of t)i.push(ci({commitment:e,to:r,version:n}));return i}const ui=4096,di=32*ui,fi=di*6-1-1*ui*6;var pi=class extends l{constructor({maxSize:e,size:t}){super(`Blob size is too large.`,{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:`BlobSizeTooLargeError`})}},mi=class extends l{constructor(){super(`Blob data must not be empty.`,{name:`EmptyBlobError`})}},hi=class extends l{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:[`Expected: 32`,`Received: ${t}`],name:`InvalidVersionedHashSizeError`})}},gi=class extends l{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: 1`,`Received: ${t}`],name:`InvalidVersionedHashVersionError`})}};function _i(e){let t=e.to??(typeof e.data==`string`?`hex`:`bytes`),n=typeof e.data==`string`?lt(e.data):e.data,r=Ot(n);if(!r)throw new mi;if(r>fi)throw new pi({maxSize:fi,size:r});let i=[],a=!0,o=0;for(;a;){let e=He(new Uint8Array(di)),t=0;for(;t<ui;){let r=n.slice(o,o+31);if(e.pushByte(0),e.pushBytes(r),r.length<31){e.pushByte(128),a=!1;break}t++,o+=31}i.push(e)}return t===`bytes`?i.map(e=>e.bytes):i.map(e=>Ie(e.bytes))}function vi(e){let{data:t,kzg:n,to:r}=e,i=e.blobs??_i({data:t,to:r}),a=e.commitments??ii({blobs:i,kzg:n,to:r}),o=e.proofs??ai({blobs:i,commitments:a,kzg:n,to:r}),s=[];for(let e=0;e<i.length;e++)s.push({blob:i[e],commitment:a[e],proof:o[e]});return s}function yi(e){if(e.type)return e.type;if(e.authorizationList!==void 0)return`eip7702`;if(e.blobs!==void 0||e.blobVersionedHashes!==void 0||e.maxFeePerBlobGas!==void 0||e.sidecars!==void 0)return`eip4844`;if(e.maxFeePerGas!==void 0||e.maxPriorityFeePerGas!==void 0)return`eip1559`;if(e.gasPrice!==void 0)return e.accessList===void 0?`legacy`:`eip2930`;throw new de({transaction:e})}const bi=new Map,xi=new Map;function Si(e){let t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,bi),r=t(e,xi);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Ci(e,{cacheKey:t,cacheTime:n=1/0}){let r=Si(t),i=r.response.get();if(i&&n>0&&Date.now()-i.created.getTime()<n)return i.data;let a=r.promise.get();a||(a=e(),r.promise.set(a));try{let e=await a;return r.response.set({created:new Date,data:e}),e}finally{r.promise.clear()}}async function wi(e,{address:t,blockNumber:n,blockTag:r=`latest`}){let i=n===void 0?void 0:D(n),a=await e.request({method:`eth_getCode`,params:[t,i||r]},{dedupe:!!i});if(a!==`0x`)return a}function Ti(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}var Ei=class extends l{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:[`Ensure that:`,`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:`Eip712DomainNotFoundError`})}};async function Di(e,t){let{address:n,factory:r,factoryData:i}=t;try{let[t,a,o,s,c,l,u]=await Rr(e,Br,`readContract`)({abi:Oi,address:n,functionName:`eip712Domain`,factory:r,factoryData:i});return{domain:{name:a,version:o,chainId:Number(s),verifyingContract:c,salt:l},extensions:u,fields:t}}catch(e){let t=e;throw t.name===`ContractFunctionExecutionError`&&t.cause.name===`ContractFunctionZeroDataError`?new Ei({address:n}):t}}const Oi=[{inputs:[],name:`eip712Domain`,outputs:[{name:`fields`,type:`bytes1`},{name:`name`,type:`string`},{name:`version`,type:`string`},{name:`chainId`,type:`uint256`},{name:`verifyingContract`,type:`address`},{name:`salt`,type:`bytes32`},{name:`extensions`,type:`uint256[]`}],stateMutability:`view`,type:`function`}];function ki(e){let{authorizationList:t}=e;if(t)for(let e of t){let{chainId:t}=e,n=e.address;if(!E(n))throw new b({address:n});if(t<0)throw new oe({chainId:t})}ji(e)}function Ai(e){let{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new mi;for(let e of t){let t=Ot(e),n=ut(At(e,0,1));if(t!==32)throw new hi({hash:e,size:t});if(n!==1)throw new gi({hash:e,version:n})}}ji(e)}function ji(e){let{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:i}=e;if(t<=0)throw new oe({chainId:t});if(i&&!E(i))throw new b({address:i});if(r&&r>_t)throw new ee({maxFeePerGas:r});if(n&&r&&n>r)throw new Ee({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Mi(e){let{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:i,to:a}=e;if(t<=0)throw new oe({chainId:t});if(a&&!E(a))throw new b({address:a});if(n||i)throw new l("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>_t)throw new ee({maxFeePerGas:r})}function Ni(e){let{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:i,to:a}=e;if(a&&!E(a))throw new b({address:a});if(t!==void 0&&t<=0)throw new oe({chainId:t});if(n||i)throw new l("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>_t)throw new ee({maxFeePerGas:r})}function Pi(e){if(!e||e.length===0)return[];let t=[];for(let n=0;n<e.length;n++){let{address:r,storageKeys:i}=e[n];for(let e=0;e<i.length;e++)if(i[e].length-2!=64)throw new fe({storageKey:i[e]});if(!E(r,{strict:!1}))throw new b({address:r});t.push([r,i])}return t}function Fi(e,t){let n=yi(e);return n===`eip1559`?Ri(e,t):n===`eip2930`?zi(e,t):n===`eip4844`?Li(e,t):n===`eip7702`?Ii(e,t):Bi(e,t)}function Ii(e,t){let{authorizationList:n,chainId:r,gas:i,nonce:a,to:o,value:s,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=e;ki(e);let f=Pi(u),p=Hi(n);return Be([`0x04`,Gr([D(r),a?D(a):`0x`,l?D(l):`0x`,c?D(c):`0x`,i?D(i):`0x`,o??`0x`,s?D(s):`0x`,d??`0x`,f,p,...Vi(e,t)])])}function Li(e,t){let{chainId:n,gas:r,nonce:i,to:a,value:o,maxFeePerBlobGas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=e;Ai(e);let f=e.blobVersionedHashes,p=e.sidecars;if(e.blobs&&(f===void 0||p===void 0)){let t=typeof e.blobs[0]==`string`?e.blobs:e.blobs.map(e=>Ie(e)),n=e.kzg,r=ii({blobs:t,kzg:n});if(f===void 0&&(f=li({commitments:r})),p===void 0){let e=ai({blobs:t,commitments:r,kzg:n});p=vi({blobs:t,commitments:r,proofs:e})}}let m=Pi(u),h=[D(n),i?D(i):`0x`,l?D(l):`0x`,c?D(c):`0x`,r?D(r):`0x`,a??`0x`,o?D(o):`0x`,d??`0x`,m,s?D(s):`0x`,f??[],...Vi(e,t)],g=[],_=[],v=[];if(p)for(let e=0;e<p.length;e++){let{blob:t,commitment:n,proof:r}=p[e];g.push(t),_.push(n),v.push(r)}return Be([`0x03`,Gr(p?[h,g,_,v]:h)])}function Ri(e,t){let{chainId:n,gas:r,nonce:i,to:a,value:o,maxFeePerGas:s,maxPriorityFeePerGas:c,accessList:l,data:u}=e;ji(e);let d=Pi(l),f=[D(n),i?D(i):`0x`,c?D(c):`0x`,s?D(s):`0x`,r?D(r):`0x`,a??`0x`,o?D(o):`0x`,u??`0x`,d,...Vi(e,t)];return Be([`0x02`,Gr(f)])}function zi(e,t){let{chainId:n,gas:r,data:i,nonce:a,to:o,value:s,accessList:c,gasPrice:l}=e;Mi(e);let u=Pi(c),d=[D(n),a?D(a):`0x`,l?D(l):`0x`,r?D(r):`0x`,o??`0x`,s?D(s):`0x`,i??`0x`,u,...Vi(e,t)];return Be([`0x01`,Gr(d)])}function Bi(e,t){let{chainId:n=0,gas:r,data:i,nonce:a,to:o,value:s,gasPrice:c}=e;Ni(e);let l=[a?D(a):`0x`,c?D(c):`0x`,r?D(r):`0x`,o??`0x`,s?D(s):`0x`,i??`0x`];if(t){let e=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);let e=27n+(t.v===27n?0n:1n);if(t.v!==e)throw new ce({v:t.v});return e})(),r=Gt(t.r),i=Gt(t.s);l=[...l,D(e),r===`0x00`?`0x`:r,i===`0x00`?`0x`:i]}else n>0&&(l=[...l,D(n),`0x`,`0x`]);return Gr(l)}function Vi(e,t){let n=t??e,{v:r,yParity:i}=n;if(n.r===void 0||n.s===void 0||r===void 0&&i===void 0)return[];let a=Gt(n.r),o=Gt(n.s);return[(()=>typeof i==`number`?i?D(1):`0x`:r===0n?`0x`:r===1n?D(1):r===27n?`0x`:D(1))(),a===`0x00`?`0x`:a,o===`0x00`?`0x`:o]}function Hi(e){if(!e||e.length===0)return[];let t=[];for(let n of e){let{chainId:e,nonce:r,...i}=n,a=n.address;t.push([e?A(e):`0x`,a,r?A(r):`0x`,...Vi({},i)])}return t}async function Ui({address:e,authorization:t,signature:n}){return ft(st(e),await Zr({authorization:t,signature:n}))}const Wi=new he(8192);function Gi(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(Wi.get(n))return Wi.get(n);let r=e().finally(()=>Wi.delete(n));return Wi.set(n,r),r}async function Ki(e){return new Promise(t=>setTimeout(t,e))}function qi(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((i,a)=>{let o=async({count:s=0}={})=>{let c=async({error:e})=>{let n=typeof t==`function`?t({count:s,error:e}):t;n&&await Ki(n),o({count:s+1})};try{let t=await e();i(t)}catch(e){if(s<n&&await r({count:s,error:e}))return c({error:e});a(e)}};o()})}function Ji(e,t={}){return async(n,r={})=>{let{dedupe:i=!1,methods:a,retryDelay:o=150,retryCount:u=3,uid:f}={...t,...r},{method:p}=n;if(a?.exclude?.includes(p)||a?.include&&!a.include.includes(p))throw new _e(Error(`method not supported`),{method:p});let h=i?Pt(`${f}.${Ft(n)}`):void 0;return Gi(()=>qi(async()=>{try{return await e(n)}catch(e){let t=e;switch(t.code){case ve.code:throw new ve(t);case ue.code:throw new ue(t);case ge.code:throw new ge(t,{method:n.method});case le.code:throw new le(t);case re.code:throw new re(t);case se.code:throw new se(t);case xe.code:throw new xe(t);case Se.code:throw new Se(t);case De.code:throw new De(t);case _e.code:throw new _e(t,{method:n.method});case me.code:throw new me(t);case pe.code:throw new pe(t);case Pe.code:throw new Pe(t);case Oe.code:throw new Oe(t);case Ne.code:throw new Ne(t);case ye.code:throw new ye(t);case m.code:throw new m(t);case we.code:throw new we(t);case Me.code:throw new Me(t);case je.code:throw new je(t);case v.code:throw new v(t);case ke.code:throw new ke(t);case d.code:throw new d(t);case s.code:throw new s(t);case c.code:throw new c(t);case 5e3:throw new Pe(t);default:throw e instanceof l?e:new Ae(t)}}},{delay:({count:e,error:t})=>{if(t&&t instanceof te){let e=t?.headers?.get(`Retry-After`);if(e?.match(/\d/))return Number.parseInt(e,10)*1e3}return~~(1<<e)*o},retryCount:u,shouldRetry:({error:e})=>Yi(e)}),{enabled:i,id:h})}}function Yi(e){return`code`in e&&typeof e.code==`number`?e.code===-1||e.code===me.code||e.code===re.code:e instanceof te&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function B(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const Xi={"0x0":`reverted`,"0x1":`success`};function Zi(e){let t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(e=>Ti(e)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?ut(e.transactionIndex):null,status:e.status?Xi[e.status]:null,type:e.type?Qr[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const Qi=Ge(`transactionReceipt`,Zi);function $i(e,{errorInstance:t=Error(`timed out`),timeout:n,signal:r}){return new Promise((i,a)=>{(async()=>{let o;try{let s=new AbortController;n>0&&(o=setTimeout(()=>{r?s.abort():a(t)},n)),i(await e({signal:s?.signal||null}))}catch(e){e?.name===`AbortError`&&a(t),a(e)}finally{clearTimeout(o)}})()})}function ea(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const ta=ea();function na(e,t={}){return{async request(n){let{body:r,fetchFn:i=t.fetchFn??fetch,onRequest:a=t.onRequest,onResponse:o=t.onResponse,timeout:s=t.timeout??1e4}=n,c={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=c;try{let t=await $i(async({signal:t})=>{let n={...c,body:Ft(Array.isArray(r)?r.map(e=>({jsonrpc:`2.0`,id:e.id??ta.take(),...e})):{jsonrpc:`2.0`,id:r.id??ta.take(),...r}),headers:{"Content-Type":`application/json`,...l},method:u||`POST`,signal:d||(s>0?t:null)},o=new Request(e,n),f=await a?.(o,n)??{...n,url:e};return await i(f.url??e,f)},{errorInstance:new Te({body:r,url:e}),timeout:s,signal:!0});o&&await o(t);let n;if(t.headers.get(`Content-Type`)?.startsWith(`application/json`))n=await t.json();else{n=await t.text();try{n=JSON.parse(n||`{}`)}catch(e){if(t.ok)throw e;n={error:n}}}if(!t.ok)throw new te({body:r,details:Ft(n.error)||t.statusText,headers:t.headers,status:t.status,url:e});return n}catch(t){throw t instanceof te||t instanceof Te?t:new te({body:r,cause:t,url:e})}}}}function ra(e){let t=(()=>typeof e==`string`?Pt(e):typeof e.raw==`string`?e.raw:Ie(e.raw))(),n=Pt(`Ethereum Signed Message:
${Ot(t)}`);return ze([n,t])}function ia(e,t){return ht(ra(e),t)}var aa=class extends l{constructor({domain:e}){super(`Invalid domain "${Ft(e)}".`,{metaMessages:[`Must be a valid EIP-712 domain.`]})}},oa=class extends l{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:`/api/glossary/Errors#typeddatainvalidprimarytypeerror`,metaMessages:["Check that the primary type is a key in `types`."]})}},sa=class extends l{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:[`Struct type must not be a Solidity type.`],name:`InvalidStructTypeError`})}};function ca(e){let{domain:t,message:n,primaryType:r,types:i}=e,a=(e,t)=>{for(let n of e){let{name:e,type:r}=n,o=t[e],s=r.match(dt);if(s&&(typeof o==`number`||typeof o==`bigint`)){let[e,t,n]=s;D(o,{signed:t===`int`,size:Number.parseInt(n,10)/8})}if(r===`address`&&typeof o==`string`&&!E(o))throw new b({address:o});let c=r.match(Fe);if(c){let[e,t]=c;if(t&&Ot(o)!==Number.parseInt(t,10))throw new f({expectedSize:Number.parseInt(t,10),givenSize:Ot(o)})}let l=i[r];l&&(ua(r),a(l,o))}};if(i.EIP712Domain&&t){if(typeof t!=`object`)throw new aa({domain:t});a(i.EIP712Domain,t)}if(r!==`EIP712Domain`)if(i[r])a(i[r],n);else throw new oa({primaryType:r,types:i})}function la({domain:e}){return[typeof e?.name==`string`&&{name:`name`,type:`string`},e?.version&&{name:`version`,type:`string`},(typeof e?.chainId==`number`||typeof e?.chainId==`bigint`)&&{name:`chainId`,type:`uint256`},e?.verifyingContract&&{name:`verifyingContract`,type:`address`},e?.salt&&{name:`salt`,type:`bytes32`}].filter(Boolean)}function ua(e){if(e===`address`||e===`bool`||e===`string`||e.startsWith(`bytes`)||e.startsWith(`uint`)||e.startsWith(`int`))throw new sa({type:e})}function da(e){let{domain:t={},message:n,primaryType:r}=e,i={EIP712Domain:la({domain:t}),...e.types};ca({domain:t,message:n,primaryType:r,types:i});let a=[`0x1901`];return t&&a.push(fa({domain:t,types:i})),r!==`EIP712Domain`&&a.push(pa({data:n,primaryType:r,types:i})),ht(ze(a))}function fa({domain:e,types:t}){return pa({data:e,primaryType:`EIP712Domain`,types:t})}function pa({data:e,primaryType:t,types:n}){let r=ma({data:e,primaryType:t,types:n});return ht(r)}function ma({data:e,primaryType:t,types:n}){let r=[{type:`bytes32`}],i=[ha({primaryType:t,types:n})];for(let a of n[t]){let[t,o]=va({types:n,name:a.name,type:a.type,value:e[a.name]});r.push(t),i.push(o)}return qe(r,i)}function ha({primaryType:e,types:t}){let n=A(ga({primaryType:e,types:t}));return ht(n)}function ga({primaryType:e,types:t}){let n=``,r=_a({primaryType:e,types:t});r.delete(e);let i=[e,...Array.from(r).sort()];for(let e of i)n+=`${e}(${t[e].map(({name:e,type:t})=>`${t} ${e}`).join(`,`)})`;return n}function _a({primaryType:e,types:t},n=new Set){let r=e.match(/^\w*/u)?.[0];if(n.has(r)||t[r]===void 0)return n;n.add(r);for(let e of t[r])_a({primaryType:e.type,types:t},n);return n}function va({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:`bytes32`},ht(ma({data:r,primaryType:n,types:e}))];if(n===`bytes`)return r=`0x${(r.length%2?`0`:``)+r.slice(2)}`,[{type:`bytes32`},ht(r)];if(n===`string`)return[{type:`bytes32`},ht(A(r))];if(n.lastIndexOf(`]`)===n.length-1){let i=n.slice(0,n.lastIndexOf(`[`)),a=r.map(n=>va({name:t,type:i,types:e,value:n}));return[{type:`bytes32`},ht(qe(a.map(([e])=>e),a.map(([,e])=>e)))]}return[{type:n},r]}const ya={checksum:new class extends Map{constructor(e){super(),Object.defineProperty(this,`maxSize`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=(super.get(e));return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=(this.keys().next()).value;e&&this.delete(e)}return this}}(8192)}.checksum;function V(e,t={}){let{as:n=typeof e==`string`?`Hex`:`Bytes`}=t,r=gt(nt(e));return n===`Bytes`?r:S(r)}function ba(e,t={}){let{as:n=typeof e==`string`?`Hex`:`Bytes`}=t,r=oi(nt(e));return n===`Bytes`?r:S(r)}function xa(e,t={}){let{compressed:n}=t,{prefix:r,x:i,y:a}=e;if(n===!1||typeof i==`bigint`&&typeof a==`bigint`){if(r!==4)throw new Da({prefix:r,cause:new ka});return}if(n===!0||typeof i==`bigint`&&a===void 0){if(r!==3&&r!==2)throw new Da({prefix:r,cause:new Oa});return}throw new Ea({publicKey:e})}function Sa(e){let t=(()=>{if(Jt(e))return wa(e);if(Yt(e))return Ca(e);let{prefix:t,x:n,y:r}=e;return typeof n==`bigint`&&typeof r==`bigint`?{prefix:t??4,x:n,y:r}:{prefix:t,x:n}})();return xa(t),t}function Ca(e){return wa(S(e))}function wa(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Aa({publicKey:e});if(e.length===130){let t=BigInt(k(e,0,32)),n=BigInt(k(e,32,64));return{prefix:4,x:t,y:n}}if(e.length===132){let t=Number(k(e,0,1)),n=BigInt(k(e,1,33)),r=BigInt(k(e,33,65));return{prefix:t,x:n,y:r}}let t=Number(k(e,0,1)),n=BigInt(k(e,1,33));return{prefix:t,x:n}}function Ta(e,t={}){xa(e);let{prefix:n,x:r,y:i}=e,{includePrefix:a=!0}=t;return x(a?C(n,{size:1}):`0x`,C(r,{size:32}),typeof i==`bigint`?C(i,{size:32}):`0x`)}var Ea=class extends u{constructor({publicKey:e}){super(`Value \`${It(e)}\` is not a valid public key.`,{metaMessages:[`Public key must contain:`,"- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`PublicKey.InvalidError`})}},Da=class extends u{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`PublicKey.InvalidPrefixError`})}},Oa=class extends u{constructor(){super(`Prefix must be 2 or 3 for compressed public keys.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`PublicKey.InvalidCompressedPrefixError`})}},ka=class extends u{constructor(){super(`Prefix must be 4 for uncompressed public keys.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`PublicKey.InvalidUncompressedPrefixError`})}},Aa=class extends u{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:[`Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).`,`Received ${O(tt(e))} bytes.`]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`PublicKey.InvalidSerializedSizeError`})}};const ja=/^0x[a-fA-F0-9]{40}$/;function Ma(e,t={}){let{strict:n=!0}=t;if(!ja.test(e))throw new La({address:e,cause:new Ra});if(n){if(e.toLowerCase()===e)return;if(Na(e)!==e)throw new La({address:e,cause:new za})}}function Na(e){if(ya.has(e))return ya.get(e);Ma(e,{strict:!1});let t=e.substring(2).toLowerCase(),n=V(ot(t),{as:`Bytes`}),r=t.split(``);for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(n[e>>1]&15)>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());let i=`0x${r.join(``)}`;return ya.set(e,i),i}function Pa(e,t={}){let{checksum:n=!1}=t;return Ma(e),n?Na(e):e}function Fa(e,t={}){let n=V(`0x${Ta(e).slice(4)}`).substring(26);return Pa(`0x${n}`,t)}function H(e,t){return Ma(e,{strict:!1}),Ma(t,{strict:!1}),e.toLowerCase()===t.toLowerCase()}function Ia(e,t={}){let{strict:n=!0}=t??{};try{return Ma(e,{strict:n}),!0}catch{return!1}}var La=class extends u{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Address.InvalidAddressError`})}},Ra=class extends u{constructor(){super(`Address is not a 20 byte (40 hexadecimal character) value.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Address.InvalidInputError`})}},za=class extends u{constructor(){super(`Address does not match its checksum counterpart.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Address.InvalidChecksumError`})}};const Ba=/^(.*)\[([0-9]*)\]$/,Va=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ha=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;2n**(8n-1n)-1n,2n**(16n-1n)-1n,2n**(24n-1n)-1n,2n**(32n-1n)-1n,2n**(40n-1n)-1n,2n**(48n-1n)-1n,2n**(56n-1n)-1n,2n**(64n-1n)-1n,2n**(72n-1n)-1n,2n**(80n-1n)-1n,2n**(88n-1n)-1n,2n**(96n-1n)-1n,2n**(104n-1n)-1n,2n**(112n-1n)-1n,2n**(120n-1n)-1n,2n**(128n-1n)-1n,2n**(136n-1n)-1n,2n**(144n-1n)-1n,2n**(152n-1n)-1n,2n**(160n-1n)-1n,2n**(168n-1n)-1n,2n**(176n-1n)-1n,2n**(184n-1n)-1n,2n**(192n-1n)-1n,2n**(200n-1n)-1n,2n**(208n-1n)-1n,2n**(216n-1n)-1n,2n**(224n-1n)-1n,2n**(232n-1n)-1n,2n**(240n-1n)-1n,2n**(248n-1n)-1n,2n**(256n-1n)-1n,-(2n**(8n-1n)),-(2n**(16n-1n)),-(2n**(24n-1n)),-(2n**(32n-1n)),-(2n**(40n-1n)),-(2n**(48n-1n)),-(2n**(56n-1n)),-(2n**(64n-1n)),-(2n**(72n-1n)),-(2n**(80n-1n)),-(2n**(88n-1n)),-(2n**(96n-1n)),-(2n**(104n-1n)),-(2n**(112n-1n)),-(2n**(120n-1n)),-(2n**(128n-1n)),-(2n**(136n-1n)),-(2n**(144n-1n)),-(2n**(152n-1n)),-(2n**(160n-1n)),-(2n**(168n-1n)),-(2n**(176n-1n)),-(2n**(184n-1n)),-(2n**(192n-1n)),-(2n**(200n-1n)),-(2n**(208n-1n)),-(2n**(216n-1n)),-(2n**(224n-1n)),-(2n**(232n-1n)),-(2n**(240n-1n)),-(2n**(248n-1n)),-(2n**(256n-1n));const Ua=2n**256n-1n;function Wa(e,t,n){let{checksumAddress:r,staticPosition:i}=n,a=co(t.type);if(a){let[n,o]=a;return Ka(e,{...t,type:o},{checksumAddress:r,length:n,staticPosition:i})}if(t.type===`tuple`)return Xa(e,t,{checksumAddress:r,staticPosition:i});if(t.type===`address`)return Ga(e,{checksum:r});if(t.type===`bool`)return qa(e);if(t.type.startsWith(`bytes`))return Ja(e,t,{staticPosition:i});if(t.type.startsWith(`uint`)||t.type.startsWith(`int`))return Ya(e,t);if(t.type===`string`)return Za(e,{staticPosition:i});throw new Eo(t.type)}function Ga(e,t={}){let{checksum:n=!1}=t,r=e.readBytes(32);return[(e=>n?Na(e):e)(S(jt(r,-20))),32]}function Ka(e,t,n){let{checksumAddress:r,length:i,staticPosition:a}=n;if(!i){let n=Ut(e.readBytes(32)),i=a+n,o=i+32;e.setPosition(i);let s=Ut(e.readBytes(32)),c=lo(t),l=0,u=[];for(let n=0;n<s;++n){e.setPosition(o+(c?n*32:l));let[i,a]=Wa(e,t,{checksumAddress:r,staticPosition:o});l+=a,u.push(i)}return e.setPosition(a+32),[u,32]}if(lo(t)){let n=Ut(e.readBytes(32)),o=a+n,s=[];for(let n=0;n<i;++n){e.setPosition(o+n*32);let[i]=Wa(e,t,{checksumAddress:r,staticPosition:o});s.push(i)}return e.setPosition(a+32),[s,32]}let o=0,s=[];for(let n=0;n<i;++n){let[n,i]=Wa(e,t,{checksumAddress:r,staticPosition:a+o});o+=i,s.push(n)}return[s,o]}function qa(e){return[zt(e.readBytes(32),{size:32}),32]}function Ja(e,t,{staticPosition:n}){let[r,i]=t.type.split(`bytes`);if(!i){let t=Ut(e.readBytes(32));e.setPosition(n+t);let r=Ut(e.readBytes(32));if(r===0)return e.setPosition(n+32),[`0x`,32];let i=e.readBytes(r);return e.setPosition(n+32),[S(i),32]}return[S(e.readBytes(Number.parseInt(i,10),32)),32]}function Ya(e,t){let n=t.type.startsWith(`int`),r=Number.parseInt(t.type.split(`int`)[1]||`256`,10),i=e.readBytes(32);return[r>48?Rt(i,{signed:n}):Ut(i,{signed:n}),32]}function Xa(e,t,n){let{checksumAddress:r,staticPosition:i}=n,a=t.components.length===0||t.components.some(({name:e})=>!e),o=a?[]:{},s=0;if(lo(t)){let n=Ut(e.readBytes(32)),c=i+n;for(let n=0;n<t.components.length;++n){let i=t.components[n];e.setPosition(c+s);let[l,u]=Wa(e,i,{checksumAddress:r,staticPosition:c});s+=u,o[a?n:i?.name]=l}return e.setPosition(i+32),[o,32]}for(let n=0;n<t.components.length;++n){let c=t.components[n],[l,u]=Wa(e,c,{checksumAddress:r,staticPosition:i});o[a?n:c?.name]=l,s+=u}return[o,s]}function Za(e,{staticPosition:t}){let n=Ut(e.readBytes(32)),r=t+n;e.setPosition(r);let i=Ut(e.readBytes(32));if(i===0)return e.setPosition(t+32),[``,32];let a=e.readBytes(i,32),o=Wt(qt(a));return e.setPosition(t+32),[o,32]}function Qa({checksumAddress:e,parameters:t,values:n}){let r=[];for(let i=0;i<t.length;i++)r.push($a({checksumAddress:e,parameter:t[i],value:n[i]}));return r}function $a({checksumAddress:e=!1,parameter:t,value:n}){let r=t,i=co(r.type);if(i){let[t,a]=i;return no(n,{checksumAddress:e,length:t,parameter:{...r,type:a}})}if(r.type===`tuple`)return so(n,{checksumAddress:e,parameter:r});if(r.type===`address`)return to(n,{checksum:e});if(r.type===`bool`)return io(n);if(r.type.startsWith(`uint`)||r.type.startsWith(`int`)){let e=r.type.startsWith(`int`),[,,t=`256`]=Ha.exec(r.type)??[];return ao(n,{signed:e,size:Number(t)})}if(r.type.startsWith(`bytes`))return ro(n,{type:r.type});if(r.type===`string`)return oo(n);throw new Eo(r.type)}function eo(e){let t=0;for(let n=0;n<e.length;n++){let{dynamic:r,encoded:i}=e[n];r?t+=32:t+=O(i)}let n=[],r=[],i=0;for(let a=0;a<e.length;a++){let{dynamic:o,encoded:s}=e[a];o?(n.push(C(t+i,{size:32})),r.push(s),i+=O(s)):n.push(s)}return x(...n,...r)}function to(e,t){let{checksum:n=!1}=t;return Ma(e,{strict:n}),{dynamic:!1,encoded:xt(e.toLowerCase())}}function no(e,t){let{checksumAddress:n,length:r,parameter:i}=t,a=r===null;if(!Array.isArray(e))throw new To(e);if(!a&&e.length!==r)throw new So({expectedLength:r,givenLength:e.length,type:`${i.type}[${r}]`});let o=!1,s=[];for(let t=0;t<e.length;t++){let r=$a({checksumAddress:n,parameter:i,value:e[t]});r.dynamic&&(o=!0),s.push(r)}if(a||o){let e=eo(s);if(a){let t=C(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?x(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:x(...s.map(({encoded:e})=>e))}}function ro(e,{type:t}){let[,n]=t.split(`bytes`),r=O(e);if(!n){let t=e;return r%32!=0&&(t=St(t,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:x(xt(C(r,{size:32})),t)}}if(r!==Number.parseInt(n,10))throw new Co({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:St(e)}}function io(e){if(typeof e!=`boolean`)throw new u(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:xt(it(e))}}function ao(e,{signed:t,size:n}){if(typeof n==`number`){let r=2n**(BigInt(n)-(t?1n:0n))-1n,i=t?-r-1n:0n;if(e>r||e<i)throw new ne({max:r.toString(),min:i.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:C(e,{size:32,signed:t})}}function oo(e){let t=w(e),n=Math.ceil(O(t)/32),r=[];for(let e=0;e<n;e++)r.push(St(k(t,e*32,(e+1)*32)));return{dynamic:!0,encoded:x(St(C(O(t),{size:32})),...r)}}function so(e,t){let{checksumAddress:n,parameter:r}=t,i=!1,a=[];for(let t=0;t<r.components.length;t++){let o=r.components[t],s=Array.isArray(e)?t:o.name,c=$a({checksumAddress:n,parameter:o,value:e[s]});a.push(c),c.dynamic&&(i=!0)}return{dynamic:i,encoded:i?eo(a):x(...a.map(({encoded:e})=>e))}}function co(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function lo(e){let{type:t}=e;if(t===`string`||t===`bytes`||t.endsWith(`[]`))return!0;if(t===`tuple`)return e.components?.some(lo);let n=co(e.type);return!!(n&&lo({...e,type:n[1]}))}const uo={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:1/0,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new ho({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new mo({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new po({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new po({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===1/0)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function fo(e,{recursiveReadLimit:t=8192}={}){let n=Object.create(uo);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}var po=class extends u{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Cursor.NegativeOffsetError`})}},mo=class extends u{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Cursor.PositionOutOfBoundsError`})}},ho=class extends u{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Cursor.RecursiveReadLimitExceededError`})}};function go(e,t,n={}){let{as:r=`Array`,checksumAddress:i=!1}=n,a=typeof t==`string`?at(t):t,o=fo(a);if(kt(a)===0&&e.length>0)throw new xo;if(kt(a)&&kt(a)<32)throw new bo({data:typeof t==`string`?t:S(t),parameters:e,size:kt(a)});let s=0,c=r===`Array`?[]:{};for(let t=0;t<e.length;++t){let n=e[t];o.setPosition(s);let[a,l]=Wa(o,n,{checksumAddress:i,staticPosition:0});s+=l,r===`Array`?c.push(a):c[n.name??t]=a}return c}function _o(e,t,n){let{checksumAddress:r=!1}=n??{};if(e.length!==t.length)throw new wo({expectedLength:e.length,givenLength:t.length});let i=Qa({checksumAddress:r,parameters:e,values:t}),a=eo(i);return a.length===0?`0x`:a}function vo(e,t){if(e.length!==t.length)throw new wo({expectedLength:e.length,givenLength:t.length});let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t[r];n.push(vo.encode(i,a))}return x(...n)}(function(e){function t(e,n,r=!1){if(e===`address`){let e=n;return Ma(e),xt(e.toLowerCase(),r?32:0)}if(e===`string`)return w(n);if(e===`bytes`)return n;if(e===`bool`)return xt(it(n),r?32:1);let i=e.match(Ha);if(i){let[e,t,a=`256`]=i,o=Number.parseInt(a,10)/8;return C(n,{size:r?32:o,signed:t===`int`})}let a=e.match(Va);if(a){let[e,t]=a;if(Number.parseInt(t,10)!==(n.length-2)/2)throw new Co({expectedSize:Number.parseInt(t,10),value:n});return St(n,r?32:0)}let o=e.match(Ba);if(o&&Array.isArray(n)){let[e,r]=o,i=[];for(let e=0;e<n.length;e++)i.push(t(r,n[e],!0));return i.length===0?`0x`:x(...i)}throw new Eo(e)}e.encode=t})(vo||(vo={}));function yo(e){return Array.isArray(e)&&typeof e[0]==`string`||typeof e==`string`?jn(e):e}var bo=class extends u{constructor({data:e,parameters:t,size:n}){super(`Data size of ${n} bytes is too small for given parameters.`,{metaMessages:[`Params: (${et(t)})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.DataSizeTooSmallError`})}},xo=class extends u{constructor(){super(`Cannot decode zero data ("0x") with ABI parameters.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.ZeroDataError`})}},So=class extends u{constructor({expectedLength:e,givenLength:t,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.ArrayLengthMismatchError`})}},Co=class extends u{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${O(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.BytesSizeMismatchError`})}},wo=class extends u{constructor({expectedLength:e,givenLength:t}){super([`ABI encoding parameters/values length mismatch.`,`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.LengthMismatchError`})}},To=class extends u{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.InvalidArrayError`})}},Eo=class extends u{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiParameters.InvalidTypeError`})}};function Do(e,t){let{as:n}=t,r=ko(e),i=fo(new Uint8Array(r.length));return r.encode(i),n===`Hex`?S(i.bytes):i.bytes}function Oo(e,t={}){let{as:n=`Hex`}=t;return Do(e,{as:n})}function ko(e){return Array.isArray(e)?Ao(e.map(e=>ko(e))):jo(e)}function Ao(e){let t=e.reduce((e,t)=>e+t.length,0),n=Mo(t);return{length:(()=>t<=55?1+t:1+n+t)(),encode(r){t<=55?r.pushByte(192+t):(r.pushByte(247+n),n===1?r.pushUint8(t):n===2?r.pushUint16(t):n===3?r.pushUint24(t):r.pushUint32(t));for(let{encode:t}of e)t(r)}}}function jo(e){let t=typeof e==`string`?at(e):e,n=Mo(t.length);return{length:(()=>t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length)(),encode(e){t.length===1&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+n),n===1?e.pushUint8(t.length):n===2?e.pushUint16(t.length):n===3?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}function Mo(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new u(`Length is too large.`)}function No(e,t={}){let{recovered:n}=t;if(e.r===void 0||e.s===void 0||n&&e.yParity===void 0)throw new Go({signature:e});if(e.r<0n||e.r>Ua)throw new Ko({value:e.r});if(e.s<0n||e.s>Ua)throw new qo({value:e.s});if(typeof e.yParity==`number`&&e.yParity!==0&&e.yParity!==1)throw new Jo({value:e.yParity})}function Po(e){return Fo(S(e))}function Fo(e){if(e.length!==130&&e.length!==132)throw new Wo({signature:e});let t=BigInt(k(e,0,32)),n=BigInt(k(e,32,64)),r=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return Ho(t)}catch{throw new Jo({value:t})}})();return r===void 0?{r:t,s:n}:{r:t,s:n,yParity:r}}function Io(e){if(e.r!==void 0&&e.s!==void 0)return Lo(e)}function Lo(e){let t=(()=>typeof e==`string`?Fo(e):e instanceof Uint8Array?Po(e):typeof e.r==`string`?zo(e):e.v?Ro(e):{r:e.r,s:e.s,...e.yParity===void 0?{}:{yParity:e.yParity}})();return No(t),t}function Ro(e){return{r:e.r,s:e.s,yParity:Ho(e.v)}}function zo(e){let t=(()=>{let t=e.v?Number(e.v):void 0,n=e.yParity?Number(e.yParity):void 0;if(typeof t==`number`&&typeof n!=`number`&&(n=Ho(t)),typeof n!=`number`)throw new Jo({value:e.yParity});return n})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Bo(e){No(e);let t=e.r,n=e.s;return x(C(t,{size:32}),C(n,{size:32}),typeof e.yParity==`number`?C(Uo(e.yParity),{size:1}):`0x`)}function Vo(e){let{r:t,s:n,yParity:r}=e;return[r?`0x01`:`0x`,t===0n?`0x`:Kt(C(t)),n===0n?`0x`:Kt(C(n))]}function Ho(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2==0?1:0;throw new Yo({value:e})}function Uo(e){if(e===0)return 27;if(e===1)return 28;throw new Jo({value:e})}var Wo=class extends u{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:[`Expected: 64 bytes or 65 bytes.`,`Received ${O(tt(e))} bytes.`]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Signature.InvalidSerializedSizeError`})}},Go=class extends u{constructor({signature:e}){super(`Signature \`${It(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Signature.MissingPropertiesError`})}},Ko=class extends u{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Signature.InvalidRError`})}},qo=class extends u{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Signature.InvalidSError`})}},Jo=class extends u{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Signature.InvalidYParityError`})}},Yo=class extends u{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Signature.InvalidVError`})}};function Xo(e,t={}){return typeof e.chainId==`string`?Zo(e):{...e,...t.signature}}function Zo(e){let{address:t,chainId:n,nonce:r}=e,i=Io(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...i}}function Qo(e){return $o(e,{presign:!0})}function $o(e,t={}){let{presign:n}=t;return V(x(`0x05`,Oo(es(n?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}function es(e){let{address:t,chainId:n,nonce:r}=e,i=Io(e);return[n?C(n):`0x`,t,r?C(r):`0x`,...i?Vo(i):[]]}function ts(e){let{privateKey:t}=e,r=n.ProjectivePoint.fromPrivateKey(tt(t).slice(2));return Sa(r)}function ns(e={}){let{as:t=`Hex`}=e,r=n.utils.randomPrivateKey();return t===`Hex`?S(r):r}function rs(e){return Fa(os(e))}function os(e){let{payload:t,signature:r}=e,{r:i,s:a,yParity:o}=r,s=new n.Signature(BigInt(i),BigInt(a)).addRecoveryBit(o).recoverPublicKey(tt(t).substring(2));return Sa(s)}function ss(e){let{extraEntropy:t=!1,hash:r,payload:i,privateKey:a}=e,{r:o,s,recovery:c}=n.sign(nt(i),nt(a),{extraEntropy:typeof t==`boolean`?t:tt(t).slice(2),lowS:!0,...r?{prehash:!0}:{}});return{r:o,s,yParity:c}}const cs=`0x8010801080108010801080108010801080108010801080108010801080108010`,ls=yo(`(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data`);function us(e){if(typeof e==`string`){if(k(e,-32)!==cs)throw new ms(e)}else No(e.authorization)}function ds(e){us(e);let t=Ht(k(e,-64,-32)),n=k(e,-t-64,-64),r=k(e,0,-t-64),[i,a,o]=go(ls,n);return{authorization:Xo({address:i.delegation,chainId:Number(i.chainId),nonce:i.nonce,yParity:i.yParity,r:i.r,s:i.s}),signature:r,...o&&o!==`0x`?{data:o,to:a}:{}}}function fs(e){let{data:t,signature:n}=e;us(e);let r=rs({payload:Qo(e.authorization),signature:Lo(e.authorization)}),i=_o(ls,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??r,t??`0x`]),a=C(O(i),{size:32});return x(n,i,a,cs)}function ps(e){try{return us(e),!0}catch{return!1}}var ms=class extends u{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`SignatureErc8010.InvalidWrappedSignatureError`})}};function hs(e){let t=!0,n=``,r=0,i=``,a=!1;for(let o=0;o<e.length;o++){let s=e[o];if([`(`,`)`,`,`].includes(s)&&(t=!0),s===`(`&&r++,s===`)`&&r--,t){if(r===0){if(s===` `&&[`event`,`function`,`error`,``].includes(i))i=``;else if(i+=s,s===`)`){a=!0;break}continue}if(s===` `){e[o-1]!==`,`&&n!==`,`&&n!==`,(`&&(n=``,t=!1);continue}i+=s,n+=s}}if(!a)throw new u(`Unable to normalize signature.`);return i}function gs(e,t){let n=typeof e,r=t.type;switch(r){case`address`:return Ia(e,{strict:!1});case`bool`:return n===`boolean`;case`function`:return n===`string`;case`string`:return n===`string`;default:return r===`tuple`&&`components`in t?Object.values(t.components).every((t,n)=>gs(Object.values(e)[n],t)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n===`number`||n===`bigint`:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n===`string`||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(e=>gs(e,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,``)})):!1}}function _s(e,t,n){for(let r in e){let i=e[r],a=t[r];if(i.type===`tuple`&&a.type===`tuple`&&`components`in i&&`components`in a)return _s(i.components,a.components,n[r]);let o=[i.type,a.type];if((()=>o.includes(`address`)&&o.includes(`bytes20`)?!0:o.includes(`address`)&&o.includes(`string`)||o.includes(`address`)&&o.includes(`bytes`)?Ia(n[r],{strict:!1}):!1)())return o}}function vs(e,t={}){let{prepare:n=!0}=t,r=(()=>Array.isArray(e)||typeof e==`string`?An(e):e)();return{...r,...n?{hash:Ss(r)}:{}}}function ys(e,t,n){let{args:r=[],prepare:i=!0}=n??{},a=Jt(t,{strict:!1}),o=e.filter(e=>a?e.type===`function`||e.type===`error`?bs(e)===k(t,0,4):e.type===`event`?Ss(e)===t:!1:`name`in e&&e.name===t);if(o.length===0)throw new ws({name:t});if(o.length===1)return{...o[0],...i?{hash:Ss(o[0])}:{}};let s;for(let e of o){if(!(`inputs`in e))continue;if(!r||r.length===0){if(!e.inputs||e.inputs.length===0)return{...e,...i?{hash:Ss(e)}:{}};continue}if(!e.inputs||e.inputs.length===0||e.inputs.length!==r.length)continue;if(r.every((t,n)=>{let r=`inputs`in e&&e.inputs[n];return r?gs(t,r):!1})){if(s&&`inputs`in s&&s.inputs){let t=_s(e.inputs,s.inputs,r);if(t)throw new Cs({abiItem:e,type:t[0]},{abiItem:s,type:t[1]})}s=e}}let c=(()=>{if(s)return s;let[e,...t]=o;return{...e,overloads:t}})();if(!c)throw new ws({name:t});return{...c,...i?{hash:Ss(c)}:{}}}function bs(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,n]=e;return ys(t,n)}return e[0]})();return k(Ss(t),0,4)}function xs(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,n]=e;return ys(t,n)}return e[0]})(),n=(()=>typeof t==`string`?t:$e(t))();return hs(n)}function Ss(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,n]=e;return ys(t,n)}return e[0]})();return typeof t!=`string`&&`hash`in t&&t.hash?t.hash:V(w(xs(t)))}var Cs=class extends u{constructor(e,t){super(`Found ambiguous types in overloaded ABI Items.`,{metaMessages:[`\`${e.type}\` in \`${hs($e(e.abiItem))}\`, and`,`\`${t.type}\` in \`${hs($e(t.abiItem))}\``,``,`These types encode differently and cannot be distinguished at runtime.`,`Remove one of the ambiguous items in the ABI.`]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiItem.AmbiguityError`})}},ws=class extends u{constructor({name:e,data:t,type:n=`item`}){let r=(()=>e?` with name "${e}"`:t?` with data "${t}"`:``)();super(`ABI ${n}${r} not found.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`AbiItem.NotFoundError`})}};function Ts(...e){let[t,n=[]]=(()=>{if(Array.isArray(e[0])){let[t,n,r]=e;return[Es(t,n,{args:r}),r]}let[t,n]=e;return[t,n]})(),{overloads:r}=t,i=r?Es([t,...r],t.name,{args:n}):t,a=Ds(i),o=n.length>0?_o(i.inputs,n):void 0;return o?x(a,o):a}function Es(e,t,n){let r=ys(e,t,n);if(r.type!==`function`)throw new ws({name:t,type:`function`});return r}function Ds(e){return bs(e)}const Os=`0x0000000000000000000000000000000000000000`,ks=`0x6492649264926492649264926492649264926492649264926492649264926492`;function As(e){if(k(e,-32)!==ks)throw new Ns(e)}function js(e){let{data:t,signature:n,to:r}=e;return x(_o(yo(`address, bytes, bytes`),[r,t,n]),ks)}function Ms(e){try{return As(e),!0}catch{return!1}}var Ns=class extends u{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`SignatureErc6492.InvalidWrappedSignatureError`})}};function Ps({r:e,s:t,to:r=`hex`,v:i,yParity:a}){let o=(()=>{if(a===0||a===1)return a;if(i&&(i===27n||i===28n||i>=35n))return i%2n==0n?1:0;throw Error("Invalid `v` or `yParity` value")})(),s=`0x${new n.Signature(T(e),T(t)).toCompactHex()}${o===0?`1b`:`1c`}`;return r===`hex`?s:lt(s)}async function Fs(e,t){let{address:n,hash:r,erc6492VerifierAddress:i=t.universalSignatureVerifierAddress??e.chain?.contracts?.erc6492Verifier?.address,multicallAddress:a=t.multicallAddress??e.chain?.contracts?.multicall3?.address}=t,o=(()=>{let e=t.signature;return pt(e)?e:typeof e==`object`&&`r`in e&&`s`in e?Ps(e):Ie(e)})();try{return ps(o)?await Is(e,{...t,multicallAddress:a,signature:o}):await Ls(e,{...t,verifierAddress:i,signature:o})}catch(e){try{if(ft(st(n),await Wr({hash:r,signature:o})))return!0}catch{}if(e instanceof zs)return!1;throw e}}async function Is(e,t){let{address:n,blockNumber:r,blockTag:i,hash:a,multicallAddress:o}=t,{authorization:s,data:c,signature:l,to:u}=ds(t.signature);if(await wi(e,{address:n,blockNumber:r,blockTag:i})===Be([`0xef0100`,s.address]))return await Rs(e,{address:n,blockNumber:r,blockTag:i,hash:a,signature:l});let d={address:s.address,chainId:Number(s.chainId),nonce:Number(s.nonce),r:D(s.r,{size:32}),s:D(s.s,{size:32}),yParity:s.yParity};if(!await Ui({address:n,authorization:d}))throw new zs;let f=await Rr(e,Br,`readContract`)({...o?{address:o}:{code:bt},authorizationList:[d],abi:yt,blockNumber:r,blockTag:`pending`,functionName:`aggregate3`,args:[[...c?[{allowFailure:!0,target:u??n,callData:c}]:[],{allowFailure:!0,target:n,callData:Ye({abi:Xe,functionName:`isValidSignature`,args:[a,l]})}]]});if((f[f.length-1]?.returnData)?.startsWith(`0x1626ba7e`))return!0;throw new zs}async function Ls(e,t){let{address:n,factory:r,factoryData:i,hash:a,signature:o,verifierAddress:s,...c}=t,l=await(async()=>!r&&!i||Ms(o)?o:js({data:i,signature:o,to:r}))(),u=s?{to:s,data:Ye({abi:Ze,functionName:`isValidSig`,args:[n,a,l]}),...c}:{data:Je({abi:Ze,args:[n,a,l],bytecode:Qe}),...c},{data:d}=await Rr(e,Le,`call`)(u).catch(e=>{throw e instanceof p?new zs:e});if(ct(d??`0x0`))return!0;throw new zs}async function Rs(e,t){let{address:n,blockNumber:r,blockTag:i,hash:a,signature:o}=t;if((await Rr(e,Br,`readContract`)({address:n,abi:Xe,args:[a,o],blockNumber:r,blockTag:i,functionName:`isValidSignature`}).catch(e=>{throw e instanceof h?new zs:e})).startsWith(`0x1626ba7e`))return!0;throw new zs}var zs=class extends Error{};const Bs=new Map,Vs=new Map;let Hs=0;function Us(e,t,n){let r=++Hs,i=()=>Bs.get(e)||[],a=()=>{let t=i();Bs.set(e,t.filter(e=>e.id!==r))},o=()=>{let t=i();if(!t.some(e=>e.id===r))return;let n=Vs.get(e);if(t.length===1&&n){let e=n();e instanceof Promise&&e.catch(()=>{})}a()},s=i();if(Bs.set(e,[...s,{id:r,fns:t}]),s&&s.length>0)return o;let c={};for(let e in t)c[e]=((...t)=>{let n=i();if(n.length!==0)for(let r of n)r.fns[e]?.(...t)});let l=n(c);return typeof l==`function`&&Vs.set(e,l),o}function Ws(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let i=!0,a=()=>i=!1;return(async()=>{let o;t&&(o=await e({unpoll:a}));let s=await n?.(o)??r;await Ki(s);let c=async()=>{i&&(await e({unpoll:a}),await Ki(r),c())};c()})(),a}const Gs=D(0,{size:32});async function Ks(e,t){async function n(t){if(t.endsWith(`5792579257925792579257925792579257925792579257925792579257925792`)){let n=Gt(Mt(t,-64,-32)),r=Mt(t,0,-64).slice(2).match(/.{1,64}/g),i=await Promise.all(r.map(t=>Gs.slice(2)===t?void 0:e.request({method:`eth_getTransactionReceipt`,params:[`0x${t}`]},{dedupe:!0}))),a=(()=>i.some(e=>e===null)?100:i.every(e=>e?.status===`0x1`)?200:i.every(e=>e?.status===`0x0`)?500:600)();return{atomic:!1,chainId:ut(n),receipts:i.filter(Boolean),status:a,version:`2.0.0`}}return e.request({method:`wallet_getCallsStatus`,params:[t]})}let{atomic:r=!1,chainId:i,receipts:a,version:o=`2.0.0`,...s}=await n(t.id),[c,l]=(()=>{let e=s.status;return e>=100&&e<200?[`pending`,e]:e>=200&&e<300?[`success`,e]:e>=300&&e<700?[`failure`,e]:e===`CONFIRMED`?[`success`,200]:e===`PENDING`?[`pending`,100]:[void 0,e]})();return{...s,atomic:r,chainId:i?ut(i):void 0,receipts:a?.map(e=>({...e,blockNumber:T(e.blockNumber),gasUsed:T(e.gasUsed),status:Xi[e.status]}))??[],statusCode:l,status:c,version:o}}var qs=class extends l{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:`BundleFailedError`}),Object.defineProperty(this,`result`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}};async function Js(e,t){let{id:n,pollingInterval:r=e.pollingInterval,status:i=({statusCode:e})=>e===200||e>=300,retryCount:a=4,retryDelay:o=({count:e})=>~~(1<<e)*200,timeout:s=6e4,throwOnFailure:c=!1}=t,l=Ft([`waitForCallsStatus`,e.uid,n]),{promise:u,resolve:d,reject:f}=Xt(),p,m=Us(l,{resolve:d,reject:f},t=>{let s=Ws(async()=>{let r=e=>{clearTimeout(p),s(),e(),m()};try{let s=await qi(async()=>{let t=await Rr(e,Ks,`getCallsStatus`)({id:n});if(c&&t.status===`failure`)throw new qs(t);return t},{retryCount:a,delay:o});if(!i(s))return;r(()=>t.resolve(s))}catch(e){r(()=>t.reject(e))}},{interval:r,emitOnBegin:!0});return s});return p=s?setTimeout(()=>{m(),clearTimeout(p),f(new Ys({id:n}))},s):void 0,await u}var Ys=class extends l{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:`WaitForCallsStatusTimeoutError`})}};let Xs=256,Zs;function Qs(e=11){if(!Zs||Xs+e>256*2){Zs=``,Xs=0;for(let e=0;e<256;e++)Zs+=(256+Math.random()*256|0).toString(16).substring(1)}return Zs.substring(Xs,Xs+++e)}function $s(e){let{batch:t,chain:n,ccipRead:r,key:i=`base`,name:a=`Base Client`,type:o=`base`}=e,s=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime==`number`?`pending`:void 0),c=n?.blockTime??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=e.pollingInterval??l,d=e.cacheTime??u,f=e.account?Tt(e.account):void 0,{config:p,request:m,value:h}=e.transport({chain:n,pollingInterval:u}),g={...p,...h},_={account:f,batch:t,cacheTime:d,ccipRead:r,chain:n,key:i,name:a,pollingInterval:u,request:m,transport:g,type:o,uid:Qs(),...s?{experimental_blockTag:s}:{}};function v(e){return t=>{let n=t(e);for(let e in _)delete n[e];let r={...e,...n};return Object.assign(r,{extend:v(r)})}}return Object.assign(_,{extend:v(_)})}function ec({key:e,methods:t,name:n,request:r,retryCount:i=3,retryDelay:a=150,timeout:o,type:s},c){let l=Qs();return{config:{key:e,methods:t,name:n,request:r,retryCount:i,retryDelay:a,timeout:o,type:s},request:Ji(r,{methods:t,retryCount:i,retryDelay:a,uid:l}),value:c}}function tc(e,t={}){let{key:n=`custom`,methods:r,name:i=`Custom Provider`,retryDelay:a}=t;return({retryCount:o})=>ec({key:n,methods:r,name:i,request:e.request.bind(e),retryCount:t.retryCount??o,retryDelay:a,type:`custom`})}function nc(e,t={}){let{key:n=`fallback`,name:r=`Fallback`,rank:i=!1,shouldThrow:a=rc,retryCount:o,retryDelay:s}=t;return(({chain:t,pollingInterval:c=4e3,timeout:l,...u})=>{let d=e,f=()=>{},p=ec({key:n,name:r,async request({method:e,params:n}){let r,i=async(o=0)=>{let s=d[o]({...u,chain:t,retryCount:0,timeout:l});try{let t=await s.request({method:e,params:n});return f({method:e,params:n,response:t,transport:s,status:`success`}),t}catch(c){if(f({error:c,method:e,params:n,transport:s,status:`error`}),a(c)||o===d.length-1||(r??=d.slice(o+1).some(n=>{let{include:r,exclude:i}=n({chain:t}).config.methods||{};return r?r.includes(e):i?!i.includes(e):!0}),!r))throw c;return i(o+1)}};return i()},retryCount:o,retryDelay:s,type:`fallback`},{onResponse:e=>f=e,transports:d.map(e=>e({chain:t,retryCount:0}))});if(i){let e=typeof i==`object`?i:{};ic({chain:t,interval:e.interval??c,onTransports:e=>d=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:d,weights:e.weights})}return p})}function rc(e){return!!(`code`in e&&typeof e.code==`number`&&(e.code===De.code||e.code===Pe.code||y.nodeMessage.test(e.message)||e.code===5e3))}function ic({chain:e,interval:t=4e3,onTransports:n,ping:r,sampleCount:i=10,timeout:a=1e3,transports:o,weights:s={}}){let{stability:c=.7,latency:l=.3}=s,u=[],d=async()=>{let s=await Promise.all(o.map(async t=>{let n=t({chain:e,retryCount:0,timeout:a}),i=Date.now(),o,s;try{await(r?r({transport:n}):n.request({method:`net_listening`})),s=1}catch{s=0}finally{o=Date.now()}return{latency:o-i,success:s}}));u.push(s),u.length>i&&u.shift();let f=Math.max(...u.map(e=>Math.max(...e.map(({latency:e})=>e)))),p=o.map((e,t)=>{let n=u.map(e=>e[t].latency),r=1-n.reduce((e,t)=>e+t,0)/n.length/f,i=u.map(e=>e[t].success),a=i.reduce((e,t)=>e+t,0)/i.length;return a===0?[0,t]:[l*r+c*a,t]}).sort((e,t)=>t[0]-e[0]);n(p.map(([,e])=>o[e])),await Ki(t),d()};d()}var ac=class extends l{constructor(){super(`No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.`,{docsPath:`/docs/clients/intro`,name:`UrlRequiredError`})}};function oc(e,t={}){let{batch:n,fetchFn:r,fetchOptions:i,key:a=`http`,methods:o,name:s=`HTTP JSON-RPC`,onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=t;return({chain:f,retryCount:p,timeout:m})=>{let{batchSize:h=1e3,wait:g=0}=typeof n==`object`?n:{},_=t.retryCount??p,v=m??t.timeout??1e4,y=e||f?.rpcUrls.default.http[0];if(!y)throw new ac;let ee=na(y,{fetchFn:r,fetchOptions:i,onRequest:c,onResponse:l,timeout:v});return ec({key:a,methods:o,name:s,async request({method:e,params:t}){let r={method:e,params:t},{schedule:i}=Ve({id:y,wait:g,shouldSplitBatch(e){return e.length>h},fn:e=>ee.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:a,result:o}]=await(async e=>n?i(e):[await ee.request({body:e})])(r);if(d)return{error:a,result:o};if(a)throw new Ce({body:r,error:a,url:y});return o},retryCount:_,retryDelay:u,timeout:v,type:`http`},{fetchOptions:i,url:y})}}const sc={gasPriceOracle:{address:`0x420000000000000000000000000000000000000F`},l1Block:{address:`0x4200000000000000000000000000000000000015`},l2CrossDomainMessenger:{address:`0x4200000000000000000000000000000000000007`},l2Erc721Bridge:{address:`0x4200000000000000000000000000000000000014`},l2StandardBridge:{address:`0x4200000000000000000000000000000000000010`},l2ToL1MessagePasser:{address:`0x4200000000000000000000000000000000000016`}},cc={block:ri({format(e){return{transactions:e.transactions?.map(e=>{if(typeof e==`string`)return e;let t=$r(e);return t.typeHex===`0x7e`&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?T(e.mint):void 0,t.sourceHash=e.sourceHash,t.type=`deposit`),t}),stateRoot:e.stateRoot}}}),transaction:ei({format(e){let t={};return e.type===`0x7e`&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?T(e.mint):void 0,t.sourceHash=e.sourceHash,t.type=`deposit`),t}}),transactionReceipt:Qi({format(e){return{l1GasPrice:e.l1GasPrice?T(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?T(e.l1GasUsed):null,l1Fee:e.l1Fee?T(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null}}})};function lc(e,t){return fc(e)?dc(e):Fi(e,t)}const uc={transaction:lc};function dc(e){pc(e);let{sourceHash:t,data:n,from:r,gas:i,isSystemTx:a,mint:o,to:s,value:c}=e,l=[t,r,s??`0x`,o?A(o):`0x`,c?A(c):`0x`,i?A(i):`0x`,a?`0x1`:`0x`,n??`0x`];return Be([`0x7e`,Gr(l)])}function fc(e){return e.type===`deposit`||e.sourceHash!==void 0}function pc(e){let{from:t,to:n}=e;if(t&&!E(t))throw new b({address:t});if(n&&!E(n))throw new b({address:n})}const mc={blockTime:2e3,contracts:sc,formatters:cc,serializers:uc},hc=B({id:31337,name:`Anvil`,nativeCurrency:{decimals:18,name:`Ether`,symbol:`ETH`},rpcUrls:{default:{http:[`http://127.0.0.1:8545`],webSocket:[`ws://127.0.0.1:8545`]}}}),gc=B({id:42161,name:`Arbitrum One`,nativeCurrency:{name:`Ether`,symbol:`ETH`,decimals:18},blockTime:250,rpcUrls:{default:{http:[`https://arb1.arbitrum.io/rpc`]}},blockExplorers:{default:{name:`Arbiscan`,url:`https://arbiscan.io`,apiUrl:`https://api.arbiscan.io/api`}},contracts:{multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:7654707}}}),_c=B({id:421614,name:`Arbitrum Sepolia`,blockTime:250,nativeCurrency:{name:`Arbitrum Sepolia Ether`,symbol:`ETH`,decimals:18},rpcUrls:{default:{http:[`https://sepolia-rollup.arbitrum.io/rpc`]}},blockExplorers:{default:{name:`Arbiscan`,url:`https://sepolia.arbiscan.io`,apiUrl:`https://api-sepolia.arbiscan.io/api`}},contracts:{multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:81930}},testnet:!0}),vc=B({...mc,id:8453,name:`Base`,nativeCurrency:{name:`Ether`,symbol:`ETH`,decimals:18},rpcUrls:{default:{http:[`https://mainnet.base.org`]}},blockExplorers:{default:{name:`Basescan`,url:`https://basescan.org`,apiUrl:`https://api.basescan.org/api`}},contracts:{...mc.contracts,disputeGameFactory:{1:{address:`0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e`}},l2OutputOracle:{1:{address:`0x56315b90c40730925ec5485cf004d835058518A0`}},multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:5022},portal:{1:{address:`0x49048044D57e1C92A77f79988d21Fa8fAF74E97e`,blockCreated:17482143}},l1StandardBridge:{1:{address:`0x3154Cf16ccdb4C6d922629664174b904d80F2C35`,blockCreated:17482143}}},sourceId:1});({...vc});const yc=11155111,bc=B({...mc,id:84532,network:`base-sepolia`,name:`Base Sepolia`,nativeCurrency:{name:`Sepolia Ether`,symbol:`ETH`,decimals:18},rpcUrls:{default:{http:[`https://sepolia.base.org`]}},blockExplorers:{default:{name:`Basescan`,url:`https://sepolia.basescan.org`,apiUrl:`https://api-sepolia.basescan.org/api`}},contracts:{...mc.contracts,disputeGameFactory:{[yc]:{address:`0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1`}},l2OutputOracle:{[yc]:{address:`0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254`}},portal:{[yc]:{address:`0x49f53e41452c74589e85ca1677426ba426459e85`,blockCreated:4446677}},l1StandardBridge:{[yc]:{address:`0xfd0Bf71F60660E2f608ed56e1659C450eB113120`,blockCreated:4446677}},multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:1059647}},testnet:!0,sourceId:yc});({...bc});const xc=B({id:56,name:`BNB Smart Chain`,blockTime:750,nativeCurrency:{decimals:18,name:`BNB`,symbol:`BNB`},rpcUrls:{default:{http:[`https://56.rpc.thirdweb.com`]}},blockExplorers:{default:{name:`BscScan`,url:`https://bscscan.com`,apiUrl:`https://api.bscscan.com/api`}},contracts:{multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:15921452}}}),Sc={estimateFeesPerGas:async e=>{if(!e.request?.feeCurrency)return null;let[t,n]=await Promise.all([Cc(e.client,e.request.feeCurrency),wc(e.client,e.request.feeCurrency)]);return{maxFeePerGas:e.multiply(t-n)+n,maxPriorityFeePerGas:n}}};async function Cc(e,t){let n=await e.request({method:`eth_gasPrice`,params:[t]});return BigInt(n)}async function wc(e,t){let n=await e.request({method:`eth_maxPriorityFeePerGas`,params:[t]});return BigInt(n)}function Tc(e){return e===0||e===0n||e==null||e===`0`||e===``||typeof e==`string`&&(Gt(e).toLowerCase()===`0x`||Gt(e).toLowerCase()===`0x00`)}function Ec(e){return!Tc(e)}function Dc(e){return e.maxFeePerGas!==void 0&&e.maxPriorityFeePerGas!==void 0}function Oc(e){return e.type===`cip64`?!0:Dc(e)&&Ec(e.feeCurrency)}const kc={block:ri({format(e){return{transactions:e.transactions?.map(e=>typeof e==`string`?e:{...$r(e),...e.gatewayFee?{gatewayFee:T(e.gatewayFee),gatewayFeeRecipient:e.gatewayFeeRecipient}:{},feeCurrency:e.feeCurrency})}}}),transaction:ei({format(e){if(e.type===`0x7e`)return{isSystemTx:e.isSystemTx,mint:e.mint?T(e.mint):void 0,sourceHash:e.sourceHash,type:`deposit`};let t={feeCurrency:e.feeCurrency};return e.type===`0x7b`?t.type=`cip64`:(e.type===`0x7c`&&(t.type=`cip42`),t.gatewayFee=e.gatewayFee?T(e.gatewayFee):null,t.gatewayFeeRecipient=e.gatewayFeeRecipient),t}}),transactionRequest:Ke({format(e){let t={};return e.feeCurrency&&(t.feeCurrency=e.feeCurrency),Oc(e)&&(t.type=`0x7b`),t}})};function Ac(e,t){return Oc(e)?Mc(e,t):lc(e,t)}const jc={transaction:Ac};function Mc(e,t){Pc(e);let{chainId:n,gas:r,nonce:i,to:a,value:o,maxFeePerGas:s,maxPriorityFeePerGas:c,accessList:l,feeCurrency:u,data:d}=e,f=[A(n),i?A(i):`0x`,c?A(c):`0x`,s?A(s):`0x`,r?A(r):`0x`,a??`0x`,o?A(o):`0x`,d??`0x`,Pi(l),u,...Vi(e,t)];return Be([`0x7b`,Gr(f)])}const Nc=_t;function Pc(e){let{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:i,to:a,feeCurrency:o}=e;if(t<=0)throw new oe({chainId:t});if(a&&!E(a))throw new b({address:a});if(r)throw new l("`gasPrice` is not a valid CIP-64 Transaction attribute.");if(Ec(i)&&i>Nc)throw new ee({maxFeePerGas:i});if(Ec(n)&&Ec(i)&&n>i)throw new Ee({maxFeePerGas:i,maxPriorityFeePerGas:n});if(Ec(o)&&!E(o))throw new l("`feeCurrency` MUST be a token address for CIP-64 transactions.");if(Tc(o))throw new l("`feeCurrency` must be provided for CIP-64 transactions.")}const Fc=B({blockTime:1e3,contracts:sc,formatters:kc,serializers:jc,fees:Sc,id:42220,name:`Celo`,nativeCurrency:{decimals:18,name:`CELO`,symbol:`CELO`},rpcUrls:{default:{http:[`https://forno.celo.org`]}},blockExplorers:{default:{name:`Celo Explorer`,url:`https://celoscan.io`,apiUrl:`https://api.celoscan.io/api`}},contracts:{multicall3:{address:`0xcA11bde05977b3631167028862bE2a173976CA11`,blockCreated:13112599}},testnet:!1}),Ic=B({id:1,name:`Ethereum`,nativeCurrency:{name:`Ether`,symbol:`ETH`,decimals:18},blockTime:12e3,rpcUrls:{default:{http:[`https://eth.merkle.io`]}},blockExplorers:{default:{name:`Etherscan`,url:`https://etherscan.io`,apiUrl:`https://api.etherscan.io/api`}},contracts:{ensUniversalResolver:{address:`0xeeeeeeee14d718c2b47d9923deab1335e144eeee`,blockCreated:23085558},multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:14353601}}}),Lc=B({...mc,id:10,name:`OP Mainnet`,nativeCurrency:{name:`Ether`,symbol:`ETH`,decimals:18},rpcUrls:{default:{http:[`https://mainnet.optimism.io`]}},blockExplorers:{default:{name:`Optimism Explorer`,url:`https://optimistic.etherscan.io`,apiUrl:`https://api-optimistic.etherscan.io/api`}},contracts:{...mc.contracts,disputeGameFactory:{1:{address:`0xe5965Ab5962eDc7477C8520243A95517CD252fA9`}},l2OutputOracle:{1:{address:`0xdfe97868233d1aa22e815a266982f2cf17685a27`}},multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:4286263},portal:{1:{address:`0xbEb5Fc579115071764c7423A4f12eDde41f106Ed`}},l1StandardBridge:{1:{address:`0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1`}}},sourceId:1}),Rc=11155111,zc=B({...mc,id:11155420,name:`OP Sepolia`,nativeCurrency:{name:`Sepolia Ether`,symbol:`ETH`,decimals:18},rpcUrls:{default:{http:[`https://sepolia.optimism.io`]}},blockExplorers:{default:{name:`Blockscout`,url:`https://optimism-sepolia.blockscout.com`,apiUrl:`https://optimism-sepolia.blockscout.com/api`}},contracts:{...mc.contracts,disputeGameFactory:{[Rc]:{address:`0x05F9613aDB30026FFd634f38e5C4dFd30a197Fa1`}},l2OutputOracle:{[Rc]:{address:`0x90E9c4f8a994a250F6aEfd61CAFb4F2e895D458F`}},multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:1620204},portal:{[Rc]:{address:`0x16Fc5058F25648194471939df75CF27A2fdC48BC`}},l1StandardBridge:{[Rc]:{address:`0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1`}}},testnet:!0,sourceId:Rc}),Bc=B({id:137,name:`Polygon`,nativeCurrency:{name:`POL`,symbol:`POL`,decimals:18},rpcUrls:{default:{http:[`https://polygon-rpc.com`]}},blockExplorers:{default:{name:`PolygonScan`,url:`https://polygonscan.com`,apiUrl:`https://api.polygonscan.com/api`}},contracts:{multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:25770160}}}),Vc=B({id:11155111,name:`Sepolia`,nativeCurrency:{name:`Sepolia Ether`,symbol:`ETH`,decimals:18},rpcUrls:{default:{http:[`https://sepolia.drpc.org`]}},blockExplorers:{default:{name:`Etherscan`,url:`https://sepolia.etherscan.io`,apiUrl:`https://api-sepolia.etherscan.io/api`}},contracts:{multicall3:{address:`0xca11bde05977b3631167028862be2a173976ca11`,blockCreated:751532},ensUniversalResolver:{address:`0xeeeeeeee14d718c2b47d9923deab1335e144eeee`,blockCreated:8928790}},testnet:!0});var Hc=Dn({arbitrum:()=>gc,arbitrumSepolia:()=>_c,base:()=>vc,baseSepolia:()=>bc,bsc:()=>xc,celo:()=>Fc,mainnet:()=>Ic,optimism:()=>Lc,optimismSepolia:()=>zc,polygon:()=>Bc,sepolia:()=>Vc});const Uc=[vc,...Object.values(Hc).filter(e=>e.id!==vc.id)],Wc=hc;({...Wc}),{...Wc};const Gc=e(BigInt(`0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff`)),Kc=Gc.create(BigInt(`-3`)),qc=BigInt(`0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b`),Jc=t({a:Kc,b:qc,Fp:Gc,n:BigInt(`0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551`),Gx:BigInt(`0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296`),Gy:BigInt(`0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5`),h:BigInt(1),lowS:!1},r),Yc=e(BigInt(`0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff`)),Xc=Yc.create(BigInt(`-3`)),Zc=BigInt(`0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef`);t({a:Xc,b:Zc,Fp:Yc,n:BigInt(`0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973`),Gx:BigInt(`0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7`),Gy:BigInt(`0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f`),h:BigInt(1),lowS:!1},i);const Qc=e(BigInt(`0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff`)),$c=Qc.create(BigInt(`-3`)),el=BigInt(`0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00`);t({a:$c,b:el,Fp:Qc,n:BigInt(`0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409`),Gx:BigInt(`0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66`),Gy:BigInt(`0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650`),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},a);const tl=Jc,nl=Jc;function rl(e){let{privateKey:t}=e,n=nl.ProjectivePoint.fromPrivateKey(typeof t==`string`?t.slice(2):S(t).slice(2));return Sa(n)}function il(e={}){let{as:t=`Hex`}=e,n=nl.utils.randomPrivateKey();return t===`Hex`?S(n):n}function al(e){let{extraEntropy:t=!1,hash:n,payload:r,privateKey:i}=e,{r:a,s:o,recovery:s}=nl.sign(r instanceof Uint8Array?r:at(r),i instanceof Uint8Array?i:at(i),{extraEntropy:typeof t==`boolean`?t:tt(t).slice(2),lowS:!0,...n?{prehash:!0}:{}});return{r:a,s:o,yParity:s}}function ol(e){let{domain:t,message:n,primaryType:r,types:i}=e,a=(e,t)=>{for(let n of e){let{name:e,type:r}=n,o=t[e],s=r.match(Ha);if(s&&(typeof o==`number`||typeof o==`bigint`)){let[,e,t]=s;C(o,{signed:e===`int`,size:Number.parseInt(t??``,10)/8})}if(r===`address`&&typeof o==`string`&&!Ia(o))throw new La({address:o,cause:new Ra});let c=r.match(Va);if(c){let[,e]=c;if(e&&O(o)!==Number.parseInt(e,10))throw new pl({expectedSize:Number.parseInt(e,10),givenSize:O(o)})}let l=i[r];l&&(xl(r),a(l,o))}};if(i.EIP712Domain&&t){if(typeof t!=`object`)throw new ml({domain:t});a(i.EIP712Domain,t)}if(r!==`EIP712Domain`)if(i[r])a(i[r],n);else throw new hl({primaryType:r,types:i})}function sl(e){let{domain:t={},message:n,primaryType:r}=e,i={EIP712Domain:ll(t),...e.types};ol({domain:t,message:n,primaryType:r,types:i});let a=[`0x19`,`0x01`];return t&&a.push(dl({domain:t,types:i})),r!==`EIP712Domain`&&a.push(fl({data:n,primaryType:r,types:i})),x(...a)}function cl(e){let{primaryType:t,types:n}=e,r=``,i=bl({primaryType:t,types:n});i.delete(t);let a=[t,...Array.from(i).sort()];for(let e of a)r+=`${e}(${(n[e]??[]).map(({name:e,type:t})=>`${t} ${e}`).join(`,`)})`;return r}function ll(e){return[typeof e?.name==`string`&&{name:`name`,type:`string`},e?.version&&{name:`version`,type:`string`},(typeof e?.chainId==`number`||typeof e?.chainId==`bigint`)&&{name:`chainId`,type:`uint256`},e?.verifyingContract&&{name:`verifyingContract`,type:`address`},e?.salt&&{name:`salt`,type:`bytes32`}].filter(Boolean)}function ul(e){return V(sl(e))}function dl(e){let{domain:t,types:n}=e;return fl({data:t,primaryType:`EIP712Domain`,types:{...n,EIP712Domain:n?.EIP712Domain||ll(t)}})}function fl(e){let{data:t,primaryType:n,types:r}=e,i=_l({data:t,primaryType:n,types:r});return V(i)}var pl=class extends u{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`TypedData.BytesSizeMismatchError`})}},ml=class extends u{constructor({domain:e}){super(`Invalid domain "${It(e)}".`,{metaMessages:[`Must be a valid EIP-712 domain.`]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`TypedData.InvalidDomainError`})}},hl=class extends u{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{metaMessages:["Check that the primary type is a key in `types`."]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`TypedData.InvalidPrimaryTypeError`})}},gl=class extends u{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:[`Struct type must not be a Solidity type.`]}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`TypedData.InvalidStructTypeError`})}};function _l(e){let{data:t,primaryType:n,types:r}=e,i=[{type:`bytes32`}],a=[vl({primaryType:n,types:r})];for(let e of r[n]??[]){let[n,o]=yl({types:r,name:e.name,type:e.type,value:t[e.name]});i.push(n),a.push(o)}return _o(i,a)}function vl(e){let{primaryType:t,types:n}=e,r=w(cl({primaryType:t,types:n}));return V(r)}function yl(e){let{types:t,name:n,type:r,value:i}=e;if(t[r]!==void 0)return[{type:`bytes32`},V(_l({data:i,primaryType:r,types:t}))];if(r===`bytes`)return i=`0x${(i.length%2?`0`:``)+i.slice(2)}`,[{type:`bytes32`},V(i,{as:`Hex`})];if(r===`string`)return[{type:`bytes32`},V(ot(i),{as:`Hex`})];if(r.lastIndexOf(`]`)===r.length-1){let e=r.slice(0,r.lastIndexOf(`[`)),a=i.map(r=>yl({name:n,type:e,types:t,value:r}));return[{type:`bytes32`},V(_o(a.map(([e])=>e),a.map(([,e])=>e)))]}return[{type:r},i]}function bl(e,t=new Set){let{primaryType:n,types:r}=e,i=n.match(/^\w*/u)?.[0];if(t.has(i)||r[i]===void 0)return t;t.add(i);for(let e of r[i])bl({primaryType:e.type,types:r},t);return t}function xl(e){if(e===`address`||e===`bool`||e===`string`||e.startsWith(`bytes`)||e.startsWith(`uint`)||e.startsWith(`int`))throw new gl({type:e})}function Sl(e,t=0){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Cl({value:e});let[n=``,r=`0`]=e.split(`.`),i=n.startsWith(`-`);if(i&&(n=n.slice(1)),r=r.replace(/(0+)$/,``),t===0)Math.round(Number(`.${r}`))===1&&(n=`${BigInt(n)+1n}`),r=``;else if(r.length>t){let[e,i,a]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],o=Math.round(Number(`${i}.${a}`));r=o>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,`0`):`${e}${o}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,`0`);return BigInt(`${i?`-`:``}${n}${r}`)}var Cl=class extends u{constructor({value:e}){super(`Value \`${e}\` is not a valid decimal number.`),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Value.InvalidDecimalNumberError`})}};const wl=new TextEncoder,Tl=new TextDecoder,El=Object.fromEntries(Array.from(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`).map((e,t)=>[t,e.charCodeAt(0)])),Dl={...Object.fromEntries(Array.from(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`).map((e,t)=>[e.charCodeAt(0),t])),61:0,45:62,95:63};function Ol(e,t={}){let{pad:n=!0,url:r=!1}=t,i=new Uint8Array(Math.ceil(e.length/3)*4);for(let t=0,n=0;n<e.length;t+=4,n+=3){let r=(e[n]<<16)+(e[n+1]<<8)+(e[n+2]|0);i[t]=El[r>>18],i[t+1]=El[r>>12&63],i[t+2]=El[r>>6&63],i[t+3]=El[r&63]}let a=e.length%3,o=Math.floor(e.length/3)*4+(a&&a+1),s=Tl.decode(new Uint8Array(i.buffer,0,o));return n&&a===1&&(s+=`==`),n&&a===2&&(s+=`=`),r&&(s=s.replaceAll(`+`,`-`).replaceAll(`/`,`_`)),s}function kl(e,t={}){return Ol(at(e),t)}function Al(e){let t=e.replace(/=+$/,``),n=t.length,r=new Uint8Array(n+3);wl.encodeInto(t+`===`,r);for(let e=0,n=0;e<t.length;e+=4,n+=3){let t=(Dl[r[e]]<<18)+(Dl[r[e+1]]<<12)+(Dl[r[e+2]]<<6)+Dl[r[e+3]];r[n]=t>>16,r[n+1]=t>>8&255,r[n+2]=t&255}let i=(n>>2)*3+(n%4&&n%4-1);return new Uint8Array(r.buffer,0,i)}function jl(e){let t=e[4]===0?5:4,n=t+32,r=e[n+2]===0?n+3:n+2,i=BigInt(S(e.slice(t,n))),a=BigInt(S(e.slice(r)));return{r:i,s:a>tl.CURVE.n/2n?tl.CURVE.n-a:a}}async function Ml(e){try{let t=e.getPublicKey();if(!t)throw new Vl;let n=new Uint8Array(t),r=await crypto.subtle.importKey(`spki`,new Uint8Array(n),{name:`ECDSA`,namedCurve:`P-256`,hash:`SHA-256`},!0,[`verify`]),i=new Uint8Array(await crypto.subtle.exportKey(`raw`,r));return Sa(i)}catch(t){if(t.message!==`Permission denied to access object`)throw t;let n=new Uint8Array(e.attestationObject),r=e=>{let t=new Uint8Array([e,88,32]);for(let e=0;e<n.length-t.length;e++)if(t.every((t,r)=>n[e+r]===t))return e+t.length;throw new Vl},i=r(33),a=r(34);return Sa(new Uint8Array([4,...n.slice(i,i+32),...n.slice(a,a+32)]))}}const Nl=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function Pl(e){let{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials),...n}=e,r=Ll(n);try{let e=await t(r);if(!e)throw new Vl;let n=e.response,i=await Ml(n);return{id:e.id,publicKey:i,raw:e}}catch(e){throw new Vl({cause:e})}}function Fl(e={}){let{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,i=ba(w(n)),a=C(t,{size:1}),o=C(r,{size:4});return x(i,a,o)}function Il(e){let{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:i=window.location.origin}=e;return JSON.stringify({type:`webauthn.get`,challenge:kl(t,{url:!0,pad:!1}),origin:i,crossOrigin:n,...r})}function Ll(e){let{attestation:t=`none`,authenticatorSelection:n={residentKey:`preferred`,requireResidentKey:!1,userVerification:`required`},challenge:r=Nl,excludeCredentialIds:i,extensions:a,name:o,rp:s={id:window.location.hostname,name:window.document.title},user:c}=e,l=c?.name??o;return{publicKey:{attestation:t,authenticatorSelection:n,challenge:r,...i?{excludeCredentials:i?.map(e=>({id:Al(e),type:`public-key`}))}:{},pubKeyCredParams:[{type:`public-key`,alg:-7}],...a&&{extensions:a},rp:s,user:{id:c?.id??V(ot(l),{as:`Bytes`}),name:l,displayName:c?.displayName??l}}}}function Rl(e){let{credentialId:t,challenge:n,extensions:r,rpId:i=window.location.hostname,userVerification:a=`required`}=e;return{publicKey:{...t?{allowCredentials:Array.isArray(t)?t.map(e=>({id:Al(e),type:`public-key`})):[{id:Al(t),type:`public-key`}]}:{},challenge:at(n),...r&&{extensions:r},rpId:i,userVerification:a}}}function zl(e){let{challenge:t,crossOrigin:n,extraClientData:r,flag:i,origin:a,rpId:o,signCount:s,userVerification:c=`required`}=e,l=Fl({flag:i,rpId:o,signCount:s}),u=Il({challenge:t,crossOrigin:n,extraClientData:r,origin:a}),d=ba(w(u)),f=u.indexOf(`"challenge"`),p=u.indexOf(`"type"`),m={authenticatorData:l,clientDataJSON:u,challengeIndex:f,typeIndex:p,userVerificationRequired:c===`required`},h=x(l,d);return{metadata:m,payload:h}}async function Bl(e){let{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials),...n}=e,r=Rl(n);try{let e=await t(r);if(!e)throw new Hl;let n=e.response,i=String.fromCharCode(...new Uint8Array(n.clientDataJSON)),a=i.indexOf(`"challenge"`),o=i.indexOf(`"type"`),s=jl(new Uint8Array(n.signature));return{metadata:{authenticatorData:S(new Uint8Array(n.authenticatorData)),clientDataJSON:i,challengeIndex:a,typeIndex:o,userVerificationRequired:r.publicKey.userVerification===`required`},signature:s,raw:e}}catch(e){throw new Hl({cause:e})}}var Vl=class extends u{constructor({cause:e}={}){super(`Failed to create credential.`,{cause:e}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`WebAuthnP256.CredentialCreationFailedError`})}},Hl=class extends u{constructor({cause:e}={}){super(`Failed to request credential.`,{cause:e}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`WebAuthnP256.CredentialRequestFailedError`})}};async function Ul(e={}){let{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:`ECDSA`,namedCurve:`P-256`},t,[`sign`,`verify`]),r=await globalThis.crypto.subtle.exportKey(`raw`,n.publicKey),i=Sa(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:i}}async function Wl(e){let{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:`ECDSA`,hash:`SHA-256`},n,nt(t)),i=rt(new Uint8Array(r)),a=Rt(jt(i,0,32)),o=Rt(jt(i,32,64));return o>tl.CURVE.n/2n&&(o=tl.CURVE.n-o),{r:a,s:o}}const Gl=`0x3232323232323232323232323232323232323232`,Kl=`0x32323232`,ql={p256:`p256`,secp256k1:`secp256k1`,webauthnp256:`webauthn-p256`},Jl={admin:`admin`,normal:`session`},Yl={0:`minute`,1:`hour`,2:`day`,3:`week`,4:`month`,5:`year`},Xl={address:`secp256k1`,p256:`p256`,secp256k1:`secp256k1`,"webauthn-p256":`webauthnp256`},Zl={admin:`admin`,session:`normal`},Ql={address:2,p256:0,secp256k1:2,"webauthn-p256":1},$l={day:2,hour:1,minute:0,month:4,week:3,year:5};function eu(e={}){let t=ns();return au({...e,privateKey:t})}async function tu(e){let{createFn:t,label:n,rpId:r,userId:i}=e,a=await Pl({authenticatorSelection:{requireResidentKey:!0,residentKey:`required`,userVerification:`required`},createFn:t,extensions:{credProps:!0},rp:r?{id:r,name:r}:void 0,user:{displayName:n,id:new Uint8Array(i??ot(n)),name:n}});return ou({...e,credential:{id:a.id,publicKey:a.publicKey},id:i?Vt(i):Ta(a.publicKey,{includePrefix:!1})})}function nu(e={}){let t=il();return su({...e,privateKey:t})}async function ru(e={}){let t=await Ul();return cu({...e,keyPair:t})}function U(e,t={}){let{chainId:n=e.chainId}=t,{expiry:r=0,id:i,prehash:a=!1,role:o=`admin`,type:s}=e,c=(()=>{let t=e.publicKey;return t===`0x`?t:s===`secp256k1`||s===`address`?O(t)===20||Lt(k(t,0,12))===0n?k(t,-20):Fa(wa(t)):t})();return{...e,chainId:n,expiry:r,hash:lu({publicKey:c,type:s}),id:(i??c).toLowerCase(),prehash:a,publicKey:c.toLowerCase(),role:o,type:s}}function iu(e,t){let{chainId:n}=t,{publicKey:r}=e,i=O(r)===20||Lt(k(r,0,12))===0n,a={};for(let t of e.permissions)t.type===`call`&&(a.calls??=[],a.calls.push({signature:t.selector,to:t.to===Gl?void 0:t.to})),t.type===`spend`&&(a.spend??=[],a.spend.push({limit:t.limit,period:t.period,token:t.token}));return U({chainId:n,expiry:e.expiry,permissions:a,publicKey:e.publicKey,role:Jl[e.role],type:i?`address`:ql[e.type]})}function au(e){let{privateKey:t,role:n}=e,r=(()=>e.publicKey?e.publicKey:t?Fa(ts({privateKey:t})):e.address.toLowerCase())();return U({expiry:e.expiry??0,feeToken:e.feeToken,permissions:e.permissions,privateKey:t?()=>t:void 0,publicKey:r,role:n,type:`secp256k1`})}function ou(e){let{credential:t,id:n,rpId:r}=e,i=Ta(t.publicKey,{includePrefix:!1});return U({chainId:e.chainId,expiry:e.expiry??0,feeToken:e.feeToken,id:n,permissions:e.permissions,privateKey:{credential:t,rpId:r},publicKey:i,role:e.role,type:`webauthn-p256`})}function su(e){let{privateKey:t}=e,n=Ta(rl({privateKey:t}),{includePrefix:!1});return U({chainId:e.chainId,expiry:e.expiry??0,feeToken:e.feeToken,permissions:e.permissions,privateKey:{privateKey(){return t}},publicKey:n,role:e.role,type:`webauthn-p256`})}function cu(e){let{chainId:t,expiry:n,feeToken:r,keyPair:i,permissions:a,role:o}=e,{privateKey:s}=i,c=Ta(i.publicKey,{includePrefix:!1});return U({chainId:t,expiry:n,feeToken:r,permissions:a,prehash:!0,privateKey:s,publicKey:c,role:o,type:`p256`})}function lu(e){let{type:t}=e,n=uu(e.publicKey);return V(_o([{type:`uint8`},{type:`bytes32`}],[Ql[t],V(n)]))}function uu(e){return O(e)<32?xt(e,32):e}async function du(e,t){let{address:n,storage:r,webAuthn:i,wrap:a=!0}=t,{privateKey:o,publicKey:s,type:c}=e;if(!o)throw Error(`Key does not have a private key to sign with.

Key:
`+It(e,null,2));let l=(()=>n?ul({domain:{verifyingContract:n},message:{digest:t.payload},primaryType:`ERC1271Sign`,types:{ERC1271Sign:[{name:`digest`,type:`bytes32`}]}}):t.payload)(),[u,d]=await(async()=>{if(c===`p256`){let{privateKey:t}=e;if(typeof t==`function`)return[Bo(al({payload:l,privateKey:t()})),!1];if(t instanceof CryptoKey)return[Bo(await Wl({payload:l,privateKey:t})),!0]}if(c===`secp256k1`)return[Bo(ss({payload:l,privateKey:o()})),!1];if(c===`webauthn-p256`){if(o.privateKey){let{payload:e,metadata:t}=zl({challenge:l,origin:`https://ithaca.xyz`,rpId:`ithaca.xyz`}),{r:n,s:r}=al({hash:!0,payload:e,privateKey:o.privateKey()});return[hu({metadata:t,signature:{r:n,s:r}}),!1]}let{credential:t,rpId:n}=o,a=`porto.webauthnVerified.${e.hash}`,s=Date.now(),c=!0;if(r){let e=await r.getItem(a);c=!e||s-e>6e5}let{signature:{r:u,s:d},raw:f,metadata:p}=await Bl({challenge:l,credentialId:t.id,getFn:i?.getFn,rpId:n,userVerification:c?`required`:`preferred`}),m=f.response;if(!m?.userHandle)throw Error(`No user handle in response`,{cause:{response:m}});let h=Vt(new Uint8Array(m.userHandle));if(e.id&&Ia(e.id)&&!H(e.id,h))throw Error(`supplied webauthn key "${e.id}" does not match signature webauthn key "${h}"`,{cause:{id:h,key:e}});return c&&r&&await r.setItem(a,s),[hu({metadata:p,signature:{r:u,s:d}}),!1]}throw Error(`Key type "${c}" is not supported.\n\nKey:\n`+It(e,null,2))})();return a?gu(u,{keyType:c,prehash:d,publicKey:s}):u}function fu(e,t={}){let{expiry:n=0,prehash:r=!1,publicKey:i,role:a=`admin`,type:o}=e,{feeTokens:s,orchestrator:c}=t,l=Object.entries(pu(e,{feeTokens:s})).map(([e,t])=>{if(e===`calls`)return t.map(({signature:e,to:t})=>({selector:(()=>e?Jt(e)?e:Ds(e):Kl)(),to:t??Gl,type:`call`}));if(e!==`feeToken`){if(e===`spend`)return t.map(({limit:e,period:t,token:n})=>({limit:e,period:t,token:n,type:`spend`}));throw Error(`Invalid permission type "${e}".`)}}).flat().filter(Boolean);return e.role===`session`&&c&&l.push({selector:Kl,to:c,type:`call`}),{expiry:n,permissions:l??[],prehash:r,publicKey:uu(i),role:Zl[a],type:Xl[o]}}function pu(e,t){let{permissions:n}=e,r=n?.calls?[...n.calls]:[],i=n?.spend?[...n.spend]:[],a=t.feeTokens?.filter(e=>e.feeToken);if(a&&a.length>0){let t=mu(e,{feeTokens:a});if(t){let e=-1,n=$l.year;for(let r=0;r<i.length;r++){let a=i[r];if(a.token&&H(t.address,a.token)){e=r;break}if(!a.token&&t.address===Os){e=r;break}let o=$l[a.period];o<n&&(n=o)}e===-1?typeof n==`number`&&i.unshift({limit:t.value,period:Yl[n],token:t.address}):(i[e]={...i[e],limit:i[e].limit+t.value},i.unshift(i.splice(e,1)[0]))}}return{...n,calls:r,spend:i}}function mu(e,t){let{feeTokens:n}=t;if(!e.feeToken)return;let r=n.find(t=>e.feeToken.symbol===t.symbol?!0:!e.feeToken.symbol||e.feeToken.symbol===`native`?t.address===Os:!1);if(!r)return;let i=Sl(e.feeToken.limit,r.decimals);return{...r,value:i}}function hu(e){let{metadata:t,signature:n}=e;return _o(yo([`struct WebAuthnAuth { bytes authenticatorData; string clientDataJSON; uint256 challengeIndex; uint256 typeIndex; bytes32 r; bytes32 s; }`,`WebAuthnAuth auth`]),[{authenticatorData:t.authenticatorData,challengeIndex:BigInt(t.challengeIndex),clientDataJSON:t.clientDataJSON,r:C(n.r,{size:32}),s:C(n.s,{size:32}),typeIndex:BigInt(t.typeIndex)}])}function gu(e,t){let{keyType:n,prehash:r=!1,publicKey:i}=t,a=lu({publicKey:i,type:n});return vo([`bytes`,`bytes32`,`bool`],[e,a,r])}const W=()=>j.templateLiteral([`0x`,j.string()],{message:`Needs string in format ^0x[A-Fa-f0-9]{40}$.`}),G=()=>j.templateLiteral([`0x`,j.string()],{message:`Needs string in format ^0x[A-Fa-f0-9]+$.`}),K=()=>j.codec(G(),j.number(),{decode:e=>Ht(e),encode:e=>C(e)}),q=()=>j.codec(G(),j.bigint({message:`Required bigint`}),{decode:e=>Lt(e),encode:e=>C(e)});function _u(e){return j.union(e)}var vu=class extends u{constructor(...e){super(...e),this.name=`Schema.ValidationError`}};function yu(e){let t=e,n=`Validation failed with ${t.issues.length} error${t.issues.length===1?``:`s`}:`;n+=`
`;for(let e of t.issues){if(!e)continue;n+=`
`,n+=bu(e)}return new vu(n)}function bu(e,t=0){let n=xu(e.path),r=`- ${n?`${n}: `:``}`,i=`  `.repeat(t+1),a=r;switch(e.code){case`invalid_type`:{let t=e.expected,n=e.input?Su(e):`undefined`;a+=`Expected ${t}. ${e.message===`Invalid input`?``:e.message}`,n!==`undefined`&&(a+=`but received ${n}`);break}case`too_big`:{let t=e.maximum,n=e.inclusive??!0;e.exact??!1?a+=`${e.origin} must be exactly ${t}`:a+=`${e.origin} must be ${n?`at most`:`less than`} ${t}`;break}case`too_small`:{let t=e.minimum,n=e.inclusive??!0;e.exact??!1?a+=`${e.origin} must be exactly ${t}`:a+=`${e.origin} must be ${n?`at least`:`greater than`} ${t}`;break}case`invalid_format`:switch(e.format){case`regex`:a+=`Must match pattern: ${e.pattern}`;break;case`starts_with`:a+=`Must start with "${e.prefix}"`;break;case`ends_with`:a+=`Must end with "${e.suffix}"`;break;case`includes`:a+=`Must include "${e.includes}"`;break;case`template_literal`:a+=`Must match pattern: ${e.pattern}`;break;default:a+=`Invalid ${e.format} format`}break;case`not_multiple_of`:a+=`Number must be a multiple of ${e.divisor}`;break;case`unrecognized_keys`:{let t=e.keys.map(e=>`"${e}"`).join(`, `);a+=`Unrecognized key${e.keys.length>1?`s`:``}: ${t}`;break}case`invalid_union`:{let n=e.errors&&e.errors.length>0;a+=`Invalid union value.`,n&&e.errors.forEach(e=>{e.length>0&&e.forEach(e=>{a+=`
`,a+=i,a+=bu(e,t+1)})});break}case`invalid_key`:a+=`Invalid ${e.origin} key`,e.issues&&e.issues.length>0&&e.issues.forEach(e=>{a+=`
`,a+=i,a+=bu(e,t+1)});break;case`invalid_element`:a+=`Invalid ${e.origin} element at key "${e.key}"`,e.issues&&e.issues.length>0&&e.issues.forEach(e=>{a+=`
`,a+=i,a+=bu(e,t+1)});break;case`invalid_value`:{let t=e.values.map(e=>JSON.stringify(e)).join(`, `);e.values.length>1?a+=`Expected one of: ${t}`:a+=`Expected ${t}`;break}case`custom`:a+=e.message||`Custom validation failed`;break;default:a+=e.message||`Validation failed`}return a}function xu(e){return e.length===0?``:"at `"+e.map((e,t)=>typeof e==`number`?`[${e}]`:typeof e==`symbol`?`[${e.toString()}]`:/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)&&t>0?`.${e}`:t===0&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)?e:`["${e}"]`).join(``)+"`"}function Su(e){let t=e.input;if(t===void 0)return`undefined`;if(t===null)return`null`;let n=typeof t;return n===`object`?Array.isArray(t)?`array`:t instanceof Date?`date`:t instanceof Map?`map`:t instanceof Set?`set`:`object`:n}const Cu=j.union([j.object({combinedGas:q(),encodedFundTransfers:j.readonly(j.array(G())),encodedPreCalls:j.readonly(j.array(G())),eoa:W(),executionData:G(),expiry:q(),funder:W(),funderSignature:G(),isMultichain:j.boolean(),nonce:q(),payer:W(),paymentAmount:q(),paymentMaxAmount:q(),paymentRecipient:W(),paymentSignature:G(),paymentToken:W(),settler:W(),settlerContext:G(),signature:G(),supportedAccountImplementation:W()}),j.object({combinedGas:q(),encodedFundTransfers:j.readonly(j.array(G())),encodedPreCalls:j.readonly(j.array(G())),eoa:W(),executionData:G(),expiry:q(),funder:W(),funderSignature:G(),isMultichain:j.boolean(),nonce:q(),payer:W(),paymentRecipient:W(),paymentSignature:G(),paymentToken:W(),prePaymentAmount:q(),prePaymentMaxAmount:q(),settler:W(),settlerContext:G(),signature:G(),supportedAccountImplementation:W(),totalPaymentAmount:q(),totalPaymentMaxAmount:q()})]);j.object({eoa:W(),executionData:G(),nonce:q()});const wu=M.object({address:M.union([W(),M.null()]),decimals:M.optional(M.number()),deficit:q(),name:M.optional(M.string()),required:q(),symbol:M.optional(M.string())}),Tu=M.object({assetDeficits:M.optional(M.array(wu)),authorizationAddress:M.optional(M.union([W(),M.null()])),chainId:K(),ethPrice:q(),extraPayment:q(),feeTokenDeficit:q(),intent:Cu,nativeFeeEstimate:M.object({maxFeePerGas:q(),maxPriorityFeePerGas:q()}),orchestrator:W(),paymentTokenDecimals:M.number(),txGas:q()}),Eu=M.object({multiChainRoot:M.optional(M.union([G(),M.null()])),quotes:M.readonly(M.array(Tu)).check(M.minLength(1)),ttl:M.number()}),Du=M.object({...Eu.shape,hash:G(),r:G(),s:G(),v:M.optional(G()),yParity:M.optional(G())}),Ou=j.object({selector:G(),to:W(),type:j.literal(`call`)}),ku=j.object({limit:q(),period:j.union([j.literal(`minute`),j.literal(`hour`),j.literal(`day`),j.literal(`week`),j.literal(`month`),j.literal(`year`)]),token:j.optional(j.union([W(),j.null()])),type:j.literal(`spend`)}),Au=j.union([Ou,ku]),ju=j.object({expiry:K(),prehash:j.optional(j.boolean()),publicKey:G(),role:j.union([j.literal(`admin`),j.literal(`normal`)]),type:j.union([j.literal(`p256`),j.literal(`secp256k1`),j.literal(`webauthnp256`)])}),Mu=j.object({...ju.shape,permissions:j.readonly(j.array(Au))});let Nu;(function(e){let t=e.AssetDiffAsset=j.union([j.object({address:j.optional(j.union([W(),j.null()])),decimals:j.optional(j.union([j.number(),j.null()])),direction:j.union([j.literal(`incoming`),j.literal(`outgoing`)]),fiat:j.optional(j.object({currency:j.string(),value:j.codec(j.string(),j.number(),{decode:e=>Number(e),encode:e=>String(e)})})),name:j.optional(j.union([j.string(),j.null()])),symbol:j.string(),type:j.literal(`erc20`),value:q()}),j.object({address:j.optional(j.union([W(),j.null()])),direction:j.union([j.literal(`incoming`),j.literal(`outgoing`)]),fiat:j.optional(j.object({currency:j.string(),value:j.codec(j.string(),j.number(),{decode:e=>Number(e),encode:e=>String(e)})})),name:j.optional(j.union([j.string(),j.null()])),symbol:j.string(),type:j.literal(`erc721`),uri:j.string(),value:q()}),j.object({address:j.null(),decimals:j.optional(j.union([j.number(),j.null()])),direction:j.union([j.literal(`incoming`),j.literal(`outgoing`)]),fiat:j.optional(j.object({currency:j.string(),value:j.codec(j.string(),j.number(),{decode:e=>Number(e),encode:e=>String(e)})})),symbol:j.string(),type:j.null(),value:q()})]);e.Response=j.record(G(),j.readonly(j.array(j.readonly(j.tuple([W(),j.readonly(j.array(t))])))))})(Nu||(Nu={}));let Pu;(function(e){e.Request=j.readonly(j.array(Mu)),e.Response=j.readonly(j.array(j.object({...Mu.shape,hash:G()})))})(Pu||(Pu={}));let Fu;(function(e){e.Response=j.record(G(),j.object({currency:j.string(),value:j.string()}))})(Fu||(Fu={}));let Iu;(function(e){e.Request=j.object({feePayer:j.optional(W()),feeToken:j.optional(W()),nonce:j.optional(q())})})(Iu||(Iu={}));let Lu;(function(e){e.Request=j.readonly(j.array(j.object({address:W(),value:q()})))})(Lu||(Lu={}));let Ru;(function(e){e.Request=j.readonly(j.array(j.object({hash:G()}))),e.Response=j.readonly(j.array(j.object({hash:G()})))})(Ru||(Ru={}));const zu=j.object({eoa:W(),executionData:G(),nonce:G(),signature:G()}),Bu=j.object({...zu.shape,chainId:K()}),Vu=j.object({address:W(),decimals:j.number(),feeToken:j.optional(j.boolean()),interop:j.optional(j.boolean()),nativeRate:j.optional(q()),symbol:j.string(),uid:j.string()}),Hu=j.string().check(j.regex(/^[A-Z0-9]+$/)),Uu=j.object({address:W(),chainId:K(),nonce:K()}),Wu=j.object({...Uu.shape,r:G(),s:G(),yParity:K()}),Gu=j.object({data:j.optional(G()),to:W(),value:j.optional(q())});let Ku;(function(e){let t=e.Parameters=j.object({email:j.string().check(j.regex(/^.*@.*$/)),walletAddress:W()});e.Request=j.object({method:j.literal(`account_setEmail`),params:j.readonly(j.tuple([t]))}),e.Response=j.null()})(Ku||(Ku={}));let qu;(function(e){let t=e.Parameters=j.object({chainId:K(),email:j.string(),signature:G(),token:j.string(),walletAddress:W()});e.Request=j.object({method:j.literal(`account_verifyEmail`),params:j.readonly(j.tuple([t]))}),e.Response=j.null()})(qu||(qu={}));let Ju;(function(e){e.Request=j.object({method:j.literal(`health`),params:j.undefined()}),e.Response=j.object({quoteSigner:W(),status:j.string(),version:j.string()})})(Ju||(Ju={}));let Yu;(function(e){let t=e.Parameters=j.object({address:W(),chainId:K(),tokenAddress:W(),value:q()});e.Request=j.object({method:j.literal(`wallet_addFaucetFunds`),params:j.readonly(j.tuple([t]))}),e.Response=j.object({message:j.optional(j.string()),transactionHash:G()})})(Yu||(Yu={}));let Xu;(function(e){let t=e.Parameters=j.object({chainId:K(),id:G()});e.Request=j.object({method:j.literal(`wallet_getAccounts`),params:j.readonly(j.tuple([t]))}),e.Response=j.readonly(j.array(j.object({address:W(),keys:Pu.Response})))})(Xu||(Xu={}));let Zu;(function(e){let t=e.Parameters=j.object({address:W()});e.Request=j.object({method:j.literal(`wallet_getAuthorization`),params:j.readonly(j.tuple([t]))}),e.Response=j.object({authorization:Wu,data:G(),to:W()})})(Zu||(Zu={}));let Qu;(function(e){e.Request=j.object({method:j.literal(`wallet_getCapabilities`),params:j.optional(j.tuple([j.readonly(j.array(j.number()))]))});let t=j.object({address:W(),version:j.optional(j.union([j.string(),j.null()]))});e.Response=j.record(G(),j.object({contracts:j.object({accountImplementation:t,accountProxy:t,legacyAccountImplementations:j.readonly(j.array(t)),legacyOrchestrators:j.readonly(j.array(j.union([j.object({orchestrator:t,simulator:t}),t]))),orchestrator:t,simulator:t}),fees:j.object({quoteConfig:j.object({constantRate:j.optional(j.union([j.number(),j.null()])),gas:j.optional(j.object({intentBuffer:j.optional(j.number()),txBuffer:j.optional(j.number())})),rateTtl:j.number(),ttl:j.number()}),recipient:W(),tokens:j.readonly(j.array(Vu))})}))})(Qu||(Qu={}));let $u;(function(e){let t=j.union([j.literal(`native`),j.literal(`erc20`),j.literal(`erc721`),j.string()]),n=e.Parameters=j.object({account:W(),assetFilter:j.optional(j.record(G(),j.readonly(j.array(j.object({address:j.union([W(),j.literal(`native`)]),type:t}))))),assetTypeFilter:j.optional(j.readonly(j.array(t))),chainFilter:j.optional(j.readonly(j.array(K())))});e.Request=j.object({method:j.literal(`wallet_getAssets`),params:j.readonly(j.tuple([n]))});let r=e.Price=j.object({currency:j.string(),value:j.codec(j.string(),j.number(),{decode:e=>Number(e),encode:e=>String(e)})});e.Response=j.record(j.string(),j.readonly(j.array(_u([j.object({address:W(),balance:q(),metadata:j.nullable(j.object({decimals:j.number(),fiat:j.nullish(r),name:j.string(),symbol:j.string()})),type:j.literal(`erc20`)}),j.object({address:j.nullable(j.literal(`native`)),balance:q(),metadata:j.nullable(j.object({decimals:j.number(),fiat:j.nullish(r),name:j.optional(j.string()),symbol:j.optional(j.string())})),type:j.literal(`native`)})]))))})($u||($u={}));let ed;(function(e){e.Request=j.object({method:j.literal(`wallet_getCallsStatus`),params:j.readonly(j.tuple([G()]))}),e.Response=j.object({id:j.string(),receipts:j.optional(j.readonly(j.array(j.object({blockHash:G(),blockNumber:K(),chainId:K(),gasUsed:K(),logs:j.readonly(j.array(j.object({address:W(),data:G(),topics:j.readonly(j.array(G()))}))),status:G(),transactionHash:G()})))),status:j.number()})})(ed||(ed={}));let td;(function(e){let t=e.Parameters=j.object({address:W(),chainIds:j.optional(j.readonly(j.array(K())))});e.Request=j.object({method:j.literal(`wallet_getKeys`),params:j.readonly(j.tuple([t]))}),e.Response=j.record(G(),Pu.Response)})(td||(td={}));let nd;(function(e){let t=e.Capabilities=j.object({authorizeKeys:j.optional(Pu.Request),meta:Iu.Request,preCall:j.optional(j.boolean()),preCalls:j.optional(j.readonly(j.array(zu))),requiredFunds:j.optional(Lu.Request),revokeKeys:j.optional(Ru.Request)}),n=e.ResponseCapabilities=j.object({assetDiffs:j.optional(Nu.Response),authorizeKeys:j.nullish(Pu.Response),feeSignature:j.optional(G()),feeTotals:j.optional(Fu.Response),revokeKeys:j.nullish(Ru.Response)}),r=e.Parameters=j.object({calls:j.readonly(j.array(Gu)),capabilities:t,chainId:K(),from:j.optional(W()),key:j.optional(j.object({prehash:j.boolean(),publicKey:G(),type:ju.shape.type}))});e.Request=j.object({method:j.literal(`wallet_prepareCalls`),params:j.readonly(j.tuple([r]))}),e.Response=j.object({capabilities:n,context:j.object({preCall:j.optional(j.partial(Bu)),quote:j.optional(j.partial(Du))}),digest:G(),key:j.nullish(j.object({prehash:j.boolean(),publicKey:G(),type:ju.shape.type})),signature:G(),typedData:j.object({domain:j.union([j.object({chainId:j.union([K(),j.number()]),name:j.string(),verifyingContract:W(),version:j.string()}),j.object({})]),message:j.record(j.string(),j.unknown()),primaryType:j.string(),types:j.record(j.string(),j.unknown())})})})(nd||(nd={}));let rd;(function(e){let t=e.Capabilities=j.object({authorizeKeys:Pu.Request}),n=e.Parameters=j.object({address:W(),capabilities:t,chainId:j.optional(j.number()),delegation:W()});e.Request=j.object({method:j.literal(`wallet_prepareUpgradeAccount`),params:j.readonly(j.tuple([n]))}),e.Response=j.object({capabilities:t,chainId:K(),context:j.object({address:W(),authorization:Uu,chainId:K(),preCall:zu}),digests:j.object({auth:G(),exec:G()}),typedData:j.object({domain:j.union([j.object({chainId:j.union([K(),j.number()]),name:j.string(),verifyingContract:W(),version:j.string()}),j.object({})]),message:j.record(j.string(),j.unknown()),primaryType:j.string(),types:j.record(j.string(),j.unknown())})})})(rd||(rd={}));let id;(function(e){e.Request=j.object({method:j.literal(`wallet_feeTokens`),params:j.optional(j.undefined())}),e.Response=j.record(G(),j.readonly(j.array(j.object({address:W(),decimals:j.number(),nativeRate:j.optional(q()),symbol:j.string()}))))})(id||(id={}));let ad;(function(e){let t=e.Parameters=j.object({capabilities:j.optional(j.object({feeSignature:j.optional(G())})),context:j.object({preCall:j.optional(j.partial(Bu)),quote:j.optional(j.partial(Du))}),key:j.optional(j.object({prehash:j.boolean(),publicKey:G(),type:ju.shape.type})),signature:G()});e.Request=j.object({method:j.literal(`wallet_sendPreparedCalls`),params:j.readonly(j.tuple([t]))}),e.Response=j.object({id:G()})})(ad||(ad={}));let od;(function(e){let t=e.Parameters=j.object({context:j.object({address:W(),authorization:Uu,chainId:K(),preCall:zu}),signatures:j.object({auth:G(),exec:G()})});e.Request=j.object({method:j.literal(`wallet_upgradeAccount`),params:j.readonly(j.tuple([t]))}),e.Response=j.undefined()})(od||(od={}));let sd;(function(e){let t=e.Parameters=j.object({address:G(),chainId:K(),digest:G(),signature:G()});e.Request=j.object({method:j.literal(`wallet_verifySignature`),params:j.readonly(j.tuple([t]))}),e.Response=j.object({proof:j.nullish(j.object({account:W(),initPreCall:j.nullish(zu),keyHash:G()})),valid:j.boolean()})})(sd||(sd={}));const cd=j.object({chainId:j.optional(K()),expiry:K(),hash:G(),id:G(),prehash:j.optional(j.boolean()),publicKey:G(),role:j.union([j.literal(`admin`),j.literal(`session`)]),type:j.union([j.literal(`address`),j.literal(`p256`),j.literal(`secp256k1`),j.literal(`webauthn-p256`)])}),ld=j.readonly(j.array(_u([j.object({signature:j.string(),to:W()}),j.object({signature:j.string()}),j.object({to:W()})])).check(j.minLength(1))),ud=j.object({limit:j.union([j.templateLiteral([j.number(),`.`,j.number()]),j.templateLiteral([j.number()])]).check(j.regex(/^\d+(\.\d+)?$/)),symbol:j.optional(j.union([j.literal(`native`),Hu]))}),dd=j.object({addresses:j.readonly(j.array(W()))}),fd=j.readonly(j.array(j.object({limit:q(),period:j.union([j.literal(`minute`),j.literal(`hour`),j.literal(`day`),j.literal(`week`),j.literal(`month`),j.literal(`year`)]),token:j.optional(W())}))),pd=j.object({calls:j.optional(ld),signatureVerification:j.optional(dd),spend:j.optional(fd)}),md=j.object({...cd.shape,feeToken:j.optional(j.nullable(ud)),permissions:j.optional(pd)}),hd=j.object({address:W(),chainId:j.optional(K()),expiry:j.number(),id:G(),key:j.pick(cd,{publicKey:!0,type:!0}),permissions:j.object({calls:ld,signatureVerification:j.optional(dd),spend:j.optional(fd)})}),gd=j.object({address:j.optional(W()),chainId:j.optional(K()),expiry:j.number().check(j.gte(1)),feeToken:j.nullable(ud),key:j.optional(j.pick(cd,{publicKey:!0,type:!0})),permissions:j.object({calls:ld,signatureVerification:j.optional(dd),spend:j.optional(fd)})});let _d;(function(e){e.GetCapabilitiesResponse=j.object({status:j.union([j.literal(`supported`),j.literal(`unsupported`)])})})(_d||(_d={}));let vd;(function(e){e.Request=j.union([j.boolean(),j.object({chainId:j.optional(K()),label:j.optional(j.string())})])})(vd||(vd={}));let yd;(function(e){e.Request=_u([j.object({chainId:j.optional(j.number()),domain:j.optional(j.string()),expirationTime:j.optional(j.date()),issuedAt:j.optional(j.date()),nonce:j.string(),notBefore:j.optional(j.date()),requestId:j.optional(j.string()),resources:j.optional(j.readonly(j.array(j.string()))),scheme:j.optional(j.string()),statement:j.optional(j.string()),uri:j.optional(j.string()),version:j.optional(j.literal(`1`))}),j.object({authUrl:j.union([j.string(),j.object({logout:j.string(),nonce:j.string(),verify:j.string()})]),chainId:j.optional(K()),domain:j.optional(j.string()),expirationTime:j.optional(j.date()),issuedAt:j.optional(j.date()),notBefore:j.optional(j.date()),requestId:j.optional(j.string()),resources:j.optional(j.readonly(j.array(j.string()))),scheme:j.optional(j.string()),statement:j.optional(j.string()),uri:j.optional(j.string()),version:j.optional(j.literal(`1`))})]),e.Response=j.object({message:j.string(),signature:G(),token:j.optional(j.string())})})(yd||(yd={}));let bd;(function(e){e.GetCapabilitiesResponse=j.object({supported:j.boolean(),tokens:j.readonly(j.array(Vu))}),e.Request=j.union([Hu,W()])})(bd||(bd={}));let xd;(function(e){e.Request=gd})(xd||(xd={}));let Sd;(function(e){e.GetCapabilitiesResponse=j.object({supported:j.boolean()})})(Sd||(Sd={}));let Cd;(function(e){e.GetCapabilitiesResponse=j.object({supported:j.boolean()}),e.Request=j.object({id:j.optional(j.union([G(),j.null()]))}),e.Response=j.readonly(j.array(hd))})(Cd||(Cd={}));let wd;(function(e){e.Response=e.Request=j.readonly(j.array(j.object({context:j.unknown(),signature:G()})))})(wd||(wd={}));let Td;(function(e){e.Request=j.string()})(Td||(Td={}));let Ed;(function(e){e.GetCapabilitiesResponse=j.object({supported:j.boolean(),tokens:j.readonly(j.array(Vu))}),e.Request=j.readonly(j.array(_u([j.object({address:W(),value:q()}),j.object({symbol:Hu,value:j.union([j.templateLiteral([j.number(),`.`,j.number()]),j.templateLiteral([j.number()])]).check(j.regex(/^\d+(\.\d+)?$/))})])))})(Ed||(Ed={}));const Dd=j.object({...j.pick(cd,{id:!0,publicKey:!0,type:!0}).shape,credentialId:j.optional(j.string()),privateKey:j.optional(j.any())});let Od;(function(e){let t=e.Parameters=j.object({email:j.string(),walletAddress:W()});e.Request=j.object({method:j.literal(`account_setEmail`),params:j.readonly(j.tuple([t]))}),e.Response=j.null()})(Od||(Od={}));let kd;(function(e){let t=e.Parameters=j.object({chainId:K(),email:j.string(),token:j.string(),walletAddress:W()});e.Request=j.object({method:j.literal(`account_verifyEmail`),params:j.readonly(j.tuple([t]))}),e.Response=j.null()})(kd||(kd={}));let Ad;(function(e){let t=e.Parameters=j.object({address:j.optional(W()),chainId:j.optional(K()),token:j.optional(W()),value:j.optional(j.string())});e.Request=j.object({method:j.literal(`wallet_addFunds`),params:j.readonly(j.tuple([t]))}),e.Response=j.object({id:G()})})(Ad||(Ad={}));let jd;(function(e){e.Request=j.object({method:j.literal(`eth_accounts`),params:j.optional(j.unknown())}),e.Response=j.readonly(j.array(W()))})(jd||(jd={}));let Md;(function(e){e.Request=j.object({method:j.literal(`eth_chainId`),params:j.optional(j.unknown())}),e.Response=G()})(Md||(Md={}));let Nd;(function(e){e.Request=j.object({method:j.literal(`eth_requestAccounts`),params:j.optional(j.unknown())}),e.Response=j.readonly(j.array(W()))})(Nd||(Nd={}));let Pd;(function(e){e.Request=j.object({method:j.literal(`eth_sendTransaction`),params:j.readonly(j.tuple([j.object({capabilities:j.optional(j.object({feeToken:j.optional(bd.Request),merchantUrl:j.optional(Td.Request),preCalls:j.optional(wd.Request)})),chainId:j.optional(K()),data:j.optional(G()),from:j.optional(W()),to:W(),value:j.optional(q())})]))}),e.Response=G()})(Pd||(Pd={}));let Fd;(function(e){e.Request=j.object({method:j.literal(`eth_signTypedData_v4`),params:j.readonly(j.tuple([W(),j.string()]))}),e.Response=G()})(Fd||(Fd={}));let Id;(function(e){let t=e.Parameters=j.object({address:j.optional(W()),chainId:j.optional(K())});e.Request=j.object({method:j.literal(`wallet_getAdmins`),params:j.optional(j.readonly(j.tuple([t])))});let n=e.Key=Dd;e.Response=j.object({address:W(),chainId:K(),keys:j.readonly(j.array(n))})})(Id||(Id={}));let Ld;(function(e){let t=e.Capabilities=j.object({feeToken:j.optional(bd.Request)}),n=e.Parameters=j.object({address:j.optional(W()),capabilities:j.optional(t),chainId:j.optional(K()),key:j.pick(cd,{publicKey:!0,type:!0})});e.Request=j.object({method:j.literal(`wallet_grantAdmin`),params:j.readonly(j.tuple([n]))}),e.Response=j.object({address:W(),chainId:K(),key:Id.Key})})(Ld||(Ld={}));let Rd;(function(e){let t=e.Parameters=gd;e.Request=j.object({method:j.literal(`wallet_grantPermissions`),params:j.readonly(j.tuple([t]))}),e.ResponseCapabilities=j.object({preCalls:j.optional(wd.Response)}),e.Response=j.object({...hd.shape,capabilities:j.optional(j.any())})})(Rd||(Rd={}));let zd;(function(e){let t=e.Parameters=j.object({address:j.optional(W())});e.Request=j.object({method:j.literal(`wallet_getAccountVersion`),params:j.optional(j.readonly(j.tuple([t])))}),e.Response=j.object({current:j.string(),latest:j.string()})})(zd||(zd={}));let Bd;(function(e){let t=e.Parameters=j.object({address:j.optional(W()),chainIds:j.optional(j.readonly(j.array(K())))});e.Request=j.object({method:j.literal(`wallet_getPermissions`),params:j.optional(j.readonly(j.tuple([t])))}),e.Response=Cd.Response})(Bd||(Bd={}));let Vd;(function(e){let t=e.Capabilities=j.object({feeToken:j.optional(bd.Request)}),n=e.Parameters=j.object({address:j.optional(W()),capabilities:j.optional(t),chainId:j.optional(K()),id:G()});e.Request=j.object({method:j.literal(`wallet_revokeAdmin`),params:j.readonly(j.tuple([n]))}),e.Response=void 0})(Vd||(Vd={}));let Hd;(function(e){let t=e.Capabilities=j.object({feeToken:j.optional(bd.Request)}),n=e.Parameters=j.object({address:j.optional(W()),capabilities:j.optional(t),id:G()});e.Request=j.object({method:j.literal(`wallet_revokePermissions`),params:j.readonly(j.tuple([n]))}),e.Response=void 0})(Hd||(Hd={}));let Ud;(function(e){e.Request=j.object({method:j.literal(`wallet_switchEthereumChain`),params:j.readonly(j.tuple([j.object({chainId:G()})]))})})(Ud||(Ud={}));let Wd;(function(e){let t=e.Parameters=j.object({context:j.unknown(),signatures:j.object({auth:G(),exec:G()})});e.Request=j.object({method:j.literal(`wallet_upgradeAccount`),params:j.readonly(j.tuple([t]))});let n=e.ResponseCapabilities=j.object({admins:j.optional(j.readonly(j.array(Id.Key))),permissions:j.optional(Cd.Response)});e.Response=j.object({address:W(),capabilities:j.optional(n)})})(Wd||(Wd={}));let Gd;(function(e){e.Request=j.object({method:j.literal(`personal_sign`),params:j.readonly(j.tuple([G(),W()]))}),e.Response=G()})(Gd||(Gd={}));let Kd;(function(e){e.Request=j.object({method:j.literal(`porto_ping`),params:j.optional(j.undefined())}),e.Response=j.literal(`pong`)})(Kd||(Kd={}));let qd;(function(e){let t=e.Capabilities=j.object({createAccount:j.optional(vd.Request),email:j.optional(j.boolean()),grantAdmins:j.optional(j.readonly(j.array(j.pick(cd,{publicKey:!0,type:!0})))),grantPermissions:j.optional(xd.Request),preCalls:j.optional(wd.Request),selectAccount:j.optional(j.union([j.boolean(),j.object({address:W(),key:j.optional(j.object({credentialId:j.optional(j.string()),publicKey:G()}))})])),signInWithEthereum:j.optional(yd.Request)}),n=e.Parameters=j.object({capabilities:j.optional(t),chainIds:j.optional(j.readonly(j.array(K())))});e.Request=j.object({method:j.literal(`wallet_connect`),params:j.optional(j.readonly(j.tuple([n])))});let r=e.ResponseCapabilities=j.object({admins:j.optional(j.readonly(j.array(j.object({...j.pick(cd,{id:!0,publicKey:!0,type:!0}).shape,credentialId:j.optional(j.string())})))),permissions:j.optional(Cd.Response),preCalls:j.optional(wd.Response),signInWithEthereum:j.optional(yd.Response)});e.Response=j.object({accounts:j.readonly(j.array(j.object({address:W(),capabilities:j.optional(r)}))),chainIds:j.readonly(j.array(K()))})})(qd||(qd={}));let Jd;(function(e){e.Request=j.object({method:j.literal(`wallet_disconnect`),params:j.optional(j.unknown())}),e.Response=void 0})(Jd||(Jd={}));let Yd;(function(e){e.Parameters=$u.Parameters,e.Request=$u.Request,e.Response=$u.Response})(Yd||(Yd={}));let Xd;(function(e){e.Request=j.object({method:j.literal(`wallet_getCallsStatus`),params:j.tuple([G()])}),e.Response=j.object({atomic:j.boolean(),chainId:K(),id:j.string(),receipts:j.optional(j.readonly(j.array(j.object({blockHash:G(),blockNumber:G(),gasUsed:G(),logs:j.readonly(j.array(j.object({address:W(),data:G(),topics:j.readonly(j.array(G()))}))),status:G(),transactionHash:G()})))),status:j.number(),version:j.string()})})(Xd||(Xd={}));let Zd;(function(e){e.Request=j.object({method:j.literal(`wallet_getCapabilities`),params:j.optional(j.union([j.readonly(j.tuple([j.union([G(),j.undefined()])])),j.readonly(j.tuple([j.union([G(),j.undefined()]),j.readonly(j.array(K()))]))]))}),e.Response=j.record(G(),j.object({atomic:_d.GetCapabilitiesResponse,feeToken:bd.GetCapabilitiesResponse,merchant:Sd.GetCapabilitiesResponse,permissions:Cd.GetCapabilitiesResponse,requiredFunds:Ed.GetCapabilitiesResponse}))})(Zd||(Zd={}));let Qd;(function(e){let t=e.Parameters=j.object({address:W(),chainIds:j.optional(j.readonly(j.array(K())))});e.Request=j.object({method:j.literal(`wallet_getKeys`),params:j.readonly(j.tuple([t]))}),e.Response=j.readonly(j.array(md))})(Qd||(Qd={}));let $d;(function(e){let t=e.Capabilities=j.object({feeToken:j.optional(bd.Request),merchantUrl:j.optional(Td.Request),permissions:j.optional(Cd.Request),preCalls:j.optional(wd.Request),requiredFunds:j.optional(Ed.Request)}),n=e.Parameters=j.object({calls:j.readonly(j.array(j.object({data:j.optional(G()),to:W(),value:j.optional(q())}))),capabilities:j.optional(t),chainId:j.optional(K()),from:j.optional(W()),key:j.optional(j.pick(cd,{prehash:!0,publicKey:!0,type:!0})),version:j.optional(j.string())});e.Request=j.object({method:j.literal(`wallet_prepareCalls`),params:j.readonly(j.tuple([n]))}),e.Response=j.object({capabilities:j.optional(j.object({...nd.ResponseCapabilities.shape,quote:j.optional(Du)})),chainId:G(),context:j.object({account:j.object({address:W()}),calls:n.shape.calls,nonce:q(),quote:j.optional(j.partial(Du))}),digest:G(),key:j.pick(cd,{prehash:!0,publicKey:!0,type:!0}),typedData:j.object({domain:j.union([j.object({chainId:K(),name:j.string(),verifyingContract:W(),version:j.string()}),j.object({})]),message:j.record(j.string(),j.unknown()),primaryType:j.string(),types:j.record(j.string(),j.unknown())})})})($d||($d={}));let ef;(function(e){let t=e.Capabilities=j.object({...qd.Capabilities.shape,label:j.optional(j.string())}),n=e.Parameters=j.object({address:W(),capabilities:j.optional(t),chainId:j.optional(K())});e.Request=j.object({method:j.literal(`wallet_prepareUpgradeAccount`),params:j.readonly(j.tuple([n]))}),e.Response=j.object({context:j.unknown(),digests:j.object({auth:G(),exec:G()})})})(ef||(ef={}));let tf;(function(e){e.Capabilities=$d.Capabilities,e.Request=j.object({method:j.literal(`wallet_sendCalls`),params:j.readonly(j.tuple([j.omit($d.Parameters,{key:!0})]))}),e.Response=j.object({id:G()})})(tf||(tf={}));let nf;(function(e){let t=e.Parameters=j.object({capabilities:$d.Response.shape.capabilities,chainId:G(),context:$d.Response.shape.context,key:$d.Response.shape.key,signature:G()});e.Request=j.object({method:j.literal(`wallet_sendPreparedCalls`),params:j.readonly(j.tuple([t]))}),e.Response=j.readonly(j.array(j.object({capabilities:j.optional(j.record(j.string(),j.unknown())),id:G()})))})(nf||(nf={}));let rf;(function(e){let t=e.Parameters=j.object({address:W(),chainId:j.optional(K()),digest:G(),signature:G()});e.Request=j.object({method:j.literal(`wallet_verifySignature`),params:j.readonly(j.tuple([t]))}),e.Response=j.object({address:W(),chainId:K(),proof:j.optional(j.unknown()),valid:j.boolean()})})(rf||(rf={}));function af(e){if(typeof e==`string`){if(!E(e,{strict:!1}))throw new b({address:e});return{address:e,type:`json-rpc`}}if(!E(e.address,{strict:!1}))throw new b({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:`custom`,type:`local`}}function J(e){let t=typeof e==`string`?{address:e}:e,n=t.sign?`privateKey`:`porto`,{address:r,sign:i,signMessage:a,signTransaction:o,signTypedData:s,type:c}=af({address:t.address,sign({hash:e}){if(n===`privateKey`)return t.sign({hash:e});throw Error("`sign` not supported on porto accounts.")},signMessage({message:e}){return this.sign({hash:ia(e)})},signTransaction(){throw Error("`signTransaction` not supported on porto accounts.")},signTypedData(e){return this.sign({hash:da(e)})}});return{address:r,keys:t.keys??void 0,sign:i,signMessage:a,signTransaction:o,signTypedData:s,source:n,type:c}}function sf(e,t={}){let{keys:n}=t,r=Fa(ts({privateKey:e}));return J({address:r,keys:n,async sign({hash:t}){return Bo(ss({payload:t,privateKey:e}))},source:`privateKey`})}function cf(e,t={}){let{key:n,role:r}=t;if(n!==null){if(typeof n==`object`)return n;if(e.keys&&e.keys.length>0)return typeof n==`number`?e.keys[n]:e.keys.find(e=>e.privateKey&&(!r||e.role===r))}}async function lf(e,t){let{storage:n,replaySafe:r=!0,wrap:i=!0,webAuthn:a}=t,o=cf(e,t),s=(()=>r?ul({domain:{verifyingContract:e.address},message:{digest:t.payload},primaryType:`ERC1271Sign`,types:{ERC1271Sign:[{name:`digest`,type:`bytes32`}]}}):t.payload)(),c=(()=>o?({hash:e})=>du(o,{address:null,payload:e,storage:n,webAuthn:a,wrap:i}):e.source===`privateKey`?e.sign:void 0)();if(!c)throw Error(`cannot find key to sign with.`);return await c({hash:s})}async function uf(e,t={}){let{chainIds:n,...r}=t,i=await e.request({method:`wallet_connect`,params:[j.encode(qd.Parameters,{capabilities:r,chainIds:n})]});return j.decode(qd.Response,i)}var df=kn(En(((exports,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1);function ff(e,t={}){let{raw:n=!1}=t,r=e;if(n)return e;if(r.error)throw pf(r.error);return r.result}function pf(e){let t=e;if(t instanceof Error&&!(`code`in t))return new wf({cause:t,data:t,message:t.message,stack:t.stack});let{code:n}=t;return n===wf.code?new wf(t):n===mf.code?new mf(t):n===Cf.code?new Cf(t):n===xf.code?new xf(t):n===yf.code?new yf(t):n===Sf.code?new Sf(t):n===vf.code?new vf(t):n===Tf.code?new Tf(t):n===hf.code?new hf(t):n===gf.code?new gf(t):n===_f.code?new _f(t):n===bf.code?new bf(t):new wf({cause:t instanceof Error?t:void 0,data:t,message:t.message,stack:t instanceof Error?t.stack:void 0})}var Y=class extends Error{constructor(e){let{cause:t,code:n,message:r,data:i,stack:a}=e;super(r,{cause:t}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.BaseError`}),Object.defineProperty(this,`cause`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`stack`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`data`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t,this.code=n,this.data=i,this.stack=a??``}},mf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Missing or invalid parameters.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.InvalidInputError`})}};Object.defineProperty(mf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32e3});var hf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Requested resource not found.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.ResourceNotFoundError`})}};Object.defineProperty(hf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32001});var gf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Requested resource not available.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.ResourceUnavailableError`})}};Object.defineProperty(gf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32002});var _f=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Transaction creation failed.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.TransactionRejectedError`})}};Object.defineProperty(_f,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32003});var vf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Method is not implemented.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.MethodNotSupportedError`})}};Object.defineProperty(vf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32004});var yf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Rate limit exceeded.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.LimitExceededError`})}};Object.defineProperty(yf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32005});var bf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`JSON-RPC version not supported.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.VersionNotSupportedError`})}};Object.defineProperty(bf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32006});var xf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Input is not a valid JSON-RPC request.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.InvalidRequestError`})}};Object.defineProperty(xf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32600});var Sf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Method does not exist.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.MethodNotFoundError`})}};Object.defineProperty(Sf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32601});var Cf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Invalid method parameters.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.InvalidParamsError`})}};Object.defineProperty(Cf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32602});var wf=class e extends Y{constructor(t={}){super({cause:t.cause,code:e.code,data:t.data,message:t.message??`Internal JSON-RPC error.`,stack:t.stack}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.InternalError`})}};Object.defineProperty(wf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32603});var Tf=class e extends Y{constructor(t={}){super({code:e.code,data:t.data,message:t.message??`Failed to parse JSON-RPC response.`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`RpcResponse.ParseError`})}};Object.defineProperty(Tf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:-32700});var X=class extends Error{constructor(e,t){super(t),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`ProviderRpcError`}),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`details`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=t}},Ef=class extends X{constructor({message:e=`The user rejected the request.`}={}){super(4001,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4001}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.UserRejectedRequestError`})}};Object.defineProperty(Ef,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4001});var Z=class extends X{constructor({message:e=`The requested method and/or account has not been authorized by the user.`}={}){super(4100,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4100}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.UnauthorizedError`})}};Object.defineProperty(Z,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4100});var Df=class extends X{constructor({message:e=`The provider does not support the requested method.`}={}){super(4200,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4200}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.UnsupportedMethodError`})}};Object.defineProperty(Df,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4200});var Q=class extends X{constructor({message:e=`The provider is disconnected from all chains.`}={}){super(4900,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4900}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.DisconnectedError`})}};Object.defineProperty(Q,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4900});var Of=class extends X{constructor({message:e=`The provider is not connected to the requested chain.`}={}){super(4901,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4901}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.ChainDisconnectedError`})}};Object.defineProperty(Of,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4901});var kf=class extends X{constructor({message:e=`An error occurred when attempting to switch chain.`}={}){super(4902,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4902}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.SwitchChainError`})}};Object.defineProperty(kf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:4902});var Af=class extends X{constructor({message:e=`This Wallet does not support a capability that was not marked as optional.`}={}){super(5700,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5700}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.UnsupportedNonOptionalCapabilityError`})}};Object.defineProperty(Af,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5700});var jf=class extends X{constructor({message:e=`This Wallet does not support the requested chain ID.`}={}){super(5710,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5710}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.UnsupportedChainIdError`})}};Object.defineProperty(jf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5710});var Mf=class extends X{constructor({message:e=`There is already a bundle submitted with this ID.`}={}){super(5720,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5720}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.DuplicateIdError`})}};Object.defineProperty(Mf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5720});var Nf=class extends X{constructor({message:e=`This bundle id is unknown / has not been submitted.`}={}){super(5730,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5730}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.UnknownBundleIdError`})}};Object.defineProperty(Nf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5730});var Pf=class extends X{constructor({message:e=`The call bundle is too large for the Wallet to process.`}={}){super(5740,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5740}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.BundleTooLargeError`})}};Object.defineProperty(Pf,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5740});var Ff=class extends X{constructor({message:e=`The Wallet can support atomicity after an upgrade, but the user rejected the upgrade.`}={}){super(5750,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5750}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.AtomicReadyWalletRejectedUpgradeError`})}};Object.defineProperty(Ff,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5750});var If=class extends X{constructor({message:e=`The wallet does not support atomic execution but the request requires it.`}={}){super(5760,e),Object.defineProperty(this,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5760}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.AtomicityNotSupportedError`})}};Object.defineProperty(If,`code`,{enumerable:!0,configurable:!0,writable:!0,value:5760});function Lf(){let e=new df.default;return{get eventNames(){return e.eventNames.bind(e)},get listenerCount(){return e.listenerCount.bind(e)},get listeners(){return e.listeners.bind(e)},addListener:e.addListener.bind(e),emit:e.emit.bind(e),off:e.off.bind(e),on:e.on.bind(e),once:e.once.bind(e),removeAllListeners:e.removeAllListeners.bind(e),removeListener:e.removeListener.bind(e)}}function Rf(e,t={}){let{includeEvents:n=!0}=t;if(!e)throw new Bf;return{...n?{on:e.on?.bind(e),removeListener:e.removeListener?.bind(e)}:{},async request(t){try{let n=await e.request(t);return n&&typeof n==`object`&&`jsonrpc`in n?ff(n):n}catch(e){throw zf(e)}}}}function zf(e){let t=pf(e);if(t instanceof wf){if(!t.data)return t;let{code:e}=t.data;if(e===Q.code)return new Q(t);if(e===Of.code)return new Of(t);if(e===Ef.code)return new Ef(t);if(e===Z.code)return new Z(t);if(e===Df.code)return new Df(t);if(e===kf.code)return new kf(t);if(e===Ff.code)return new Ff(t);if(e===If.code)return new If(t);if(e===Pf.code)return new Pf(t);if(e===Nf.code)return new Nf(t);if(e===Mf.code)return new Mf(t);if(e===jf.code)return new jf(t);if(e===Af.code)return new Af(t)}return t}var Bf=class extends u{constructor(){super("`provider` is undefined."),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Provider.IsUndefinedError`})}};const Vf=()=>`IntersectionObserver`in window&&`IntersectionObserverEntry`in window&&`intersectionRatio`in IntersectionObserverEntry.prototype&&`isVisible`in IntersectionObserverEntry.prototype;function Hf(e={}){let{prefix:t=`[Porto]`}=e,n=new Set;return{error:Wf(console.error,{prefix:t}),errorOnce:Wf(console.error,{memo:n,prefix:t}),log:Wf(console.log,{prefix:t}),logOnce:Wf(console.log,{memo:n,prefix:t}),warn:Wf(console.warn,{prefix:t}),warnOnce:Wf(console.warn,{memo:n,prefix:t})}}const Uf=Hf();function Wf(e,t={}){let{memo:n,prefix:r}=t;return(...t)=>{let i=t.join(` `);n?.has(i)||(n?.add(i),e(`${r} ${i}`))}}function Gf(){let e=navigator.userAgent.toLowerCase();return e.includes(`safari`)&&!e.includes(`chrome`)}function Kf(){let e=navigator.userAgent.toLowerCase();return(e.includes(`firefox`)||e.includes(`fxios`))&&!e.includes(`seamonkey`)}function qf(){return window.navigator?.userAgentData?.mobile?!0:navigator.maxTouchPoints>1||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.slice(0,4))}function Jf(){let e=()=>void 0,t=()=>void 0;return{promise:new Promise((n,r)=>{e=n,t=r}),reject:t,resolve:e}}function Yf(e){if(Array.isArray(e))return e.map(Yf);if(typeof e==`function`)return;if(typeof e!=`object`||!e)return e;if(Object.getPrototypeOf(e)!==Object.prototype)try{return structuredClone(e)}catch{return}let t={};for(let[n,r]of Object.entries(e))t[n]=Yf(r);return t}function Xf(e,t){let n=[],r=new Set;for(let i of e){let e=t(i);r.has(e)||(r.add(e),n.push(i))}return n}function Zf(){return typeof globalThis<`u`&&`crypto`in globalThis?globalThis.crypto.randomUUID():crypto.randomUUID()}function Qf(e){return e}function $f(e,t={}){let{targetOrigin:n}=t,r=new Map;return Qf({destroy(){for(let t of r.values())e.removeEventListener(`message`,t)},on(t,i,a){function o(e){e.data.topic===t&&(a&&e.data.id!==a||n&&e.origin!==n||i(e.data.payload,e))}return e.addEventListener(`message`,o),r.set(t,o),()=>e.removeEventListener(`message`,o)},async send(t,r,i){let a=Zf();return e.postMessage(Yf({id:a,payload:r,topic:t}),i??n??`*`),{id:a,payload:r,topic:t}},async sendAsync(e,t,n){let{id:r}=await this.send(e,t,n);return new Promise(t=>this.on(e,t,r))}})}function ep(e){let{from:t,to:n,waitForReady:r=!1}=e,i=!1,a=Jf();t.on(`ready`,a.resolve);let o=Qf({destroy(){t.destroy(),n.destroy(),i&&a.reject()},on(e,n,r){return t.on(e,n,r)},async send(e,t){return i=!0,r&&await a.promise.finally(()=>i=!1),n.send(e,t)},async sendAsync(e,t){return i=!0,r&&await a.promise.finally(()=>i=!1),n.sendAsync(e,t)}});return{...o,ready(e){o.send(`ready`,e)},waitForReady(){return a.promise}}}const tp={local:`http://localhost:5175/dialog/`,prod:`https://id.porto.sh/dialog`,stg:`https://stg.id.porto.sh/dialog`};function np(e){return e}function rp(e={}){let{skipProtocolCheck:t,skipUnsupported:n}=e,r=e=>!n&&Gf()&&e?.some(e=>[`wallet_connect`,`eth_requestAccounts`].includes(e.method));return typeof window>`u`?ap():np({name:`iframe`,setup(e){let{host:n,internal:i,theme:a,themeController:o}=e,{store:s}=i,c=ip().setup(e),l=!1,u=new URL(n),d=document.createElement(`dialog`);d.dataset.porto=``,d.setAttribute(`role`,`dialog`),d.setAttribute(`aria-closed`,`true`),d.setAttribute(`aria-label`,`Porto Wallet`),d.setAttribute(`hidden`,`until-found`),Object.assign(d.style,{background:`transparent`,border:`0`,outline:`0`,padding:`0`,position:`fixed`}),document.body.appendChild(d);let f=document.createElement(`iframe`);f.setAttribute(`data-testid`,`porto`);let p=[`publickey-credentials-get ${u.origin}`,`publickey-credentials-create ${u.origin}`];Kf()||p.push(`clipboard-write`),f.setAttribute(`allow`,p.join(`; `)),f.setAttribute(`tabindex`,`0`),f.setAttribute(`sandbox`,`allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox`),f.setAttribute(`src`,dp(n)),f.setAttribute(`title`,`Porto`),Object.assign(f.style,{backgroundColor:`transparent`,border:`0`,colorScheme:`light dark`,height:`100%`,left:`0`,position:`fixed`,top:`0`,width:`100%`});let m=document.createElement(`style`);m.innerHTML=`
        dialog[data-porto]::backdrop {
          background: transparent!important;
        }
      `,d.appendChild(m),d.appendChild(f);let h=ep({from:$f(window,{targetOrigin:u.origin}),to:$f(f.contentWindow,{targetOrigin:u.origin}),waitForReady:!0});o?._setup(h,!0);let g=window.matchMedia(`(max-width: 460px)`),_=()=>{h.send(`__internal`,{type:`resize`,width:g.matches?460:461})};g.addEventListener(`change`,_),h.on(`ready`,t=>{let n=e.internal.store.getState().chainIds.filter(e=>t.chainIds.includes(e));n.length===0&&(n=t.chainIds),s.setState(e=>({...e,chainIds:n})),h.send(`__internal`,{chainIds:n,mode:`iframe`,referrer:cp(),theme:a,type:`init`}),_()}),h.on(`rpc-response`,e=>{r([e._request])&&(f.src=f.src),up(s,e)}),h.on(`__internal`,e=>{e.type===`switch`&&e.mode===`popup`&&(c.open(),c.syncRequests(s.getState().requestQueue))});let v=null,y=null,ee=()=>lp(s),te=e=>{e.key===`Escape`&&lp(s)},ne=new MutationObserver(e=>{for(let t of e){if(t.type!==`attributes`)continue;let e=t.attributeName;if(!e||e!==`inert`)continue;d.removeAttribute(e)}});ne.observe(d,{attributeOldValue:!0,attributes:!0});let re=!1,ie=()=>{re&&(re=!1,d.removeEventListener(`click`,ee),document.removeEventListener(`keydown`,te),d.style.pointerEvents=`none`,y?.focus(),y=null,Object.assign(document.body.style,v??``),document.body.style.overflow=v?.overflow??``)},ae=()=>{re||(re=!0,d.addEventListener(`click`,ee),document.addEventListener(`keydown`,te),f.focus(),d.style.pointerEvents=`auto`,v=Object.assign({},document.body.style),document.body.style.overflow=`hidden`)},b=!1,oe=()=>{b||(b=!0,document.activeElement instanceof HTMLElement&&(y=document.activeElement),d.removeAttribute(`hidden`),d.removeAttribute(`aria-closed`),d.showModal())},se=()=>{if(b){b=!1,d.setAttribute(`hidden`,`true`),d.setAttribute(`aria-closed`,`true`),d.close();for(let e of d.parentNode?Array.from(d.parentNode.children):[]){if(e===d||!e.hasAttribute(`inert`))continue;e.removeAttribute(`inert`)}}};return{close(){c.close(),l=!1,h.send(`__internal`,{mode:`iframe`,referrer:cp(),type:`init`}),se(),ie()},destroy(){c.close(),l=!1,ie(),se(),c.destroy(),h.destroy(),d.remove(),ne.disconnect(),g.removeEventListener(`change`,_)},open(){l||(l=!0,oe(),ae(),h.send(`__internal`,{mode:`iframe`,referrer:cp(),type:`init`}))},async secure(){let{trustedHosts:e}=await h.waitForReady(),n=(()=>{if(t)return!0;let e=window.location.protocol.startsWith(`https`);return e||Uf.warnOnce(`Detected insecure protocol (HTTP).`,`\n\nThe Porto iframe is not supported on HTTP origins (${window.location.origin})`,`due to lack of WebAuthn support.`,`See https://porto.sh/sdk#secure-origins-https for more information.`),e})(),r=Vf(),i=!!e?.includes(window.location.hostname),a=!!(r||i);return a||Uf.warnOnce([`Warning: Browser does not support IntersectionObserver v2 or host "${u.hostname}" is not trusted by Porto.`,`This may result in the dialog falling back to a popup.`,``,`Add "${u.hostname}" to the trusted hosts list to enable iframe dialog: https://github.com/ithacaxyz/porto/edit/main/src/trusted-hosts.ts`].join(`
`)),{frame:a,host:i,protocol:n}},async syncRequests(e){let{methodPolicies:t}=await h.waitForReady(),n=await this.secure(),i=e?.every(e=>t?.find(t=>t.method===e.request.method)?.modes?.headless===!0),a=r(e.map(e=>e.request));if(!i&&(a||!n.protocol||!n.frame))c.syncRequests(e);else{let n=e.some(e=>sp(e.request,{methodPolicies:t,targetOrigin:u.origin}));!l&&n&&this.open(),h.send(`rpc-requests`,e)}}}},supportsHeadless:!0})}function ip(e={}){if(typeof window>`u`)return ap();let{type:t=`auto`,size:n=op}=e;return np({name:`popup`,setup(e){let{host:r,internal:i,themeController:a}=e,{store:o}=i,s=new URL(r),c=null,l=t===`page`||t===`auto`&&qf()?`page`:`popup`;function u(){c&&lp(o)}let d=(()=>{let e=setInterval(()=>{c?.closed&&lp(o)},100);return()=>clearInterval(e)})(),f;return a?._setup(null,!0),{close(){c&&(c.close(),c=null)},destroy(){this.close(),window.removeEventListener(`focus`,u),f?.destroy(),d()},open(){if(l===`popup`){let e=(window.innerWidth-n.width)/2+window.screenX,t=window.screenY+100;c=window.open(dp(r),`_blank`,`width=${n.width},height=${n.height},left=${e},top=${t}`)}else c=window.open(dp(r),`_blank`);if(!c)throw Error(`Failed to open popup`);f=ep({from:$f(window,{targetOrigin:s.origin}),to:$f(c,{targetOrigin:s.origin}),waitForReady:!0}),a?._setup(f,!1),f.send(`__internal`,{mode:l===`page`?`page`:`popup`,referrer:cp(),theme:a?.getTheme()??e.theme,type:`init`}),f.on(`rpc-response`,e=>up(o,e)),window.removeEventListener(`focus`,u),window.addEventListener(`focus`,u)},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(e){e.some(e=>sp(e.request))&&((!c||c.closed)&&this.open(),c?.focus()),f?.send(`rpc-requests`,e)}}},supportsHeadless:!1})}function ap(){return np({name:`noop`,setup(){return{close(){},destroy(){},open(){},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(){}}},supportsHeadless:!0})}const op={height:282,width:360};function sp(e,t={}){let{methodPolicies:n,targetOrigin:r}=t,i=n?.find(t=>t.method===e.method);return i&&i.modes?.headless?!!(typeof i.modes.headless==`object`&&i.modes.headless.sameOrigin&&r!==window.location.origin):!0}function cp(){return{icon:(()=>{let e=document.querySelector(`link[rel="icon"][media="(prefers-color-scheme: dark)"]`)?.href,t=document.querySelector(`link[rel="icon"][media="(prefers-color-scheme: light)"]`)?.href??document.querySelector(`link[rel="icon"]`)?.href;return e&&t&&e!==t?{dark:e,light:t}:window.matchMedia(`(prefers-color-scheme: dark)`).matches?e:t})(),title:document.title}}function lp(e){e.setState(e=>({...e,requestQueue:e.requestQueue.map(e=>({account:e.account,error:new Ef,request:e.request,status:`error`}))}))}function up(e,t){e.setState(e=>({...e,requestQueue:e.requestQueue.map(e=>e.request.id===t.id?t.error?{account:e.account,error:t.error,request:e.request,status:`error`}:{account:e.account,request:e.request,result:t.result,status:`success`}:e)}))}function dp(e){let t=new URL(e),n=new URLSearchParams(window.location.search);for(let[e,r]of n.entries())e.startsWith(`porto.`)&&t.searchParams.set(e.slice(6),r);return t.toString()}function fp(e,t={}){return vs(e,t)}function pp(e,t,n){if(t===`Error`)return hp;if(t===`Panic`)return _p;if(Jt(t,{strict:!1})){let e=k(t,0,4);if(e===gp)return hp;if(e===vp)return _p}let r=ys(e,t,n);if(r.type!==`error`)throw new ws({name:t,type:`error`});return r}function mp(e){return bs(e)}const hp=fp({inputs:[{name:`message`,type:`string`}],name:`Error`,type:`error`}),gp=`0x08c379a0`,_p=fp({inputs:[{name:`reason`,type:`uint8`}],name:`Panic`,type:`error`}),vp=`0x4e487b71`;function yp(e){let t=tt(e);return x(`0x19`,w(`Ethereum Signed Message:
`+O(t)),t)}function bp(e){return V(yp(e))}function xp(e={}){let t=e.id??0;return{prepare(e){return Sp({id:t++,...e})},get id(){return t}}}function Sp(e){return{...e,jsonrpc:`2.0`}}function Cp(){return null}const wp=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,Tp=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,Ep=/^localhost(:[0-9]{1,5})?$/,Dp=/^[a-zA-Z0-9]{8,}$/,Op=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/,kp=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Ap=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function jp(e){let{chainId:t,domain:n,expirationTime:r,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:s,resources:c,scheme:l,uri:u,version:d}=e;{if(t!==Math.floor(t))throw new Fp({field:`chainId`,metaMessages:[`- Chain ID must be a EIP-155 chain ID.`,`- See https://eips.ethereum.org/EIPS/eip-155`,``,`Provided value: ${t}`]});if(!(wp.test(n)||Tp.test(n)||Ep.test(n)))throw new Fp({field:`domain`,metaMessages:[`- Domain must be an RFC 3986 authority.`,`- See https://www.rfc-editor.org/rfc/rfc3986`,``,`Provided value: ${n}`]});if(!Dp.test(a))throw new Fp({field:`nonce`,metaMessages:[`- Nonce must be at least 8 characters.`,`- Nonce must be alphanumeric.`,``,`Provided value: ${a}`]});if(!Mp(u))throw new Fp({field:`uri`,metaMessages:[`- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.`,`- See https://www.rfc-editor.org/rfc/rfc3986`,``,`Provided value: ${u}`]});if(d!==`1`)throw new Fp({field:`version`,metaMessages:[`- Version must be '1'.`,``,`Provided value: ${d}`]});if(l&&!Op.test(l))throw new Fp({field:`scheme`,metaMessages:[`- Scheme must be an RFC 3986 URI scheme.`,`- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1`,``,`Provided value: ${l}`]});let r=e.statement;if(r?.includes(`
`))throw new Fp({field:`statement`,metaMessages:[`- Statement must not include '\\n'.`,``,`Provided value: ${r}`]})}let f=Pa(e.address,{checksum:!0}),p=(()=>l?`${l}://${n}`:n)(),m=(()=>e.statement?`${e.statement}\n`:``)(),h=`${p} wants you to sign in with your Ethereum account:\n${f}\n\n${m}`,g=`URI: ${u}\nVersion: ${d}\nChain ID: ${t}\nNonce: ${a}\nIssued At: ${i.toISOString()}`;if(r&&(g+=`\nExpiration Time: ${r.toISOString()}`),o&&(g+=`\nNot Before: ${o.toISOString()}`),s&&(g+=`\nRequest ID: ${s}`),c){let e=`
Resources:`;for(let t of c){if(!Mp(t))throw new Fp({field:`resources`,metaMessages:[`- Every resource must be a RFC 3986 URI.`,`- See https://www.rfc-editor.org/rfc/rfc3986`,``,`Provided value: ${t}`]});e+=`\n- ${t}`}g+=e}return`${h}\n${g}`}function Mp(e){if(/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e)||/%[^0-9a-f]/i.test(e)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return!1;let t=Np(e),n=t[1],r=t[2],i=t[3],a=t[4],o=t[5];if(!(n?.length&&i&&i.length>=0))return!1;if(r?.length){if(!(i.length===0||/^\//.test(i)))return!1}else if(/^\/\//.test(i))return!1;if(!/^[a-z][a-z0-9+\-.]*$/.test(n.toLowerCase()))return!1;let s=``;return s+=`${n}:`,r?.length&&(s+=`//${r}`),s+=i,a?.length&&(s+=`?${a}`),o?.length&&(s+=`#${o}`),s}function Np(e){return e.match(/(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}function Pp(e){let{scheme:t,statement:n,...r}=e.match(kp)?.groups??{},{chainId:i,expirationTime:a,issuedAt:o,notBefore:s,requestId:c,...l}=e.match(Ap)?.groups??{},u=e.split(`Resources:`)[1]?.split(`
- `).slice(1);return{...r,...l,...i?{chainId:Number(i)}:{},...a?{expirationTime:new Date(a)}:{},...o?{issuedAt:new Date(o)}:{},...s?{notBefore:new Date(s)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}var Fp=class extends u{constructor(e){let{field:t,metaMessages:n}=e;super(`Invalid Sign-In with Ethereum message field "${t}".`,{metaMessages:n}),Object.defineProperty(this,`name`,{enumerable:!0,configurable:!0,writable:!0,value:`Siwe.InvalidMessageFieldError`})}};function Ip(e){let t=un.createServer(e);return new Promise((e,n)=>{t.on(`error`,n),t.listen(()=>{let{port:n}=t.address();e(Object.assign(t,{closeAsync(){return new Promise((e,n)=>t.close(t=>t?n(t):e(void 0)))},url:`http://localhost:${n}`}))})})}async function Lp(){let e=new Map,t=new Set,n=new Set,r=await Ip((r,i)=>{let a=ln.parse(r.url,!0);if(i.setHeader(`Access-Control-Allow-Origin`,`*`),i.setHeader(`Access-Control-Allow-Methods`,`GET, POST, OPTIONS`),i.setHeader(`Access-Control-Allow-Headers`,`Content-Type`),i.setHeader(`Access-Control-Allow-Private-Network`,`true`),r.method===`OPTIONS`){i.writeHead(200),i.end();return}if(r.method===`GET`&&a.pathname===`/`){i.writeHead(200,{"Access-Control-Allow-Origin":`*`,"Cache-Control":`no-cache`,Connection:`keep-alive`,"Content-Type":`text/event-stream`}),t.add(i),r.on(`close`,()=>t.delete(i));return}if(r.method===`POST`&&a.pathname===`/`){let t=``;r.on(`data`,e=>t+=e.toString()),r.on(`end`,()=>{try{let n=JSON.parse(t);if(n.topic&&n.payload!==void 0){let t=e.get(n.topic);if(t){let e={data:n,origin:`http://localhost`};for(let r of t)r(n.payload,e)}}i.writeHead(200,{"Content-Type":`text/plain`}),i.end(`ok`)}catch(e){i.writeHead(400,{"Content-Type":`text/plain`}),i.end(`Invalid JSON`)}})}else r.method===`GET`&&a.pathname===`/.well-known/keys`?(i.writeHead(200,{"Access-Control-Allow-Origin":`*`,"Content-Type":`application/json`}),i.end(JSON.stringify({keys:Array.from(n)}))):(i.writeHead(404,{"Content-Type":`text/plain`}),i.end(`not found`))}),i=r.url,a=Jf(),o={destroy(){e.clear();for(let e of t)try{e.end()}catch{}t.clear(),r.close()},on(t,n){return e.has(t)||e.set(t,new Set),e.get(t).add(n),()=>{let r=e.get(t);r&&(r.delete(n),r.size===0&&e.delete(t))}},registerPublicKey(e){n.add(e)},relayUrl:i,async send(e,n){let r=Zf(),i=`data: ${It({id:r,payload:n,topic:e})}\n\n`;for(let e of t)try{e.write(i)}catch{t.delete(e)}return{id:r,payload:n,topic:e}},async sendAsync(){throw Error(`Not implemented`)},waitForReady(){return o.on(`ready`,a.resolve),a.promise}};return o}const Rp=await Lp();async function zp(){let e=!1;return np({name:`cli`,setup(t){return Rp.on(`rpc-response`,e=>{up(t.internal.store,e)}),Rp.on(`ready`,()=>{let{store:e}=t.internal,n=e.getState().requestQueue.map(e=>e.status===`pending`?e:void 0).filter(Boolean);Rp.send(`rpc-requests`,n)}),{close(){},destroy(){Rp.destroy()},open(){let n=new URLSearchParams([[`relayUrl`,Rp.relayUrl]]),r=t.host.replace(/\/$/,``)+`/?`+n.toString();console.log(`

Open the URL below in your browser to continue:`),console.log(`\n${r}\n`),e=!0},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(t){if(t.length>1)throw Error("renderer (`cli`) does not support multiple requests.");t[0]?.request&&(e||this.open(),await Rp.waitForReady(),Rp.send(`rpc-requests`,t))}}},supportsHeadless:!0})}function Bp(e){return{...e,setup:e.setup??(()=>()=>{})}}async function Vp(e){let{account:t,calls:n,permissionsId:r}=e;if(r!==void 0){if(r===null)return;let e=t.keys?.find(e=>e.publicKey===r&&e.privateKey);if(!e)throw Error(`permission (id: ${r}) does not exist.`);return e}let i=t.keys?.find(e=>!e.privateKey||e.role!==`session`||e.expiry<BigInt(Math.floor(Date.now()/1e3))?!1:!!n.every(t=>e.permissions?.calls?.some(e=>{if(e.to&&e.to!==t.to)return!1;if(e.signature){if(!t.data)return!1;let n=k(t.data,0,4);if(Jt(e.signature))return e.signature===n;if(bs(e.signature)!==n)return!1}return!0}))),a=t.keys?.find(e=>e.role===`admin`&&e.privateKey);return i??a}const Hp=hd;function Up(e,t){let{chainId:n,expiry:r,permissions:i,id:a,publicKey:o,type:s}=e,{address:c}=t;return{address:c,chainId:n,expiry:r,id:a,key:{publicKey:o,type:s},permissions:i??{}}}function Wp(e){let{chainId:t,expiry:n,key:r}=e;return U({chainId:t,expiry:n,permissions:e.permissions??{},publicKey:r.publicKey,role:`session`,type:r.type})}const Gp=gd;function Kp(e){let{expiry:t,feeToken:n,permissions:r,publicKey:i,type:a}=e;return{expiry:t,feeToken:n??null,key:{publicKey:i,type:a},permissions:r??{}}}async function qp(e,t={}){if(!e)return;let n=t.chainId??e.chainId,r=e.expiry??0,i=e.key?.type??`secp256k1`,a=e.feeToken,o=pu(e,{feeTokens:t.feeTokens}),s=e?.key?.publicKey??`0x`,c=U({chainId:n,expiry:r,feeToken:a,permissions:o,publicKey:s,role:`session`,type:i});return e?.key?c:await ru({...c,role:`session`})}async function Jp(e){let{address:t,authUrl:n,message:r,signature:i}=e,{chainId:a}=Pp(r);return await fetch(n.verify,{body:JSON.stringify({address:t,chainId:a,message:r,signature:i,walletAddress:t}),credentials:`include`,headers:{"Content-Type":`application/json`},method:`POST`}).then(e=>e.json())}async function Yp(e,t,n){let{chainId:r=e.chain?.id,domain:i,uri:a,resources:o,version:s=`1`}=t,{address:c}=n,l=t.authUrl?Xp(t.authUrl):void 0;if(!r)throw Error("`chainId` is required.");if(!i)throw Error("`domain` is required.");if(!t.nonce&&!l?.nonce)throw Error("`nonce` or `authUrl.nonce` is required.");if(!a)throw Error("`uri` is required.");let u=await(async()=>{if(t.nonce)return t.nonce;if(!l?.nonce)throw Error("`nonce` or `authUrl.nonce` is required.");let e=await(await fetch(l.nonce,{body:JSON.stringify({address:c,chainId:r,walletAddress:c}),headers:{"Content-Type":`application/json`},method:`POST`})).json().catch(()=>void 0);if(!e?.nonce)throw Error("`nonce` or `authUrl.nonce` is required.");return e.nonce})();return jp({...t,address:n.address,chainId:r,domain:i,nonce:u,resources:o,uri:a,version:s})}function Xp(e,t=``){if(!e)return;let n=(()=>{if(typeof e==`string`){let t=e.replace(/\/$/,``);return{logout:t+`/logout`,nonce:t+`/nonce`,verify:t+`/verify`}}return e})();return{logout:Zp(n.logout,t),nonce:Zp(n.nonce,t),verify:Zp(n.verify,t)}}function Zp(e,t){return!t||!e.startsWith(`/`)?e:t+e}var Qp=class extends l{constructor(){super(`Function is not recognized.`,{metaMessages:[`This could be due to any of the following:`,`  - The contract does not have the function,`,`  - The address is not a contract.`],name:`FunctionSelectorNotRecognizedError`})}};function $p(e,t){let n=e.walk(e=>`data`in e);if(!n?.data)return e;if(n.data===mp(fp(`error FnSelectorNotRecognized()`)))return new Qp;let r=null;for(let e of t.calls){let t=e;if(!t.abi)continue;try{if(!Ue({abi:t.abi,data:n.data}))continue;r=t}catch{}}return r?zr(n,{abi:r.abi,address:r.to,args:r.args,functionName:r.functionName}):e}async function em(e,t){let{account:n=e.account}=t,r=n?J(n):void 0;if(!r)throw Error(`account is required.`);let{domain:{name:i,version:a}}=await Di(e,{address:r.address});if(!e.chain)throw Error(`client.chain is required`);return{chainId:e.chain.id,name:i,verifyingContract:r.address,version:a}}async function tm(e,t){try{let n=`wallet_getAuthorization`,r=await Ci(()=>e.request({method:n,params:[j.encode(Zu.Parameters,t)]}),{cacheKey:`${e.uid}.${n}.${t.address}`});return j.decode(Zu.Response,r)}catch(e){throw $(e),e}}async function nm(e,t={}){let n=(()=>{if(t.chainId)return[t.chainId];if(t.chainIds!==`all`)return t.chainIds?t.chainIds:[e.chain.id]})();try{let r=`wallet_getCapabilities`,i=await Ci(()=>e.request({method:r,params:n?[n]:void 0},{retryCount:0}),{cacheKey:`${e.uid}.${r}.${n?.join(`,`)}`}),a=(()=>t.raw?i:j.decode(Qu.Response,i))();return t.chainIds?a:Object.values(a)[0]}catch(e){throw $(e),e}}async function rm(e,t){let{account:n,assetFilter:r,assetTypeFilter:i,chainFilter:a}=t;try{let t=await e.request({method:`wallet_getAssets`,params:[j.encode($u.Parameters,{account:n,assetFilter:r,assetTypeFilter:i,chainFilter:a})]}),o=j.decode($u.Response,t),s=Object.entries(o).reduce((e,[t,n])=>(e[Ht(t)]=n,e),{}),c={};for(let e of Object.values(s))for(let t of e){let e=JSON.stringify(t.metadata);c[e]={...t,balance:t.balance+(c[e]?.balance??0n)}}return{...s,0:Object.values(c)}}catch(e){throw $(e),e}}async function im(e,t){let{id:n}=t;try{let t=await e.request({method:`wallet_getCallsStatus`,params:[n]});return j.decode(ed.Response,t)}catch(e){throw $(e),e}}async function am(e,t){let{address:n,chainIds:r}=t;try{let t=await e.request({method:`wallet_getKeys`,params:[j.encode(td.Parameters,{address:n,chainIds:r})]});return j.decode(td.Response,t)}catch(e){throw $(e),e}}async function om(e){let t=`health`,n=await Ci(()=>e.request({method:t}),{cacheKey:`${e.uid}.${t}`});return j.decode(Ju.Response,n)}async function sm(e,t){let{address:n,capabilities:r,chain:i=e.chain,key:a}=t,o=t.calls.map(e=>({data:e.abi?Ts(Es(e.abi,e.functionName),e.args):e.data??`0x`,to:e.to,value:e.value??0n}));try{let t=await e.request({method:`wallet_prepareCalls`,params:[j.encode(nd.Parameters,{calls:o,capabilities:{...r,meta:{...r?.meta}},chainId:i?.id,from:n,key:a?{prehash:a.prehash,publicKey:a.publicKey,type:a.type}:void 0})]},{retryCount:0});return Object.assign(j.decode(nd.Response,t),{_raw:t})}catch(e){throw $(e),hm(e,{calls:t.calls}),e}}async function cm(e,t){let{address:n,chain:r=e.chain,delegation:i,...a}=t;try{let t=await e.request({method:`wallet_prepareUpgradeAccount`,params:[j.encode(rd.Parameters,Yf({address:n,capabilities:a,chainId:r?.id,delegation:i}))]},{retryCount:0});return j.decode(rd.Response,t)}catch(e){throw $(e),hm(e),e}}async function lm(e,t){let{capabilities:n,context:r,key:i,signature:a}=t;try{let t=await e.request({method:`wallet_sendPreparedCalls`,params:[j.encode(ad.Parameters,{capabilities:n,context:{preCall:r.preCall,quote:r.quote},key:i?{prehash:i.prehash,publicKey:i.publicKey,type:i.type}:void 0,signature:a})]},{retryCount:0});return j.decode(ad.Response,t)}catch(e){throw $(e),hm(e),e}}async function um(e,t){let{email:n,walletAddress:r}=t;try{let t=await e.request({method:`account_setEmail`,params:[j.encode(Ku.Parameters,{email:n,walletAddress:r})]},{retryCount:0});return j.decode(Ku.Response,t)}catch(e){throw $(e),hm(e),e}}async function dm(e,t){let{context:n,signatures:r}=t;try{await e.request({method:`wallet_upgradeAccount`,params:[j.encode(od.Parameters,{context:n,signatures:r})]},{retryCount:0})}catch(e){throw $(e),hm(e),e}}async function fm(e,t){let{chainId:n,email:r,signature:i,token:a,walletAddress:o}=t;try{let t=await e.request({method:`account_verifyEmail`,params:[j.encode(qu.Parameters,{chainId:n,email:r,signature:i,token:a,walletAddress:o})]},{retryCount:0});return j.decode(qu.Response,t)}catch(e){throw $(e),hm(e),e}}async function pm(e,t){let{signature:n}=t,{signature:r,capabilities:{feeSignature:i,...a},...o}=t.response,s=gm({capabilities:a,...o}),c=V(w(JSON.stringify(s))),l=rs({payload:c,signature:Fo(n)}),{quoteSigner:u}=await om(e);return l===u}async function mm(e,t){let{address:n,chain:r=e.chain,digest:i,signature:a}=t;try{async function t(){return{proof:null,valid:await Fs(e,{address:n,hash:i,signature:a})}}let o=await(async()=>{let o=await e.request({method:`wallet_verifySignature`,params:[j.encode(sd.Parameters,{address:n,chainId:r?.id,digest:i,signature:a})]},{retryCount:0}).catch(t);return o.valid?o:t()})();return j.decode(sd.Response,o)}catch(e){throw $(e),e}}function hm(e,{calls:t}={}){if(!(e instanceof l))return;let n=e=>{try{if(e.name===`ContractFunctionExecutionError`){let t=e.cause.name===`ContractFunctionRevertedError`?e.cause.data:void 0;if(t)return pp([t.abiItem],t.errorName)}let t=e.walk(e=>!(e instanceof Error)&&e.code===3);if(!t)return;let{data:n,message:r}=t;return n===`0xd0d5039b`?fp(`error Unauthorized()`):{inputs:[],name:(r??n).split(`(`)[0],type:`error`}}catch{return}},r=$p(e,{calls:t??[]}),i=n(r);if(!(r===e&&!i))throw new _m(Object.assign(r,{abiError:i}))}function gm(e){if(typeof e==`object`&&e){if(Array.isArray(e))return e.map(gm);let t={};for(let n of Object.keys(e).sort())t[n]=gm(e[n]);return t}return e}function $(e){if(e.name===`$ZodError`)throw yu(e)}var _m=class extends u{constructor(e){super(`An error occurred while executing calls.`,{cause:e,metaMessages:[e.abiError&&`Reason: `+e.abiError.name].filter(Boolean)}),this.name=`Rpc.ExecutionError`,this.abiError=e.abiError}};async function vm(e,t){let{account:n=e.account,chainIds:r}=t,i=n?J(n):void 0;if(!i)throw Error(`account is required.`);let a=await am(e,{address:i.address,chainIds:r});return Object.entries(a).flatMap(([e,t])=>t.map(t=>iu(t,{chainId:Number(e)})))}async function ym(e,t){let{account:n=e.account,calls:r,chain:i=e.chain,feePayer:a,merchantUrl:o,nonce:s,preCalls:c,requiredFunds:l,revokeKeys:u}=t,d=n?J(n):void 0,f=t.key??(d?cf(d,{role:`admin`}):void 0),p=t.authorizeKeys?.some(e=>e.role===`session`),{contracts:m,fees:{tokens:h}}=await nm(e,{chainId:i?.id}),g=p?m.orchestrator.address:void 0,_=(t.authorizeKeys??[]).map(e=>fu(e,{feeTokens:h,orchestrator:g})),v=(()=>t.feeToken?t.feeToken:f?.permissions?.spend?.[0]?.token)(),y=typeof c==`boolean`?c:!1,ee=typeof c==`object`?c.map(({context:e,signature:t})=>({...e.preCall,signature:t})):void 0,te={address:d?.address,calls:r??[],capabilities:{authorizeKeys:_,meta:{feePayer:a,feeToken:v,nonce:s},preCall:y,preCalls:ee,requiredFunds:l,revokeKeys:u?.map(e=>({hash:e.hash}))},chain:i,key:f?fu(f,{feeTokens:h}):void 0},ne=await(async()=>{if(o){let t=$s({chain:e.chain,transport:oc(o)});return await sm(t,te).catch(t=>(console.error(t),sm(e,te)))}return await sm(e,te)})(),{capabilities:re,context:ie,digest:ae,signature:b,typedData:oe}=ne;if(o&&!await pm(e,{response:ne._raw,signature:b}))throw Error(`cannot verify integrity of \`wallet_prepareCalls\` response from ${o}`);return{capabilities:{...re,quote:ie.quote},context:ie,digest:ae,key:f,typedData:oe}}async function bm(e,t){let{address:n,authorizeKeys:r,chain:i=e.chain}=t;if(!i)throw Error(`chain is required.`);let{contracts:a,fees:{tokens:o}}=await nm(e,{chainId:i.id}),s=t.delegation??a.accountProxy.address,c=r.some(e=>e.role===`session`)?a.orchestrator.address:void 0,l=r.map(e=>{let t=e.role===`session`?e.permissions:{};return fu({...e,permissions:t},{feeTokens:o,orchestrator:c})}),{capabilities:u,chainId:d,context:f,digests:p,typedData:m}=await cm(e,{address:n,authorizeKeys:l,chain:i,delegation:s}),h=J({address:n,keys:r});return{capabilities:u,chainId:d,context:{...f,account:h},digests:p,typedData:m}}async function xm(e,t){let{account:n=e.account,chain:r=e.chain,webAuthn:i}=t;if(!r)throw Error("`chain` is required.");let a=n?J(n):void 0;if(!a)throw Error("`account` is required.");let o=t.key??cf(a,t);if(!o&&!a.sign)throw Error("`key` or `account` with `sign` is required");let s=await Promise.all((t.preCalls??[]).map(async n=>{if(n.signature)return n;let{authorizeKeys:o,key:s,calls:c,revokeKeys:l}=n,{context:u,digest:d}=await ym(e,{account:a,authorizeKeys:o,calls:c,chain:r,feeToken:t.feeToken,key:s,preCalls:!0,revokeKeys:l}),f=await du(s,{address:null,payload:d,webAuthn:i});return{context:u,signature:f}})),{capabilities:c,context:l,digest:u}=await ym(e,{...t,account:a,chain:r,key:o,preCalls:s}),d=await(async()=>o?await du(o,{address:null,payload:u,webAuthn:i,wrap:!1}):await a.sign({hash:u}))();return await Sm(e,{capabilities:c.feeSignature?{feeSignature:c.feeSignature}:void 0,context:l,key:o,signature:d})}async function Sm(e,t){let{capabilities:n,context:r,key:i,signature:a}=t;return await lm(e,{capabilities:n,context:r,key:i?fu(i):void 0,signature:a})}async function Cm(e,t){let{email:n,walletAddress:r}=t;return await um(e,{email:n,walletAddress:r})}async function wm(e,t){if(t.account){let{account:n}=t,r=[...n.keys??[],...t.authorizeKeys??[]].filter((e,t,n)=>n.findIndex(t=>t.id===e.id)===t),{digests:i,...a}=await bm(e,{...t,address:n.address,authorizeKeys:r}),o={auth:await n.sign({hash:i.auth}),exec:await n.sign({hash:i.exec})};return await wm(e,{...a,signatures:o})}let{context:n,signatures:r}=t,i=J(n.account);return await dm(e,{context:n,signatures:r}),i}async function Tm(e,t){let{chainId:n,email:r,signature:i,token:a,walletAddress:o}=t;return await fm(e,{chainId:n,email:r,signature:i,token:a,walletAddress:o})}async function Em(e,t){let{address:n}=t,{authorization:r,data:i,to:a}=await tm(e,{address:n});return fs({authorization:{...r,nonce:BigInt(r.nonce),r:BigInt(r.r),s:BigInt(r.s)},data:i,signature:t.signature,to:a})}function Dm(e,t){let{tokens:n}=t,r=n.filter(e=>e.interop);return e.map(e=>{if(e.address)return e;let t=r.find(t=>t.symbol===e.symbol);if(!t)throw Error(`interop token not found: ${e.symbol}`);return{address:t.address,value:Sl(e.value,t.decimals)}})}async function Om(e,t){let{chain:n=e.chain}=t??{};return await nm(e,{chainId:n?.id}).then(e=>e.fees.tokens)}async function km(e,t){let{addressOrSymbol:n}=t;return(await Om(e,t)).find(km.predicate(n))}(function(e){function t(e){return t=>e?Ia(e)?H(t.address,e):e===`native`?t.address===Os:e===t.symbol:!1}e.predicate=t})(km||(km={}));async function Am(e,t){let{chain:n=e.chain,store:r}=t??{},i=r?.getState()??{},a=t?.addressOrSymbol??i.feeToken;return(await Om(e,{chain:n}).then(e=>e.filter(e=>e.feeToken)))?.find(e=>a?a===`native`&&e.address===Os||Ia(a)&&H(e.address,a)?!0:a===e.symbol:!1)}function jm(e={}){let t=e,{mock:n,multichain:r=!0,webAuthn:i}=t,a,o,s=(()=>{if(t.keystoreHost!==`self`&&!(typeof window<`u`&&window.location?.hostname===`localhost`))return t.keystoreHost})();return Bp({actions:{async addFunds(){throw new Df},async createAccount(e){let{admins:t,email:r,label:o,permissions:c,internal:l,signInWithEthereum:u}=e,{client:d}=l,f=sf(ns()),p=await Om(d),m=n?nu():await tu({createFn:i?.createFn,label:o||`${f.address.slice(0,8)}\u2026${f.address.slice(-6)}`,rpId:s,userId:nt(f.address)}),h=await qp(c,{chainId:d.chain.id,feeTokens:p}),g=t?.map(e=>U(e)),_=await wm(d,{account:f,authorizeKeys:[m,...g??[],...h?[h]:[]]});a=f.address,r&&o&&await Cm(d,{email:o,walletAddress:_.address});let v=await(async()=>{if(!u)return;let e=await Yp(d,u,{address:_.address}),t=await lf(f,{payload:bp(w(e))}),n=await Em(d,{address:_.address,signature:t});return{message:e,signature:n}})();return{account:{..._,signInWithEthereum:v}}},async getAccountVersion(e){let{address:t,internal:n}=e,{client:r}=n,{contracts:i}=await nm(r),{accountImplementation:a}=i,o=await em(r,{account:J(a)}).then(e=>e.version),s=await em(r,{account:t}).then(e=>e.version).catch(()=>o);if(!s||!o)throw Error(`version not found.`);return{current:s,latest:o}},async getAssets(e){let{account:t,chainFilter:n,assetFilter:r,assetTypeFilter:i,internal:a}=e,{client:o}=a;return await rm(o,{account:t,assetFilter:r,assetTypeFilter:i,chainFilter:n})},async getCallsStatus(e){let{id:t,internal:n}=e,{client:r}=n,i=await im(r,{id:t});return{atomic:!0,chainId:C(r.chain.id),id:t,receipts:i.receipts?.map(e=>({blockHash:e.blockHash,blockNumber:C(e.blockNumber),gasUsed:C(e.gasUsed),logs:e.logs,status:e.status,transactionHash:e.transactionHash})),status:i.status,version:`1.0`}},async getCapabilities(e){let{chainIds:t,internal:n}=e,{client:i}=n,a={atomic:{status:`supported`},atomicBatch:{supported:!0},feeToken:{supported:!0,tokens:[]},merchant:{supported:!0},permissions:{supported:!0},requiredFunds:{supported:!!r,tokens:[]}},o=await nm(i,{chainIds:t?t.map(e=>Ht(e)):`all`,raw:!0});return Object.entries(o).reduce((e,[t,n])=>({...e,[t]:{...a,...n,feeToken:{supported:!0,tokens:n.fees.tokens},requiredFunds:{supported:!!r,tokens:r?n.fees.tokens.filter(e=>e.interop):[]}}}),{})},async getKeys(e){let{account:t,chainIds:n,internal:r}=e,{client:i}=r,a=await vm(i,{account:t,chainIds:n});return Xf([...a,...t.keys??[]],e=>e.publicKey)},async grantAdmin(e){let{account:t,internal:n}=e,{client:r}=n,a=U(e.key,{chainId:r.chain.id}),o=await Am(r,{addressOrSymbol:e.feeToken,store:n.store}),{id:s}=await xm(r,{account:t,authorizeKeys:[a],feeToken:o?.address,webAuthn:i});return await Js(r,{id:s,pollingInterval:500}),{key:a}},async grantPermissions(e){let{account:t,internal:n,permissions:r}=e,{client:i}=n,a=await Om(i),o=await qp(r,{chainId:i.chain.id,feeTokens:a});if(!o)throw Error(`key to authorize not found.`);let s=t.keys?.find(e=>e.role===`admin`&&e.privateKey);if(!s)throw Error(`admin key not found.`);let{context:c,digest:l}=await ym(i,{account:t,authorizeKeys:[o],key:s,preCalls:!0}),u=await du(s,{address:null,payload:l});return await Sm(i,{context:c,key:s,signature:u}),{key:o}},async loadAccounts(e){let{internal:t,permissions:r,signInWithEthereum:o}=e,{client:c}=t,l=await Om(c),u=await qp(r,{chainId:c.chain.id,feeTokens:l}),{digest:d,digestType:f,message:p}=await(async()=>{if(o&&e.address){let t=await Yp(c,o,{address:e.address});return{context:void 0,digest:bp(w(t)),digestType:`siwe`,message:t}}return{context:void 0,digest:`0x`,message:void 0}})(),{address:m,credentialId:h,webAuthnSignature:g}=await(async()=>{if(n){if(!a)throw Error(`address_internal not found.`);return{address:a,credentialId:void 0}}if(e.address&&e.key)return{address:e.address,credentialId:e.key.credentialId};let t=await Bl({challenge:d,getFn:i?.getFn,rpId:s}),r=t.raw.response,o=Vt(new Uint8Array(r.userHandle)),c=t.raw.id;return{address:o,credentialId:c,webAuthnSignature:t}})(),_=await vm(c,{account:m,chainIds:[c.chain.id]}),v=J({address:m,keys:[..._,...u?[u]:[]].map((e,t)=>t===0&&e.type===`webauthn-p256`?ou({...e,credential:{id:h,publicKey:wa(e.publicKey)},id:m,rpId:s}):e)}),y=cf(v,{role:`admin`}),ee=await(async()=>{if(d!==`0x`)return g?gu(hu(g),{keyType:`webauthn-p256`,publicKey:y.publicKey}):await du(y,{address:v.address,payload:d})})();if(u){let{context:e,digest:t}=await ym(c,{account:v,authorizeKeys:[u],preCalls:!0}),n=await du(y,{address:null,payload:t});await Sm(c,{context:e,key:y,signature:n})}let te=await(async()=>{if(o){if(f===`siwe`&&p&&ee){let e=await Em(c,{address:v.address,signature:ee});return{message:p,signature:e}}{let e=await Yp(c,o,{address:v.address}),t=await lf(v,{payload:bp(w(e)),role:`admin`}),n=await Em(c,{address:v.address,signature:t});return{message:e,signature:n}}}})();return{accounts:[{...v,signInWithEthereum:te}]}},async prepareCalls(e){let{account:t,calls:n,internal:i,merchantUrl:a}=e,{client:o}=i,s=e.key??await Vp({account:t,calls:n});if(!s)throw Error(`cannot find authorized key to sign with.`);let[c,l]=await Promise.all([Om(o),Am(o,{addressOrSymbol:e.feeToken,store:i.store})]),u=Dm(e.requiredFunds??[],{tokens:c}),{capabilities:d,context:f,digest:p,typedData:m}=await ym(o,{account:t,calls:n,feeToken:l?.address,key:s,merchantUrl:a,requiredFunds:r?u:void 0}),h=f.quote?.quotes??[],g=h[h.length-1];return{account:t,capabilities:{...d,quote:f.quote},chainId:o.chain.id,context:{...f,account:t,calls:n,nonce:g?.intent.nonce},digest:p,key:s,typedData:m}},async prepareUpgradeAccount(e){let{address:t,email:r,label:a,internal:c,permissions:l}=e,{client:u}=c,[d,f]=await Promise.all([Om(u),Am(u,{store:c.store})]),p=n?nu():await tu({createFn:i?.createFn,label:a||`${t.slice(0,8)}\u2026${t.slice(-6)}`,rpId:s,userId:nt(t)}),m=await qp(l,{chainId:u.chain.id,feeTokens:d}),{context:h,digests:g}=await bm(u,{address:t,authorizeKeys:[p,...m?[m]:[]],feeToken:f?.address});return r&&(o=a),{context:h,digests:g}},async revokeAdmin(e){let{account:t,id:n,internal:r}=e,{client:a}=r,o=t.keys?.find(e=>e.id===n);if(o){if(o.type===`webauthn-p256`&&t.keys?.filter(e=>e.type===`webauthn-p256`).length===1)throw Error(`revoke the only WebAuthn key left.`);try{let n=await Am(a,{addressOrSymbol:e.feeToken,store:r.store}),{id:s}=await xm(a,{account:t,feeToken:n?.address,revokeKeys:[o],webAuthn:i});await Js(a,{id:s})}catch(e){let t=e;if(t.name===`Rpc.ExecutionError`&&t.abiError?.name===`KeyDoesNotExist`)return;throw e}}},async revokePermissions(e){let{account:t,id:n,internal:r}=e,{client:a}=r,o=t.keys?.find(e=>e.id===n);if(o){if(o.role===`admin`)throw Error(`cannot revoke admins.`);try{let n=await Am(a,{addressOrSymbol:e.feeToken,store:r.store}),{id:s}=await xm(a,{account:t,feeToken:n?.address,revokeKeys:[o],webAuthn:i});await Js(a,{id:s})}catch(e){let t=e;if(t.name===`Rpc.ExecutionError`&&t.abiError?.name===`KeyDoesNotExist`)return;throw e}}},async sendCalls(e){let{account:t,asTxHash:n,calls:a,internal:o,merchantUrl:s}=e,{client:c}=o,l=await Vp({account:t,calls:a,permissionsId:e.permissionsId}),[u,d]=await Promise.all([Om(c),Am(c,{addressOrSymbol:e.feeToken,store:o.store})]),f=Dm(e.requiredFunds??[],{tokens:u}),p=await xm(c,{account:t,calls:a,feeToken:d?.address,key:l,merchantUrl:s,requiredFunds:r?f:void 0,webAuthn:i});if(n){let{id:e,receipts:t,status:n}=await Js(c,{id:p.id,pollingInterval:500});if(!t?.[0])throw n===`success`?new Nf({message:`Call bundle with id: `+e+` not found.`}):new _f({message:`Transaction failed under call bundle id: `+e+`.`});return{id:t[0].transactionHash}}return p},async sendPreparedCalls(e){let{context:t,key:n,internal:r,signature:i}=e,{client:a}=r,{id:o}=await Sm(a,{context:t,key:n,signature:i});return o},async signPersonalMessage(e){let{account:t,data:n,internal:r}=e,{client:a}=r,o=t.keys?.find(e=>e.role===`admin`&&e.privateKey);if(!o)throw Error(`cannot find admin key to sign with.`);let s=await lf(t,{key:o,payload:bp(n),webAuthn:i});return Em(a,{address:t.address,signature:s})},async signTypedData(e){let{account:t,internal:n}=e,{client:r}=n,a=t.keys?.find(e=>e.role===`admin`&&e.privateKey);if(!a)throw Error(`cannot find admin key to sign with.`);let o=Ct(e.data),s=o.domain?.name===`Orchestrator`,c=await lf(t,{key:a,payload:ul(o),replaySafe:!s,webAuthn:i});return s?c:Em(r,{address:t.address,signature:c})},async upgradeAccount(e){let{account:t,context:n,internal:r,signatures:i}=e,{client:a}=r;return await wm(a,{context:n,signatures:i}),o&&await Cm(a,{email:o,walletAddress:t.address}),{account:t}},async verifyEmail(e){let{account:t,chainId:n,email:r,token:a,internal:o,walletAddress:s}=e,{client:c}=o,l=t.keys?.find(e=>e.role===`admin`&&e.privateKey);if(!l)throw Error(`cannot find admin key to sign with.`);let u=await lf(t,{key:l,payload:V(w(`${r}${a}`)),webAuthn:i});return await Tm(c,{chainId:n,email:r,signature:u,token:a,walletAddress:s})}},config:e,name:`rpc`})}function Mm(e={}){let{fallback:t=jm(),host:n=tp.prod,renderer:r=rp(),theme:i,themeController:a}=e,o=new Set,s=xp();function c(e){return Rf({async request(t){let n=s.prepare(t);return e.setState(e=>{let t=e.accounts[0],r=t?.keys?.find(e=>e.role===`admin`&&e.type===`webauthn-p256`);return{...e,requestQueue:[...e.requestQueue,{account:t?{address:t.address,key:r?{credentialId:r?.credentialId,publicKey:r.publicKey}:void 0}:void 0,request:n,status:`pending`}]}}),new Promise((t,r)=>{let i=a=>{let s=a.find(e=>e.request.id===n.id);if(!s&&a.length===0){o.delete(i),r(new Ef);return}s&&(s.status!==`success`&&s.status!==`error`||(o.delete(i),s.status===`success`?t(s.result):r(zf(s.error)),e.setState(e=>({...e,requestQueue:e.requestQueue.filter(e=>e.request.id!==n.id)}))))};o.add(i)})}},{schema:Cp()})}return Bp({actions:{async addFunds(e){let{internal:t}=e,{request:n,store:r}=t;if(n.method!==`wallet_addFunds`)throw Error(`Cannot add funds for method: `+n.method);return await c(r).request(n)},async createAccount(e){let{internal:t}=e,{client:n,config:r,request:i,store:a}=t,{storage:o}=r,s=c(a);return{account:await(async()=>{if(i.method===`wallet_connect`){let[{capabilities:e,chainIds:t}]=i._decoded.params??[{}],a=Pm(e?.signInWithEthereum?.authUrl??r.authUrl,{storage:o}),c=i.params?.[0]?.capabilities?.signInWithEthereum,l=await qp(e?.grantPermissions,{chainId:n.chain.id}),u=l?j.encode(Gp,Kp(l)):void 0,{accounts:d}=await s.request({...i,params:[{capabilities:{...i.params?.[0]?.capabilities,grantPermissions:u,signInWithEthereum:a||c?{...c,authUrl:a}:void 0},chainIds:t?.map(e=>C(e))}]}),[f]=d;if(!f)throw Error(`no account found.`);let p=f.capabilities?.admins?.map(e=>U(e,{chainId:n.chain.id})).filter(Boolean),m=f.capabilities?.permissions?.map(e=>{try{let t=Wp(j.decode(Hp,e));return t.id===l?.id?{...t,...l,permissions:t.permissions}:t}catch{return}}).filter(Boolean),h=await(async()=>{if(!f.capabilities?.signInWithEthereum)return;let{message:e,signature:t}=f.capabilities.signInWithEthereum;if(!a)return{message:e,signature:t};let{token:n}=await Jp({address:f.address,authUrl:a,message:e,signature:t});return{message:e,signature:t,token:n}})();return{...J({address:f.address,keys:[...p,...m]}),signInWithEthereum:h}}throw Error(`Account creation not supported on method: ${i.method}`)})()}},async disconnect(e){let{internal:t}=e,{config:n}=t,{storage:r}=n,i=await r.getItem(`porto.authUrl`)||void 0,a=Pm(n.authUrl??i,{storage:r});a&&await fetch(a.logout,{credentials:`include`,method:`POST`}).catch(()=>{})},async getAccountVersion(e){let{internal:n}=e,{store:i,request:a}=n;if(a.method!==`wallet_getAccountVersion`)throw Error(`Cannot get version for method: `+a.method);return r.supportsHeadless?await c(i).request(a):t.actions.getAccountVersion(e)},async getAssets(e){let{internal:n}=e,{store:i,request:a}=n;if(a.method!==`wallet_getAssets`)throw Error(`Cannot get assets for method: `+a.method);if(!r.supportsHeadless)return t.actions.getAssets(e);let o=await c(i).request(a);return j.decode(Yd.Response,o)},async getCallsStatus(e){let{internal:n}=e,{store:i,request:a}=n;if(a.method!==`wallet_getCallsStatus`)throw Error(`Cannot get status for method: `+a.method);return r.supportsHeadless?await c(i).request(a):t.actions.getCallsStatus(e)},async getCapabilities(e){let{internal:n}=e,{store:i,request:a}=n;if(a.method!==`wallet_getCapabilities`)throw Error(`Cannot get capabilities for method: `+a.method);return r.supportsHeadless?await c(i).request(a):t.actions.getCapabilities(e)},async getKeys(e){let{account:n,chainIds:i,internal:a}=e,{store:o}=a,s=await(async()=>{if(!r.supportsHeadless)return t.actions.getKeys(e);let a=await c(o).request({method:`wallet_getKeys`,params:[j.encode(Qd.Parameters,{address:n.address,chainIds:i})]});return j.decode(Qd.Response,a)})();return Xf([...s,...n.keys??[]],e=>e.publicKey)},async grantAdmin(e){let{internal:t}=e,{request:n,store:r}=t;if(n.method!==`wallet_grantAdmin`)throw Error(`Cannot authorize admin for method: `+n.method);let[i]=n._decoded.params,a=U(i.key);if(!a)throw Error(`no key found.`);let o=await Nm(t,e);return await c(r).request({method:`wallet_grantAdmin`,params:[{...n.params?.[0],capabilities:{...n.params?.[0]?.capabilities,feeToken:o}}]}),{key:a}},async grantPermissions(e){let{internal:t}=e,{client:n,request:r,store:i}=t;if(r.method!==`wallet_grantPermissions`)throw Error(`Cannot grant permissions for method: `+r.method);let[{address:a,...o}]=r._decoded.params,s=await qp(o,{chainId:n.chain.id});if(!s)throw Error(`no key found.`);let l=j.encode(Gp,Kp(s));return await c(i).request({method:`wallet_grantPermissions`,params:[l]}),{key:s}},async loadAccounts(e){let{internal:t}=e,{client:n,config:r,store:i}=t,{storage:a}=r,o=c(i),s=t.request;if(s.method!==`wallet_connect`&&s.method!==`eth_requestAccounts`)throw Error(`Cannot load accounts for method: `+s.method);return{accounts:await(async()=>{let[e]=s._decoded.params??[],{capabilities:t}=e??{},i=Pm(t?.signInWithEthereum?.authUrl??r.authUrl,{storage:a}),c=s.params?.[0]?.capabilities?.signInWithEthereum,l=await qp(t?.grantPermissions,{chainId:n.chain.id}),u=l?j.encode(Gp,Kp(l)):void 0,{accounts:d}=await o.request({method:`wallet_connect`,params:[{...s.params?.[0],capabilities:{...s.params?.[0]?.capabilities,grantPermissions:u,signInWithEthereum:i||c?{...c,authUrl:i}:void 0}}]});return Promise.all(d.map(async e=>{let t=e.capabilities?.admins?.map(e=>U(e)).filter(Boolean),n=e.capabilities?.permissions?.map(e=>{try{let t=Wp(j.decode(Hp,e));return t.id===l?.id?{...t,...l,permissions:t.permissions}:t}catch{return}}).filter(Boolean),r=await(async()=>{if(!e.capabilities?.signInWithEthereum)return;let{message:t,signature:n}=e.capabilities.signInWithEthereum;if(!i)return{message:t,signature:n};let{token:r}=await Jp({address:e.address,authUrl:i,message:t,signature:n});return{message:t,signature:n,token:r}})();return{...J({address:e.address,keys:[...t,...n]}),signInWithEthereum:r}}))})()}},async prepareCalls(e){let{account:n,internal:i}=e,{store:a,request:o}=i;if(o.method!==`wallet_prepareCalls`)throw Error(`Cannot prepare calls for method: `+o.method);if(!r.supportsHeadless)return t.actions.prepareCalls(e);let s=await Nm(i,e),l=c(a),u=j.decode($d.Response,await l.request({...o,params:[{...o.params?.[0],capabilities:{...o.params?.[0]?.capabilities,feeToken:s}}]}));return{account:n,chainId:Number(u.chainId),context:u.context,digest:u.digest,key:u.key,typedData:u.typedData}},async prepareUpgradeAccount(e){let{internal:n}=e,{client:i,store:a,request:o}=n;if(o.method!==`wallet_prepareUpgradeAccount`)throw Error(`Cannot prepare upgrade for method: `+o.method);if(!r.supportsHeadless)return t.actions.prepareUpgradeAccount(e);let[{capabilities:s}]=o._decoded.params??[{}],l=await qp(s?.grantPermissions,{chainId:i.chain.id}),u=l?j.encode(Gp,Kp(l)):void 0,{context:d,digests:f}=await c(a).request({...o,params:[{...o.params?.[0],capabilities:{...o.params?.[0]?.capabilities,grantPermissions:u}}]}),p=d.account.keys?.map(e=>e.id===l?.id?{...e,...l}:e);return{context:{...d,account:{...d.account,keys:p}},digests:f}},async revokeAdmin(e){let{account:t,id:n,internal:r}=e,{store:i,request:a}=r;if(a.method!==`wallet_revokeAdmin`)throw Error(`Cannot revoke admin for method: `+a.method);let o=t.keys?.find(e=>e.id===n);if(!o)return;if(o.type===`webauthn-p256`&&t.keys?.filter(e=>e.type===`webauthn-p256`).length===1)throw Error(`revoke the only WebAuthn key left.`);let s=await Nm(r,e);return await c(i).request({...a,params:[{...a.params?.[0],capabilities:{...a.params?.[0]?.capabilities,feeToken:s}}]})},async revokePermissions(e){let{account:t,id:n,internal:r}=e,{store:i,request:a}=r;if(a.method!==`wallet_revokePermissions`)throw Error(`Cannot revoke permissions for method: `+a.method);let o=t.keys?.find(e=>e.id===n);if(o){if(o.role===`admin`)throw Error(`cannot revoke permissions.`);return await c(i).request(a)}},async sendCalls(e){let{account:n,asTxHash:i,calls:a,internal:o,merchantUrl:s,requiredFunds:l}=e,{client:u,store:d,request:f}=o,p=c(d),m=await Nm(o,e),h=await Vp({account:n,calls:a,permissionsId:e.permissionsId});if(h&&h.role===`session`){if(!r.supportsHeadless)return t.actions.sendCalls(e);try{let e=await p.request(j.encode($d.Request,{method:`wallet_prepareCalls`,params:[{calls:a,capabilities:{...f._decoded.method===`wallet_sendCalls`?f._decoded.params?.[0]?.capabilities:void 0,feeToken:m,merchantUrl:s,requiredFunds:l},chainId:u.chain.id,from:n.address,key:h}]})),t=e.capabilities?.quote?.quotes??[];if(t.some((e,n)=>n===t.length-1&&t.length>1?!1:Lt(e.feeTokenDeficit)>0n))throw Error(`insufficient funds`);let r=await du(h,{address:null,payload:e.digest,wrap:!1}),o=(await p.request({method:`wallet_sendPreparedCalls`,params:[{...e,signature:r}]}))[0];if(!o)throw Error(`id not found`);if(i){let{id:e,receipts:t,status:n}=await Js(u,{id:o.id,pollingInterval:500});if(!t?.[0])throw n===`success`?new Nf({message:`Call bundle with id: `+e+` not found.`}):new _f({message:`Transaction failed under call bundle id: `+e+`.`});return{id:t[0].transactionHash}}return o}catch{}}if(f.method===`eth_sendTransaction`)return{id:await p.request({...f,params:[{...f.params?.[0],capabilities:{feeToken:m,merchantUrl:s}}]})};if(f.method===`wallet_sendCalls`)return await p.request({method:`wallet_sendCalls`,params:[{...f.params?.[0],capabilities:{...f.params?.[0]?.capabilities,feeToken:m,merchantUrl:s}}]});throw Error(`Cannot execute for method: `+f.method)},async sendPreparedCalls(e){let{internal:n}=e,{store:i,request:a}=n;if(a.method!==`wallet_sendPreparedCalls`)throw Error(`Cannot send prepared calls for method: `+a.method);if(!r.supportsHeadless)return t.actions.sendPreparedCalls(e);let o=(await c(i).request(a))[0]?.id;if(!o)throw Error(`id not found`);return o},async signPersonalMessage(e){let{internal:t}=e,{store:n,request:r}=t;if(r.method!==`personal_sign`)throw Error(`Cannot sign personal message for method: `+r.method);return await c(n).request(r)},async signTypedData(e){let{internal:t}=e,{store:n,request:r}=t;if(r.method!==`eth_signTypedData_v4`)throw Error(`Cannot sign typed data for method: `+r.method);return await c(n).request(r)},async switchChain(e){let{internal:t}=e,{store:n,request:i}=t;if(i.method!==`wallet_switchEthereumChain`)throw Error(`Cannot switch chain for method: `+i.method);if(r.supportsHeadless)return await c(n).request(i)},async upgradeAccount(e){let{account:t,internal:n}=e,{store:r,request:i}=n;if(i.method!==`wallet_upgradeAccount`)throw Error(`Cannot upgrade account for method: `+i.method);return await c(r).request(i),{account:t}},async verifyEmail(e){let{internal:t}=e,{request:n,store:r}=t;if(n.method!==`account_verifyEmail`)throw Error(`Cannot verify email for method: `+n.method);return await c(r).request(n)}},config:e,name:`dialog`,setup(e){let{internal:t}=e,{store:s}=t,c=r.setup({host:n,internal:t,theme:i,themeController:a}),l=s.subscribe(e=>e.requestQueue,e=>{for(let t of o)t(e);let t=e.map(e=>e.status===`pending`?e:void 0).filter(Boolean);c.syncRequests(t).catch(()=>{}),t.length===0&&c.close()});return()=>{l(),c.destroy()}}})}async function Nm(e,t){let{config:{feeToken:n}}=e,{feeToken:r}=t??{};return r??n}function Pm(e,{storage:t}){if(!e)return;let n=Xp(e,typeof window<`u`?window.location.origin:void 0);return n&&t.setItem(`porto.authUrl`,n),n}const Fm={anvil:{http:`http://localhost:9119`},prod:{http:`https://rpc.porto.sh`},stg:{http:`https://stg-rpc.porto.sh`}};function Im(e){return t=>{let n=e.public(t),r=e.relay(t);return ec({key:Im.type,name:`Relay Proxy`,async request({method:e,params:t},i){return Lm(e)?r.request({method:e,params:t},i):n.request({method:e,params:t},i)},type:Im.type})}}(function(e){e.type=`relayProxy`})(Im||(Im={}));function Lm(e){return!!(e.startsWith(`wallet_`)||e.startsWith(`account_`)||e===`health`)}const Rm=new Map;function zm(e,t={}){let{config:n,id:r,store:i}=e._internal,{chains:a,relay:o}=n,s=i.getState(),c=t.chainId??s.chainIds[0],l=a.find(e=>e.id===c);if(!l)throw Error([`Could not find a compatible Porto chain on the given chain configuration.`,``,`Provided chains: [${a.map(e=>`${e.name} (id: ${e.id})`).join(`, `)}]`,`Needed chain (id): ${c}`,`Please add this chain (id) to your chain configuration.`].join(`
`));let u=Im({public:n.transports[l.id]??nc(l.rpcUrls.default.http.map(e=>oc(e))),relay:o}),d=[r,It(l)].filter(Boolean).join(`:`);if(Rm.has(d))return Rm.get(d);let f=$s({...t,chain:l,pollingInterval:1e3,transport:u});return Rm.set(d,f),f}const Bm=j.discriminatedUnion(`method`,[kd.Request,Ad.Request,jd.Request,Md.Request,Nd.Request,Pd.Request,Fd.Request,zd.Request,Id.Request,Bd.Request,Ld.Request,Rd.Request,ef.Request,Vd.Request,Hd.Request,Wd.Request,Gd.Request,Kd.Request,qd.Request,Jd.Request,Yd.Request,Xd.Request,Zd.Request,Qd.Request,$d.Request,tf.Request,nf.Request,Ud.Request,rf.Request]);function Vm(e,t){let n=j.safeParse(e,t);if(n.error){let e=n.error.issues.at(0);throw e?.code===`invalid_union`&&e.note===`No matching discriminator`?new vf:new Cf(yu(n.error))}return{...t,_decoded:n.data}}async function Hm(e){e.persist.hasHydrated()||await new Promise(t=>{e.persist.onFinishHydration(()=>t(!0)),setTimeout(()=>t(!0),100)})}function Um(e){if(e)return e.startsWith(`/`)?`${window.location.origin}${e}`:e}function Wm(e){let{config:t,getMode:n,id:r,store:i}=e,{announceProvider:a}=t;function o(e={}){let a=s(),o=e.request??Vm(Bm,{method:`wallet_getCapabilities`,params:e.chainIds?[void 0,e.chainIds]:void 0});return Ci(()=>n().actions.getCapabilities({chainIds:e.chainIds,internal:{client:a,config:t,request:o,store:i}}),{cacheKey:`getCapabilities.${r}.${e.chainIds?.join(`,`)}`})}function s(t){let n=typeof t==`string`?Ht(t):t;return zm({_internal:e},{chainId:n})}let c=new Map,l=[],u=Lf(),d=Rf({...u,async request(e){await Hm(i);let r;try{r=Vm(Bm,e)}catch(t){let n=t;if(!(n instanceof vf))throw n;if(e.method.startsWith(`wallet_`))throw new Df;return s().request(e)}let a=i.getState();switch(r.method){case`account_verifyEmail`:{if(a.accounts.length===0)throw new Q;let[e]=r._decoded.params,{chainId:o,email:c,token:l,walletAddress:u}=e,d=s(o);if(o&&o!==d.chain.id)throw new Of;let f=u?a.accounts.find(e=>H(e.address,u)):a.accounts[0];if(!f)throw new Z;return await n().actions.verifyEmail({account:f,chainId:o,email:c,internal:{client:d,config:t,request:r,store:i},token:l,walletAddress:u})}case`wallet_addFunds`:{if(a.accounts.length===0)throw new Q;let{address:e,value:o,token:c}=r.params[0]??{},l=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!l)throw new Z;let d=s(),f=await n().actions.addFunds({address:l.address,internal:{client:d,config:t,request:r,store:i},token:c,value:o});return u.emit(`message`,{data:null,type:`assetsChanged`}),f}case`eth_accounts`:if(a.accounts.length===0)throw new Q;return a.accounts.map(e=>e.address);case`eth_chainId`:return C(a.chainIds[0]);case`eth_requestAccounts`:{if(a.accounts.length>0&&c.get(`eth_requestAccounts`))return a.accounts.map(e=>e.address);let e=s(),{accounts:o}=await n().actions.loadAccounts({internal:{client:e,config:t,request:r,store:i}});return i.setState(e=>({...e,accounts:o})),u.emit(`connect`,{chainId:C(e.chain.id)}),c.set(`eth_requestAccounts`,!0),setTimeout(()=>c.delete(`eth_requestAccounts`),1e3),o.map(e=>e.address)}case`eth_sendTransaction`:{if(a.accounts.length===0)throw new Q;let[{capabilities:e,chainId:o,data:c=`0x`,from:l,to:u,value:d}]=r._decoded.params,f=s(o);if(o&&o!==f.chain.id)throw new Of;let p=l?a.accounts.find(e=>H(e.address,l)):a.accounts[0];if(!p)throw new Z;let{id:m}=await n().actions.sendCalls({account:p,asTxHash:!0,calls:[{data:c,to:u,value:d}],internal:{client:f,config:t,request:r,store:i},merchantUrl:Um(t.merchantUrl??e?.merchantUrl)});return m}case`eth_signTypedData_v4`:{if(a.accounts.length===0)throw new Q;let[e,o]=r._decoded.params,c=a.accounts.find(t=>H(t.address,e));if(!c)throw new Z;let l=s();return await n().actions.signTypedData({account:c,data:o,internal:{client:l,config:t,request:r,store:i}})}case`wallet_grantAdmin`:{if(a.accounts.length===0)throw new Q;let[{address:e,capabilities:o,chainId:c,key:l}]=r._decoded.params??[{}],d=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!d)throw new Z;let f=s(c);if(Km([...d.keys??[]])?.some(e=>e.publicKey?.toLowerCase()===l.publicKey.toLowerCase()))throw new Cf({message:`Key already granted as admin.`});let{key:p}=await n().actions.grantAdmin({account:d,feeToken:o?.feeToken,internal:{client:f,config:t,request:r,store:i},key:l});i.setState(e=>{let t=e.accounts.findIndex(e=>d?H(e.address,d.address):!0);return t===-1?e:{...e,accounts:e.accounts.map((e,n)=>n===t?{...e,keys:[...e.keys??[],p]}:e)}});let m=Km([...d.keys??[],p]);return u.emit(`message`,{data:null,type:`adminsChanged`}),j.encode(Ld.Response,{address:d.address,chainId:f.chain.id,key:m.at(-1)})}case`wallet_grantPermissions`:{if(a.accounts.length===0)throw new Q;let[{address:e,chainId:o,...c}]=r._decoded.params??[{}],l=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!l)throw new Z;let d=s(o),{key:f}=await n().actions.grantPermissions({account:l,internal:{client:d,config:t,request:r,store:i},permissions:c});return i.setState(e=>{let t=e.accounts.findIndex(e=>l?H(e.address,l.address):!0);return t===-1?e:{...e,accounts:e.accounts.map((e,n)=>n===t?{...e,keys:[...e.keys??[],f]}:e)}}),u.emit(`message`,{data:null,type:`permissionsChanged`}),j.encode(Rd.Response,{...Up(f,{address:l.address})})}case`wallet_getAdmins`:{if(a.accounts.length===0)throw new Q;let[{address:e,chainId:o}]=r._decoded.params??[{}],c=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!c)throw new Z;let l=s(o),u=await n().actions.getKeys({account:c,internal:{client:l,config:t,request:r,store:i}}),d=Km(u);return j.encode(Id.Response,{address:c.address,chainId:l.chain.id,keys:d})}case`wallet_prepareUpgradeAccount`:{let[{address:e,capabilities:a,chainId:o}]=r._decoded.params??[{}],{email:c,label:u,grantPermissions:d}=a??{},f=s(o),{context:p,digests:m}=await n().actions.prepareUpgradeAccount({address:e,email:c,internal:{client:f,config:t,request:r,store:i},label:u,permissions:d});return l.push(p.account),{context:p,digests:m}}case`wallet_getAccountVersion`:{if(a.accounts.length===0)throw new Q;let[{address:e}]=r._decoded.params??[{}],o=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!o)throw new Z;let c=s(),{current:l,latest:u}=await n().actions.getAccountVersion({address:o.address,internal:{client:c,config:t,request:r,store:i}});return{current:l,latest:u}}case`wallet_getKeys`:{if(a.accounts.length===0)throw new Q;let[{address:e,chainIds:o}]=r._decoded.params??[{}],c=a.accounts.find(t=>H(t.address,e));if(!c)throw new Z;let l=s(),u=await n().actions.getKeys({account:c,chainIds:o,internal:{client:l,config:t,request:r,store:i}});return j.encode(Qd.Response,u)}case`wallet_getPermissions`:{if(a.accounts.length===0)throw new Q;let[{address:e,chainIds:o}]=r._decoded.params??[{}],c=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!c)throw new Z;let l=s(),u=await n().actions.getKeys({account:c,chainIds:o,internal:{client:l,config:t,request:r,store:i}});return qm(u,{address:c.address})}case`wallet_revokeAdmin`:{if(a.accounts.length===0)throw new Q;let[{address:e,capabilities:o,id:c}]=r._decoded.params,l=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!l)throw new Z;let d=s();await n().actions.revokeAdmin({account:l,feeToken:o?.feeToken,id:c,internal:{client:d,config:t,request:r,store:i}});let f=l.keys?.filter(e=>e.id.toLowerCase()!==c.toLowerCase());i.setState(e=>({...e,accounts:e.accounts.map(e=>H(e.address,l.address)?{...e,keys:f}:e)})),u.emit(`message`,{data:null,type:`adminsChanged`});return}case`wallet_revokePermissions`:{if(a.accounts.length===0)throw new Q;let[{address:e,capabilities:o,id:c}]=r._decoded.params,l=e?a.accounts.find(t=>H(t.address,e)):a.accounts[0];if(!l)throw new Z;let d=s();await n().actions.revokePermissions({account:l,feeToken:o?.feeToken,id:c,internal:{client:d,config:t,request:r,store:i}});let f=l.keys?.filter(e=>e.id.toLowerCase()!==c.toLowerCase());i.setState(e=>({...e,accounts:e.accounts.map(e=>H(e.address,l.address)?{...e,keys:f}:e)})),u.emit(`message`,{data:null,type:`permissionsChanged`});return}case`wallet_upgradeAccount`:{let[{context:e,signatures:a}]=r._decoded.params??[{}],o=s(),c=l.find(t=>H(t.address,e.account.address));if(!c)throw new Z;let{account:d}=await n().actions.upgradeAccount({account:c,context:e,internal:{client:o,config:t,request:r,store:i},signatures:a}),f=Km(d.keys??[]),p=qm(d.keys??[],{address:d.address});return i.setState(e=>({...e,accounts:[d]})),u.emit(`connect`,{chainId:C(o.chain.id)}),{address:d.address,capabilities:{admins:f,...p.length>0?{permissions:p}:{}}}}case`porto_ping`:return`pong`;case`personal_sign`:{if(a.accounts.length===0)throw new Q;let[e,o]=r._decoded.params,c=a.accounts.find(e=>H(e.address,o));if(!c)throw new Z;let l=s();return await n().actions.signPersonalMessage({account:c,data:e,internal:{client:l,config:t,request:r,store:i}})}case`wallet_connect`:{let[{capabilities:e,chainIds:o}]=r._decoded.params??[{}],c=s(o?.[0]),l=c.chain.id,{createAccount:d,email:f,grantAdmins:p,grantPermissions:m,selectAccount:h,signInWithEthereum:g}=e??{},_={client:c,config:t,request:r,store:i},{accounts:v}=await(async()=>{if(f||d){let{label:e=void 0}=typeof d==`object`?d:{},{account:t}=await n().actions.createAccount({admins:p,email:f,internal:_,label:e,permissions:m,signInWithEthereum:g});return{accounts:[t]}}let e=a.accounts[0],{address:t,key:r}=(()=>{if(h)return typeof h==`object`?h:{address:void 0,key:void 0};for(let t of e?.keys??[])if(t.type===`webauthn-p256`&&t.role===`admin`)return{address:e?.address,key:{credentialId:t.credentialId??t.privateKey?.credential?.id,publicKey:t.publicKey}};return{address:void 0,key:void 0}})(),i={internal:_,permissions:m,signInWithEthereum:g};try{return await n().actions.loadAccounts({address:t,key:r,...i})}catch(e){if(e instanceof Ef)throw e;if(t&&r)return await n().actions.loadAccounts(i);throw e}})();i.setState(e=>({...e,accounts:v}));let y=[l,...i.getState().chainIds.filter(e=>e!==l)];return u.emit(`connect`,{chainId:C(y[0])}),{accounts:v.map(e=>({address:e.address,capabilities:{admins:e.keys?Km(e.keys):[],permissions:e.keys?qm(e.keys,{address:e.address}):[],...e.signInWithEthereum&&{signInWithEthereum:e.signInWithEthereum}}})),chainIds:y.map(e=>C(e))}}case`wallet_disconnect`:{let e=s();await n().actions.disconnect?.({internal:{client:e,config:t,request:r,store:i}}),i.setState(e=>({...e,accounts:[]})),u.emit(`disconnect`,new Q);return}case`wallet_getAssets`:{let[e]=r._decoded.params??[],{account:a,chainFilter:o,assetFilter:c,assetTypeFilter:l}=e,u=s(),d=await n().actions.getAssets({account:a,assetFilter:c,assetTypeFilter:l,chainFilter:o,internal:{client:u,config:t,request:r,store:i}}),f=Object.entries(d).reduce((e,[t,n])=>(e[C(Number(t))]=n,e),{});return j.encode(Yd.Response,f)}case`wallet_getCallsStatus`:{let[e]=r._decoded.params??[],a=s();return await n().actions.getCallsStatus({id:e,internal:{client:a,config:t,request:r,store:i}})}case`wallet_getCapabilities`:{let[e,t]=r.params??[];return await o({chainIds:t,request:r})}case`wallet_prepareCalls`:{let[e]=r._decoded.params,{calls:o,capabilities:c,chainId:l,key:u,from:d}=e,f=s(l),p=d??a.accounts[0];if(!p)throw new Z;if(l&&l!==f.chain.id)throw new Of;let{digest:m,...h}=await n().actions.prepareCalls({account:J(p),calls:o,feeToken:c?.feeToken,internal:{client:f,config:t,request:r,store:i},key:u,merchantUrl:Um(t.merchantUrl??c?.merchantUrl),requiredFunds:c?.requiredFunds});return j.encode($d.Response,{capabilities:h.capabilities,chainId:C(h.chainId??f.chain.id),context:{...h.context,account:{address:h.account.address},calls:h.context.calls??[],nonce:h.context.nonce??0n},digest:m,key:h.key,typedData:h.typedData})}case`wallet_sendPreparedCalls`:{let[e]=r._decoded.params,{chainId:a,context:o,key:c,signature:l}=e,{account:u}=e.context,d=s(a);if(a&&Ht(a)!==d.chain.id)throw new Of;return[{id:await n().actions.sendPreparedCalls({account:J(u),context:o,internal:{client:d,config:t,request:r,store:i},key:c,signature:l})}]}case`wallet_sendCalls`:{if(a.accounts.length===0)throw new Q;let[e]=r._decoded.params,{calls:o,capabilities:c,chainId:l,from:u}=e,d=s(l);if(l&&l!==d.chain.id)throw new Of;let f=u?a.accounts.find(e=>H(e.address,u)):a.accounts[0];if(!f)throw new Z;let{id:p}=await n().actions.sendCalls({account:f,calls:o,feeToken:c?.feeToken,internal:{client:d,config:t,request:r,store:i},merchantUrl:Um(t.merchantUrl??c?.merchantUrl),permissionsId:c?.permissions?.id,requiredFunds:c?.requiredFunds});return{id:p}}case`wallet_switchEthereumChain`:{let[e]=r._decoded.params,{chainId:a}=e,o=Ht(a);if(!t.chains.find(e=>e.id===o))throw new jf;let c=s(a);await n().actions.switchChain?.({chainId:c.chain.id,internal:{client:c,config:t,request:r,store:i}}),i.setState(e=>({...e,chainIds:[o,...e.chainIds.filter(e=>e!==o)]}));return}case`wallet_verifySignature`:{let[e]=r._decoded.params,{address:t,chainId:n,digest:i,signature:a}=e,o=s(n);return{...await mm(o,{address:t,digest:i,signature:a}),address:t,chainId:C(o.chain.id)}}}}});function f(){let e=()=>{},t=()=>{};Hm(i).then(()=>{o().catch(()=>{}),e(),e=i.subscribe(e=>e.accounts,e=>{u.emit(`accountsChanged`,e.map(e=>e.address))},{equalityFn:(e,t)=>e.every((e,n)=>e.address===t[n]?.address)}),t(),t=i.subscribe(e=>e.chainIds[0],(e,t)=>{e!==t&&u.emit(`chainChanged`,C(e))})});let n=Gm(d,a);return()=>{e(),t(),n()}}let p=f();return Object.assign(d,{_internal:{destroy:p}})}function Gm(e,t){if(!t||typeof window>`u`||!window.dispatchEvent)return()=>{};let{icon:n=`data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDIyIiBoZWlnaHQ9IjQyMiIgdmlld0JveD0iMCAwIDQyMiA0MjIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MjIiIGhlaWdodD0iNDIyIiBmaWxsPSJibGFjayIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMV8xNSkiPgo8cGF0aCBkPSJNODEgMjg2LjM2NkM4MSAyODAuODkzIDg1LjQ1MDUgMjc2LjQ1NSA5MC45NDA0IDI3Ni40NTVIMzI5LjUxMUMzMzUuMDAxIDI3Ni40NTUgMzM5LjQ1MiAyODAuODkzIDMzOS40NTIgMjg2LjM2NlYzMDYuMTg4QzMzOS40NTIgMzExLjY2MiAzMzUuMDAxIDMxNi4wOTkgMzI5LjUxMSAzMTYuMDk5SDkwLjk0MDRDODUuNDUwNSAzMTYuMDk5IDgxIDMxMS42NjIgODEgMzA2LjE4OFYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAyMzQuODI4Qzg1LjQ1MDUgMjM0LjgyOCA4MSAyMzkuMjY2IDgxIDI0NC43MzlWMjcxLjUzMUM4My44NDMyIDI2OS42MzMgODcuMjYyMiAyNjguNTI2IDkwLjk0MDQgMjY4LjUyNkgzMjkuNTExQzMzMy4xODggMjY4LjUyNiAzMzYuNjA4IDI2OS42MzMgMzM5LjQ1MiAyNzEuNTMxVjI0NC43MzlDMzM5LjQ1MiAyMzkuMjY2IDMzNS4wMDEgMjM0LjgyOCAzMjkuNTExIDIzNC44MjhIOTAuOTQwNFpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgwLjg5MyAzMzUuMDAxIDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTlDODEgMzExLjY2NCA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2NCAzMzkuNDUyIDMwNi4xOVYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAxOTMuMjAxQzg1LjQ1MDUgMTkzLjIwMSA4MSAxOTcuNjM4IDgxIDIwMy4xMTJWMjI5LjkwM0M4My44NDMyIDIyOC4wMDYgODcuMjYyMiAyMjYuODk5IDkwLjk0MDQgMjI2Ljg5OUgzMjkuNTExQzMzMy4xODggMjI2Ljg5OSAzMzYuNjA4IDIyOC4wMDYgMzM5LjQ1MiAyMjkuOTAzVjIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNFpNMzM5LjQ1MiAyNDQuNzM5QzMzOS40NTIgMjM5LjI2NSAzMzUuMDAxIDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNDODEuMjE3NSAyNzEuMzg1IDgxLjQzODMgMjcxLjI0NSA4MS42NjI0IDI3MS4xMDlDODMuODMyNSAyNjkuNzk0IDg2LjMwNTQgMjY4LjkyNyA4OC45NTIzIDI2OC42MzVDODkuNjA1MSAyNjguNTYzIDkwLjI2ODQgMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMzAuMTgzIDI2OC41MjYgMzMwLjg0NiAyNjguNTYzIDMzMS40OTggMjY4LjYzNUMzMzQuNDE5IDI2OC45NTcgMzM3LjEyOCAyNjkuOTggMzM5LjQ1MiAyNzEuNTNWMjQ0LjczOVpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgxLjAyMSAzMzUuMjA2IDI3Ni42NjMgMzI5Ljg5MyAyNzYuNDYyQzMyOS43NjcgMjc2LjQ1NyAzMjkuNjQgMjc2LjQ1NSAzMjkuNTExIDI3Ni40NTVIOTAuOTQwNEM4NS40NTA1IDI3Ni40NTUgODEgMjgwLjg5MyA4MSAyODYuMzY2VjMwNi4xODhDODEgMzExLjY2MiA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2MiAzMzkuNDUyIDMwNi4xODhWMjg2LjM2NloiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNSIvPgo8cGF0aCBvcGFjaXR5PSIwLjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTguMDE0NiAxMDRDODguNjE3NyAxMDQgODEgMTExLjU5NSA4MSAxMjAuOTY1VjE4OC4yNzZDODMuODQzMiAxODYuMzc5IDg3LjI2MjIgMTg1LjI3MiA5MC45NDA0IDE4NS4yNzJIMzI5LjUxMUMzMzMuMTg4IDE4NS4yNzIgMzM2LjYwOCAxODYuMzc5IDMzOS40NTIgMTg4LjI3NlYxMjAuOTY1QzMzOS40NTIgMTExLjU5NSAzMzEuODMzIDEwNCAzMjIuNDM3IDEwNEg5OC4wMTQ2Wk0zMzkuNDUyIDIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNEM4NS40NTA1IDE5My4yMDEgODEgMTk3LjYzOCA4MSAyMDMuMTEyVjIyOS45MDNDODEuMjE3NSAyMjkuNzU4IDgxLjQzODMgMjI5LjYxOCA4MS42NjI0IDIyOS40ODJDODMuODMyNSAyMjguMTY3IDg2LjMwNTQgMjI3LjMgODguOTUyMyAyMjcuMDA4Qzg5LjYwNTEgMjI2LjkzNiA5MC4yNjg0IDIyNi44OTkgOTAuOTQwNCAyMjYuODk5SDMyOS41MTFDMzMwLjE4MyAyMjYuODk5IDMzMC44NDYgMjI2LjkzNiAzMzEuNDk4IDIyNy4wMDhDMzM0LjQxOSAyMjcuMzMgMzM3LjEyOCAyMjguMzUyIDMzOS40NTIgMjI5LjkwM1YyMDMuMTEyWk0zMzkuNDUyIDI0NC43MzlDMzM5LjQ1MiAyMzkuMzkzIDMzNS4yMDYgMjM1LjAzNiAzMjkuODkzIDIzNC44MzVDMzI5Ljc2NyAyMzQuODMgMzI5LjY0IDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNMODEuMDcwNyAyNzEuNDgzQzgxLjI2NTMgMjcxLjM1NSA4MS40NjI1IDI3MS4yMyA4MS42NjI0IDI3MS4xMDlDODEuOTA4MyAyNzAuOTYgODIuMTU4MSAyNzAuODE3IDgyLjQxMTcgMjcwLjY3OUM4NC4zOTUzIDI2OS42MDUgODYuNjA1NCAyNjguODk0IDg4Ljk1MjMgMjY4LjYzNUM4OS4wMDUyIDI2OC42MjkgODkuMDU4IDI2OC42MjQgODkuMTExIDI2OC42MThDODkuNzEyNSAyNjguNTU3IDkwLjMyMjggMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMjkuNzM4IDI2OC41MjYgMzI5Ljk2NSAyNjguNTMgMzMwLjE5MiAyNjguNTM5QzMzMC42MzEgMjY4LjU1NSAzMzEuMDY3IDI2OC41ODcgMzMxLjQ5OCAyNjguNjM1QzMzNC40MTkgMjY4Ljk1NyAzMzcuMTI4IDI2OS45OCAzMzkuNDUyIDI3MS41M1YyNDQuNzM5Wk0zMzkuNDUyIDI4Ni4zNjZDMzM5LjQ1MiAyODEuMDIxIDMzNS4yMDYgMjc2LjY2MyAzMjkuODkzIDI3Ni40NjJMMzI5Ljg2NSAyNzYuNDYxQzMyOS43NDggMjc2LjQ1NyAzMjkuNjI5IDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTg4QzgxIDMxMS42NjIgODUuNDUwNSAzMTYuMTAxIDkwLjk0MDQgMzE2LjEwMUgzMjkuNTExQzMzNS4wMDEgMzE2LjEwMSAzMzkuNDUyIDMxMS42NjIgMzM5LjQ1MiAzMDYuMTg4VjI4Ni4zNjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjY5Ljg2OCAxMzEuNzUyQzI2OS44NjggMTI2LjI3OCAyNzQuMzE4IDEyMS44NCAyNzkuODA4IDEyMS44NEgzMTEuNjE4QzMxNy4xMDggMTIxLjg0IDMyMS41NTggMTI2LjI3OCAzMjEuNTU4IDEzMS43NTJWMTYxLjQ4NUMzMjEuNTU4IDE2Ni45NTkgMzE3LjEwOCAxNzEuMzk2IDMxMS42MTggMTcxLjM5NkgyNzkuODA4QzI3NC4zMTggMTcxLjM5NiAyNjkuODY4IDE2Ni45NTkgMjY5Ljg2OCAxNjEuNDg1VjEzMS43NTJaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzFfMTUiPgo8cmVjdCB3aWR0aD0iMjU5IiBoZWlnaHQ9IjIxMyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgxIDEwNCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K`,name:r=`Porto`,rdns:i=`xyz.ithaca.porto`}=typeof t==`object`?t:{};return hn.announceProvider({info:{icon:n,name:r,rdns:i,uuid:Zf()},provider:e})}function Km(e){return e.map(e=>{if(e.role===`admin`)try{return j.encode(Id.Key,{id:e.id??e.publicKey,publicKey:e.publicKey,type:e.type,...e.type===`webauthn-p256`?{credentialId:e.privateKey?.credential?.id,privateKey:{credential:{id:e.privateKey?.credential?.id},rpId:e.privateKey?.rpId}}:{}})}catch{return}}).filter(Boolean)}function qm(e,{address:t}){return e.map(e=>{if(e.chainId&&e.role===`session`&&!(e.expiry>0&&e.expiry<BigInt(Math.floor(Date.now()/1e3))))try{return j.encode(Hp,Up(e,{address:t}))}catch{return}}).filter(Boolean)}function Jm(e){return e}function Ym(){let e=typeof indexedDB<`u`?gn(`porto`,`store`):void 0;return Jm({async getItem(t){let n=await vn(t,e);return n===null?null:n},async removeItem(t){await _n(t,e)},async setItem(t,n){await yn(t,Yf(n),e)},sizeLimit:1024*1024*50})}function Xm(){let e=new Map;return Jm({getItem(t){return e.get(t)??null},removeItem(t){e.delete(t)},setItem(t,n){e.set(t,n)},sizeLimit:1/0})}const Zm=typeof window<`u`&&typeof document<`u`,Qm={announceProvider:!0,chains:Uc,mode:Zm?Mm({host:tp.prod}):jm(),relay:oc(Fm.prod.http),storage:Zm&&typeof indexedDB<`u`?Ym():Xm(),storageKey:`porto.store`};function $m(e={}){let t=e.chains??Qm.chains,n=Object.fromEntries(t.map(t=>[t.id,e.transports?.[t.id]??oc()])),r={announceProvider:e.announceProvider??Qm.announceProvider,authUrl:e.authUrl,chains:t,feeToken:e.feeToken,merchantUrl:e.merchantUrl,mode:e.mode??Qm.mode,relay:e.relay??Qm.relay,storage:e.storage??Qm.storage,storageKey:e.storageKey??Qm.storageKey,transports:n},i=mn(dn(pn(fn(e=>({accounts:[],chainIds:r.chains.map(e=>e.id),feeToken:r.feeToken,requestQueue:[]}),{merge(e,t){let n=e,i=r.chains.find(e=>e.id===n.chainIds[0])?.id??r.chains[0].id,a=[i,...r.chains.map(e=>e.id).filter(e=>e!==i)];return{...t,...n,chainIds:a}},name:r.storageKey,partialize:e=>({accounts:e.accounts.map(e=>Yf(e)),chainIds:e.chainIds}),storage:r.storage,version:5})))),a=r.mode,o={config:r,getMode(){return a},id:Zf(),setMode(e){return c?.(),a=e,c=e.setup({internal:o}),c},store:i},s=Wm(o),c=a===null?()=>{}:a.setup({internal:o});return{_internal:o,config:r,destroy(){c(),s._internal.destroy()},provider:s}}const eh=new Map;function th(e,t={}){let{provider:n}=e,{id:r}=e._internal,i=[`provider`,r].filter(Boolean).join(`:`);if(eh.has(i))return eh.get(i);let a=$s({...t,pollingInterval:1e3,transport:tc(n)});return eh.set(i,a),a}async function nh(e={}){let{dialog:t}=e,n=$m({announceProvider:!1,chains:[vc,bc],mode:Mm({host:t?new URL(`/dialog`,`https://`+t).toString():void 0,renderer:await zp()})});return th(n,{chain:vc})}async function rh(e,t){let n=await nh(t);Pr(`Create a Porto Account`);let r=Lr(),i=t.adminKey?eu():void 0,a;if(i)try{let e=$t.join(Qt.tmpdir(),`porto`);Zt.mkdirSync(e,{mode:448,recursive:!0}),a=$t.join(e,`admin-key-${Date.now()}-${Math.random().toString(36).slice(2)}.key`),Zt.writeFileSync(a,i.privateKey(),{mode:384})}catch{}let o=!!i;function s(e,t){if(!o)return process.exit(1);try{r.stop(`Interrupted.`)}catch{}if(t){let n=t instanceof Error?t.message:String(t);z.info(`${e??`Error`}: ${n}`)}i&&(a?z.info(`Admin key saved securely to temporary file: ${a}`):z.warn(`Admin key could not be saved to a temporary file. Please rerun to generate a new key.`)),o=!1,process.exit(1)}let c=()=>s(`SIGINT`),l=()=>s(`SIGTERM`),u=e=>s(`uncaughtException`,e),d=e=>s(`unhandledRejection`,e),f=()=>{o&&(i&&(a?z.info(`Admin key saved securely to temporary file:\n${a}`):z.warn(`Admin key could not be saved to a temporary file. Please rerun to generate a new key.`)),o=!1)};i&&(process.on(`SIGINT`,c),process.on(`SIGTERM`,l),process.on(`uncaughtException`,u),process.on(`unhandledRejection`,d),process.on(`exit`,f)),i&&Rp.registerPublicKey(i.publicKey),r.start(`Creating account...`);let{accounts:p}=await uf(n,{chainIds:[t.testnet?bc.id:vc.id],createAccount:!0,grantAdmins:i?[{publicKey:i.publicKey,type:i.type}]:void 0});if(r.stop(`Account created.`),r.start(`Onramping...`),await n.request({method:`wallet_addFunds`,params:[{address:p[0].address,token:t.testnet?void 0:`0x0000000000000000000000000000000000000000`}]}),r.stop(`Onramped.`),Rp.send(`success`,{content:`You have successfully created an account.`,title:`Account created`}),i){let{digest:e,...t}=await n.request({method:`wallet_prepareCalls`,params:[{calls:[],key:i}]}),a=await du(i,{address:null,payload:e,wrap:!1}),o=await n.request({method:`wallet_sendPreparedCalls`,params:[{...t,signature:a}]});r.start(`Initializing account...`),await Js(n,{id:o[0].id,throwOnFailure:!0}),r.stop(`Account initialized.`)}if(i){let e=await Nr({initialValue:!1,message:`Reveal private key? (This will be visible in terminal)`});if(z.info(`Address: `+p[0].address),e)z.info(`Private key: `+i?.privateKey());else{let e=$t.join(import.meta.dirname,`${p[0].address}.key`);Zt.writeFileSync(e,i?.privateKey(),{mode:384}),Zt.chmodSync(e,384),z.info(`Private key saved securely to: ${e}`)}if(a)try{Zt.rmSync(a)}catch{}}z.info(`Manage your account at: https://id.porto.sh`),o=!1,i&&(process.off(`SIGINT`,c),process.off(`SIGTERM`,l),process.off(`uncaughtException`,u),process.off(`unhandledRejection`,d),process.off(`exit`,f)),await en(1e3),process.exit(0)}export{rh as createAccount};